<!DOCTYPE html>
<html>

<!-- Mirrored from doc.ez.no/display/EZP/Persistence+cache+configuration?focusedCommentId=21299457 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 10:07:12 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <title>Persistence cache configuration - Exponential 5.x - eZ Documentation</title>

        

                        
    
                        
    
                        
    

    <meta http-equiv="X-UA-Compatible" content="IE=EDGE,chrome=IE7">
<meta charset="UTF-8">
<meta id="confluence-context-path" name="confluence-context-path" content="">
<meta id="confluence-base-url" name="confluence-base-url" content="../../index.html">

<meta id="atlassian-token" name="atlassian-token" content="9996d8127abd36d1b757536de859090f8b455d10">


<meta id="confluence-space-key" name="confluence-space-key" content="EZP">
<script type="text/javascript">
        var contextPath = '';
</script>

    

    <meta name="confluence-request-time" content="1485853412931">
        
    
        
            <meta name="ajs-is-space-admin" content=""> <meta name="ajs-has-space-config" content="">
            <meta name="ajs-use-keyboard-shortcuts" content="true">
            <meta name="ajs-discovered-plugin-features" content="$discoveredList">
            <meta name="stp-license-product-name" content="Confluence"/> <meta name="stp-license-days-to-expiry" content="807"/> <meta name="stp-license-is-admin" content="false"/> <meta name="stp-license-should-keep-banner-hidden" content="true"/>
            <meta name="ajs-keyboardshortcut-hash" content="206314443b3cf79696d4ad89324a059c">
            <meta id="team-calendars-has-jira-link" content="true">
            <meta name="ajs-team-calendars-display-time-format" content="displayTimeFormat12">
            <meta id="team-calendars-user-timezone" content="UTC">
            <script type="text/x-template" id="team-calendars-messages" title="team-calendars-messages"><fieldset class="i18n hidden"><input type="hidden" name="calendar3.month.long.july" value="July"><input type="hidden" name="calendar3.day.short.wednesday" value="Wed"><input type="hidden" name="calendar3.day.short.thursday" value="Thu"><input type="hidden" name="calendar3.month.short.march" value="Mar"><input type="hidden" name="calendar3.month.long.april" value="April"><input type="hidden" name="calendar3.month.long.october" value="October"><input type="hidden" name="calendar3.month.long.august" value="August"><input type="hidden" name="calendar3.month.short.july" value="Jul"><input type="hidden" name="calendar3.month.short.may" value="May"><input type="hidden" name="calendar3.month.short.november" value="Nov"><input type="hidden" name="calendar3.day.long.friday" value="Friday"><input type="hidden" name="calendar3.day.long.sunday" value="Sunday"><input type="hidden" name="calendar3.day.long.saturday" value="Saturday"><input type="hidden" name="calendar3.month.short.april" value="Apr"><input type="hidden" name="calendar3.day.long.wednesday" value="Wednesday"><input type="hidden" name="calendar3.month.long.december" value="December"><input type="hidden" name="calendar3.month.short.october" value="Oct"><input type="hidden" name="calendar3.day.long.monday" value="Monday"><input type="hidden" name="calendar3.month.short.june" value="Jun"><input type="hidden" name="calendar3.day.short.monday" value="Mon"><input type="hidden" name="calendar3.day.short.tuesday" value="Tue"><input type="hidden" name="calendar3.day.short.saturday" value="Sat"><input type="hidden" name="calendar3.month.long.march" value="March"><input type="hidden" name="calendar3.month.long.june" value="June"><input type="hidden" name="calendar3.month.short.february" value="Feb"><input type="hidden" name="calendar3.month.short.august" value="Aug"><input type="hidden" name="calendar3.month.short.december" value="Dec"><input type="hidden" name="calendar3.day.short.sunday" value="Sun"><input type="hidden" name="calendar3.month.long.february" value="February"><input type="hidden" name="calendar3.day.long.tuesday" value="Tuesday"><input type="hidden" name="calendar3.month.long.may" value="May"><input type="hidden" name="calendar3.month.long.september" value="September"><input type="hidden" name="calendar3.month.long.november" value="November"><input type="hidden" name="calendar3.month.short.january" value="Jan"><input type="hidden" name="calendar3.month.short.september" value="Sep"><input type="hidden" name="calendar3.day.long.thursday" value="Thursday"><input type="hidden" name="calendar3.month.long.january" value="January"><input type="hidden" name="calendar3.day.short.friday" value="Fri"></fieldset></script>
            <meta name="ajs-is-confluence-admin" content="false">
            <meta name="ajs-connection-timeout" content="10000">
            
    
    
            <meta name="ajs-page-id" content="12781293">
            <meta name="ajs-latest-page-id" content="12781293">
            <meta name="ajs-content-type" content="page">
            <meta name="ajs-page-title" content="Persistence cache configuration">
            <meta name="ajs-parent-page-title" content="Configuration">
            <meta name="ajs-parent-page-id" content="2720538">
            <meta name="ajs-space-key" content="EZP">
            <meta name="ajs-space-name" content="Exponential 5.x">
            <meta name="ajs-comment-id" content="21299457">
            <meta name="ajs-from-page-title" content="">
            <meta name="ajs-can-remove-page" content="false">
            <meta name="ajs-context-path" content="">
            <meta name="ajs-base-url" content="https://doc.ez.no">
            <meta name="ajs-version-number" content="5.8.5">
            <meta name="ajs-build-number" content="5983">
            <meta name="ajs-remote-user" content="">
            <meta name="ajs-remote-user-key" content="">
            <meta name="ajs-current-user-fullname" content="">
            <meta name="ajs-current-user-avatar-url" content="">
            <meta name="ajs-static-resource-url-prefix" content="/s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/_">
            <meta name="ajs-global-settings-attachment-max-size" content="10485760">
            <meta name="ajs-user-locale" content="en_GB">
            <meta name="ajs-enabled-dark-features" content="confluence-inline-comments-resolved,notification.plugin.api.enabled.com.atlassian.confluence.plugins.sharepage.api.ShareContentEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.mentions.api.ConfluenceMentionEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.security.ForgotPasswordEvent,pdf-preview,notification.plugin.api.enabled.com.atlassian.confluence.plugins.tasklist.event.SendTaskEmailEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageMovedEvent,previews.sharing,previews.versions,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentUpdateEvent,file-annotations,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.attachment.AttachmentBatchUploadCompletedEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.comment.CommentCreateEvent,notification.plugin.api.enabled.com.atlassian.confluence.efi.emails.events.OnboardingLessUsersEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentRemoveEvent,atlassian.aui.raphael.disabled,previews.conversion-service,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.comment.CommentUpdateEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.follow.FollowEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageEditedEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostCreateEvent,previews.trigger-all-file-types,notification.plugin.api.enabled.com.atlassian.confluence.plugins.inlinecomments.events.InlineCommentResolveEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.like.LikeCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.inlinecomments.events.InlineCommentCreateEvent,previews.sharing.pushstate,confluence-inline-comments-rich-editor,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostUpdateEvent,file-annotations.likes,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentMentionUpdateEvent,notification.plugin.api.enabled.com.atlassian.confluence.efi.emails.events.OnboardingNoSpaceCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.hipchat.api.events.HipChatUserMapped,notification.plugin.api.enabled.com.atlassian.confluence.plugins.sharepage.api.ShareAttachmentEvent,confluence-inline-comments,confluence-inline-comments-dangling-comment,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostMovedEvent">
            <meta name="ajs-atl-token" content="9996d8127abd36d1b757536de859090f8b455d10">
            <meta name="ajs-confluence-flavour" content="VANILLA">
            <meta name="ajs-user-date-pattern" content="dd MMM yyyy">
            <meta name="ajs-date.format" content="MMM dd, yyyy">
    
    <link rel="shortcut icon" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/_/favicon.ico">
    <link rel="icon" type="image/x-icon" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/_/favicon.ico">

<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch/osd.action" title="eZ Documentation"/>

<script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-nps-plugin:atlassian-nps-plugin-resources.is-server-instance-data-provider"]="true";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics.feature-data-provider-legacy"]="true";
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager.resource-base-url-pattern"]="\"(?:(?:/s/.*?/_)?/download)\"";
WRM._unparsedData["com.atlassian.confluence.plugins.confluence-license-banner:confluence-license-banner-resources.license-details"]="{\"daysBeforeLicenseExpiry\":0,\"daysBeforeMaintenanceExpiry\":0,\"showLicenseExpiryBanner\":false,\"showMaintenanceExpiryBanner\":false,\"renewUrl\":null,\"salesEmail\":null}";
WRM._unparsedData["com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin:discovery-javascript-data.link-active"]="{\"linkActive\":false,\"conditionsMet\":true,\"admin\":false}";
WRM._unparsedData["com.atlassian.plugins.atlassian-nps-plugin:nps-acknowledgement-resources.analytics-enabled-data-provider"]="\"false\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-nps-plugin:nps-acknowledgement-resources.sen-data-provider"]="\"SEN-2255945\"";
WRM._unparsedData["com.atlassian.confluence.plugins.confluence-feature-discovery-plugin:confluence-feature-discovery-plugin-resources.test-mode"]="false";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api.feature-data-provider"]="true";
</script>
<link type="text/css" rel="stylesheet" href="../../s/1b9968ac17721e3a6947d14e3a43c3f8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch9c16.css?build-number=5983" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/fcf875d0c4710a8c828036f5c6fb7fa5-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/b8d35340d2d85de2791f14a4692ecf7b/_/download/contextbatch/css/atl.confluence.plugins.pagetree-desktop%2cmain%2cvi/batchd6a4.css?highlightactions=true&amp;flavour=VANILLA&amp;locale=en-GB" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/6c0981174e94142364564819dc0d1413-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/b8d35340d2d85de2791f14a4692ecf7b/_/download/contextbatch/css/atl.confluence.plugins.pagetree-desktop,main,viewcontent,atl.general,page,atl.comments/batch.css?conditionalComment=lt+IE+9&amp;locale=en-GB" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/7893b9affdc3bf828ad93d0610d3d5f3-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/b8d35340d2d85de2791f14a4692ecf7b/_/download/contextbatch/css/atl.confluence.plugins.pagetree-desktop,main,viewcontent,atl.general,page,atl.comments/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/3a21f7b21af4c67045d1e0255f2ac570/_/download/contextbatch/css/theme.doc/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/3.7.2/_/download/batch/confluence.extra.information_information-plugin/confluence.extra.information_information-plugin-adg-styles.cc" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/2.8.6/_/download/batch/org.randombits.confluence.toc_toc-plugin-styles/org.randombits.confluence.toc_toc-plugin-styles.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/2.1.7/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plug/com.atlassian.confluence.ext.newcode-macro-plugin_syntaxhighl" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/2.1.7/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plug/com.atlassian.confluence.ext.newcode-macro-plugin_sh-theme-ec" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/51/_/styles/colorsb538.css?spaceKey=EZP" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/51/_/styles/customb538.css?spaceKey=EZP" media="all">
<script type="text/javascript" src="../../s/1f7b22082ef39a4bb134622dae929bdc-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/js/batch32f4.js?atlassian.aui.raphael.disabled=true&amp;locale=en-GB&amp;build-number=5983" ></script>
<script type="text/javascript" src="../../s/aa56759c03dcb293b394c4b46058625c-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/b8d35340d2d85de2791f14a4692ecf7b/_/download/contextbatch/js/atl.confluence.plugins.pagetree-desktop%2cmain%2cvi/batcha41c.js?highlightactions=true&amp;flavour=VANILLA&amp;locale=en-GB&amp;anonymous-access-enabled=true&amp;is-server-instance=true&amp;hostenabled=true" ></script>
<script type="text/javascript" src="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/2.8.6/_/download/batch/org.randombits.confluence.toc_client-side-toc-r/org.randombits.confluence.toc_client-side-toc-resources.cf.de" ></script>
<script type="text/javascript" src="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/2.8.6/_/download/batch/org.randombits.confluence.toc_toc-plugin-analytics/org.randombits.confluence.toc_toc-plugin-analytics.js" ></script>
<script type="text/javascript" src="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/2.1.7/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plug/com.atlassian.confluence.ext-2.newcode-macro-plugin_syntaxhighl" ></script>
<script type="text/javascript" src="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/2.1.7/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plug/com.atlassian.confluence.ext-3.newcode-macro-plugin_syntaxhighl" ></script>
<script type="text/javascript" src="../../s/6c0981174e94142364564819dc0d1413-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/2.1.7/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plug/com.atlassian.confluence.ext.newcode-macro-plugin_syntaxhighl?locale=en-GB" ></script>


        
            <meta name="stp-license-product-name" content="Confluence"/> <meta name="stp-license-days-to-expiry" content="807"/> <meta name="stp-license-is-admin" content="false"/> <meta name="stp-license-should-keep-banner-hidden" content="true"/>
    

        
        <meta name="ajs-site-title" content="eZ Documentation" />

    
    

    
                <link rel="canonical" href="Persistence%2bcache%2bconfiguration.html">
        <link rel="shortlink" href="Persistence%2bcache%2bconfiguration.html">
    <meta name="wikilink" content="[EZP:Persistence cache configuration]">
    <meta name="page-version" content="37">

</head>

<body             onload="placeFocus()"
     id="com-atlassian-confluence" class="theme-documentation  aui-theme-default aui-layout">

        
            <div id='stp-licenseStatus-banner'></div>
    <div id="full-height-container">
    <div id="header-precursor">
        
                    </div>






<header id="header" role="banner">
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation"><div class="aui-header-inner"><div class="aui-header-before"><a class=" aui-dropdown2-trigger app-switcher-trigger" aria-owns="app-switcher" aria-controls="app-switcher" aria-haspopup="true" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a><div id="app-switcher" class="aui-dropdown2 aui-style-default"><div class="app-switcher-loading">Loading&hellip;</div></div><script>
            (function (NL) {
                var initialise = function () {
                    // For some milestones of AUI, the atlassian soy namespace was renamed to aui. Handle that here by ensuring that window.atlassian is defined.
                    window.atlassian = window.atlassian || window.aui;
                    new NL.AppSwitcher({
                        dropdownContents: '#app-switcher'
                    });
                };
                if (NL.AppSwitcher) {
                    initialise();
                } else {
                    NL.onInit = initialise;
                }
            }(window.NL = (window.NL || {})));
            window.NL.isUserAdmin = false</script></div><div class="aui-header-primary"><h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="../../index.html"><img src="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/_/images/logo/atl.site.logo" alt="eZ Documentation" /></a></h1><ul class="aui-nav">
                            <li>
            
        
        
<a  id="space-directory-link" href="../../spacedirectory/view.html"  class=" aui-nav-imagelink"   title="Spaces">
            <span>Spaces</span>
    </a>
        </li>
                            <li id="browseMenu" role="menu">
            
    
        <a id="browse-menu-link" class="aui-nav-link aui-dropdown2-trigger" href="#" aria-haspopup="true" aria-owns="browse-menu-link-content" title="Browse">
        <span class="browse">Browse</span>
    </a>
    <nav id="browse-menu-link-content" class="aui-dropdown2 aui-style-default" aria-hidden="true">
                    <div class="aui-dropdown2-section">
                                <ul  id="browse-menu-link-leading" class="aui-list-truncate section-leading first">
                                            <li>
    
            
<a  id="space-pages-link" href="../../pages/listpages-dirview4915.html?key=EZP" class="    "      title="Browse pages in the Exponential 5.x space" >
        Pages
</a>
</li>
                                            <li>
    
            
<a  id="space-blogposts-link" href="../../pages/viewrecentblogposts4915.html?key=EZP" class="    "      title="Browse blogs in the Exponential 5.x space" >
        Blog
</a>
</li>
                                            <li>
    
            
<a  id="space-labels-link" href="../../labels/listlabels-heatmap4915.html?key=EZP" class="    "      title="Browse labels in the Exponential 5.x space" >
        Labels
</a>
</li>
                                            <li>
    
            
<a  id="space-advanced-link" href="../../spaces/viewspacesummary4915.html?key=EZP" class="    "      title="Browse additional space functions in the Exponential 5.x space" >
        Space Operations
</a>
</li>
                                    </ul>
            </div>
            </nav>
    
        </li>
        </ul>
</div><div class="aui-header-secondary"><ul class="aui-nav">
            <li>
        
    
            
<a  id="doctheme-anchor" href="#"  class=" aui-nav-imagelink"   title="">
            <span></span>
    </a>
    </li>
                    <li>
        <form id="quick-search" class="aui-quicksearch dont-default-focus header-quicksearch" action="https://doc.ez.no/dosearchsite.action" method="get"><fieldset><input type="hidden" name="where" value="EZP"/><input type="hidden" name="spaceSearch" value="true"/><label for="quick-search-query" class="assistive">Quick Search</label><input id="quick-search-query" class="text app-search search quick-search-query" type="text" accessKey="q" autocomplete="off" name="queryString" title="Quick Search" placeholder="Search space" /><input id="quick-search-submit" class="quick-search-submit" type="submit" value="Search"/><div class="aui-dd-parent quick-nav-drop-down"></div></fieldset></form>
    </li>
        <li>
            
        <a id="help-menu-link" class="aui-nav-link aui-dropdown2-trigger" href="#" aria-haspopup="true" aria-owns="help-menu-link-content" title="Help">
        <span class="aui-icon aui-icon-small aui-iconfont-help">Help</span>
    </a>
    <nav id="help-menu-link-content" class="aui-dropdown2 aui-style-default" aria-hidden="true">
                    <div class="aui-dropdown2-section">
                                <ul  id="help-menu-link-leading" class="aui-list-truncate section-leading first">
                                            <li>
        
            
<a  id="confluence-help-link" href="https://docs.atlassian.com/confluence/docs-58/Getting+Help+And+Support" class="    "      title="Visit the Confluence documentation home"  target="_blank"
>
        Online Help
</a>
</li>
                                            <li>
    
                
<a  id="keyboard-shortcuts-link" href="#" class="    "      title="View available keyboard shortcuts" >
        Keyboard Shortcuts
</a>
</li>
                                            <li>
    
            
<a  id="feed-builder-link" href="../../dashboard/configurerssfeed.html" class="    "      title="Create your custom RSS feed." >
        Feed Builder
</a>
</li>
                                            <li>
    
            
<a  id="whats-new-menu-link" href="https://docs.atlassian.com/confluence/docs-58/whatsnew/iframe" class="    "      title="" >
        What’s new
</a>
</li>
                                            <li>
    
                
<a  id="gadget-directory-link" href="#" class="   user-item administration-link "      title="Browse gadgets provided by Confluence" >
        Available Gadgets
</a>
</li>
                                            <li>
    
            
<a  id="confluence-about-link" href="../../aboutconfluencepage.html" class="    "      title="Get more information about Confluence" >
        About Confluence
</a>
</li>
                                    </ul>
            </div>
            </nav>
    
    </li>
        <li>
                
    
    </li>
        <li>
            
    </li>
        <li>
                                            <li>
        
            
<a  id="login-link" href="../../login3488.html?os_destination=%2Fdisplay%2FEZP%2FPersistence%2Bcache%2Bconfiguration%3FfocusedCommentId%3D21299457" class="   user-item login-link "      title="" >
        Log in
</a>
</li>
                        
    </li>
    </ul>
</div></div><!-- .aui-header-inner--></nav><!-- .aui-header -->
    <br class="clear">
</header>

    <div id="splitter">
    <div id="splitter-sidebar"  class="padding-div" >
        
        <p>&nbsp;<br/>
<strong>Global navigation</strong></p>

<p>&nbsp;<font color="#999">&bull;</font>&nbsp; <a href="../MAIN/eZ%2bDocumentation%2bCenter.html">Documentation Center</a><br/>
&nbsp;<font color="#999">&bull;</font>&nbsp; <a href="../TECHDOC/eZ%2bTechnical%2bManual.html">eZ Studio &amp; eZ Platform</a><br/>
&nbsp; &nbsp;<font color="#999">&bull;</font>&nbsp; <a href="../USERGUIDE/eZ%2bUser%2bManual.html">User Manual</a><br/>
&nbsp; &nbsp;<font color="#999">&bull;</font>&nbsp; <a href="../TECHDOC/eZ%2bTechnical%2bManual.html">Technical Manual</a><br/>
&nbsp; &nbsp;<font color="#999">&bull;</font>&nbsp; <a href="../MAIN/Glossary.html" title="Glossary">Glossary</a><br/>
&nbsp;<font color="#999">&bull;</font>&nbsp; <a href="../../Exponential/index.html" class="external-link" rel="nofollow">Exponential 4.x / legacy</a></p>



<p>&nbsp;<br/>
<a href="eZ%2bPublish%2b5.html"><strong>Exponential (5.x)</strong></a></p>
    

                    
    


<div class="plugin_pagetree">

        
        
    <ul class="plugin_pagetree_children_list plugin_pagetree_children_list_noleftspace">
        <div class="plugin_pagetree_children">
        </div>
    </ul>

    <fieldset class="hidden">
        <input type="hidden" name="treeId" value="">
        <input type="hidden" name="treeRequestId" value="/plugins/pagetree/naturalchildren.action?decorator=none&amp;excerpt=false&amp;sort=position&amp;reverse=false&amp;disableLinks=false&amp;expandCurrent=false">
        <input type="hidden" name="treePageId" value="12781293">

        <input type="hidden" name="noRoot" value="false">
        <input type="hidden" name="rootPageId" value="1114149">

        <input type="hidden" name="rootPage" value="">
        <input type="hidden" name="startDepth" value="0">
        <input type="hidden" name="spaceKey" value="EZP" >

        <input type="hidden" name="i18n-pagetree.loading" value="Loading...">
        <input type="hidden" name="i18n-pagetree.error.permission" value="Unable to load page tree. It seems that you do not have permission to view the root page.">
        <input type="hidden" name="i18n-pagetree.eeror.general" value="There was a problem retrieving the page tree. Please check the server log file for more information.">
        <input type="hidden" name="loginUrl" value="/login.action?os_destination=%2Fpages%2Fviewpage.action%3FspaceKey%3DEZP%26title%3DPersistence%2Bcache%2Bconfiguration%26focusedCommentId%3D21299457">
        <input type="hidden" name="mobile" value="false">

                <fieldset class="hidden">
                                                <input type="hidden" name="ancestorId" value="2720538">
                                    <input type="hidden" name="ancestorId" value="2719826">
                                    <input type="hidden" name="ancestorId" value="12781009">
                                    <input type="hidden" name="ancestorId" value="6291674">
                                    <input type="hidden" name="ancestorId" value="1114149">
                                    </fieldset>
    </fieldset>
</div>



            </div>
    <div id="splitter-content">

                    <script type="text/javascript" src="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5.8.5/_/download/resources/com.atlassian.confluence.plugins.doctheme_resources/doc-theme.js"></script>
    
                        
        <div id="theme-header">
            <div class="sectionColumnWrapper"><div class="sectionMacro">
<div class="sectionMacroRow"><div class="columnMacro"></div>
<div class="columnMacro">
<div class="panel" style="background-color: #F0F0F0;border-color: #999999;border-style: solid;border-width: 1px;"><div class="panelContent" style="background-color: #F0F0F0;">
<p><strong>Exponential 5.x</strong> | For <em>eZ Platform</em> &amp; <em>eZ Studio</em> topics see <a href="../DEVELOPER/Documentation.html">Technical manual</a> and <a href="../USER.html">User manual</a>, for <em>Exponential 4.x</em> and <em>Legacy</em> topics see <a href="../../Exponential/index.html" class="external-link" rel="nofollow">Exponential legacy</a></p>
</div></div></div><div class="columnMacro"></div></div></div></div>
        </div>
    
            
<div id="main"  class="aui-page-panel" >
    <div id="main-header">
        
        
    <div id="navigation" class="content-navigation view">
                    <ul class="ajs-menu-bar">
                                                        
                    
        <li class="normal ajs-menu-item">
        <a id="action-menu-link" class="action aui-dropdown2-trigger-arrowless aui-button aui-button-subtle ajs-menu-title aui-dropdown2-trigger" href="#" aria-haspopup="true" aria-owns="action-menu" data-container="#navigation">
            <span>
                                    <span class="aui-icon aui-icon-small aui-iconfont-more"></span>
                                
            </span>
        </a>         <div id="action-menu" class="aui-dropdown2 aui-style-default">
                            <ul  id="action-menu-primary"                     class="section-primary first aui-dropdown2-section">
                                            <li>

    
        
                                            
    
    
    <a  id="view-attachments-link" href="../../pages/viewpageattachments393f.html?pageId=12781293" rel="nofollow" class="action-view-attachments"  accessKey="t"  title="View Attachments">
                <span>
                        A<u>t</u>tachments (0)
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="action-view-history-link" href="../../pages/viewpreviousversions393f.html?pageId=12781293" rel="nofollow" class="action-view-history"   title="">
                <span>
                        Page History
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="action-page-permissions-link" href="../../pages/viewinfo393f.html?pageId=12781293" rel="nofollow" class="action-page-permissions"   title="Edit restrictions">
                <span>
                        Restrictions
        </span>    </a>
</li>
                                </ul>
                            <ul  id="action-menu-secondary"                     class="section-secondary aui-dropdown2-section">
                                            <li>

    
        
                                            
    
    
    <a  id="view-page-info-link" href="../../pages/viewinfo393f.html?pageId=12781293" rel="nofollow" class="action-view-info"   title="">
                <span>
                        Page Information
        </span>    </a>
</li>
                                        <li>

    
            
                                            
    
    
    <a  id="view-resolved-comments" href="#" rel="nofollow" class=""   title="">
                <span>
                        Resolved comments
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="link-to-page-link" href="../../pages/viewinfo393f.html?pageId=12781293" rel="nofollow" class=""   title="Link to this Page">
                <span>
                        Link to this Page…
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="view-in-hierarchy-link" href="../../pages/listpages-dirviewec29.html?key=EZP&amp;openId=12781293#selectedPageInHierarchy" rel="nofollow" class=""   title="">
                <span>
                        View in Hierarchy
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="action-view-source-link" href="../../plugins/viewsource/viewpagesrc393f.html?pageId=12781293" rel="nofollow" class="action-view-source popup-link"   title="">
                <span>
                        View Source
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="action-export-pdf-link" href="../../download/temp/pdfexport-20170131-310117-0903-3135/EZP-Persistencecacheconfiguration-310117-0903-3136f1f7.pdf?pageId=12781293" rel="nofollow" class=""   title="">
                <span>
                        Export to PDF
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="action-export-word-link" href="../../exportword393f?pageId=12781293" rel="nofollow" class="action-export-word"   title="">
                <span>
                        Export to Word
        </span>    </a>
</li>
                                </ul>
                    </div>
    </li>
            </ul>
    </div>

        
                <div id="title-heading" class="pagetitle with-breadcrumbs">
        
                            <div class="space-logo " data-key="EZP" data-name="Exponential 5.x" data-entity-type="confluence.space">
            <a><img class="logo space custom" src="../../download/attachments/1736738/EZPc728?version=5&amp;modificationDate=1434758205000&amp;api=v2" alt=""></a>
        </div>            
                            <div id="breadcrumb-section">
                    
    
    
    <ol id="breadcrumbs">
                                        
                        
        <li class="first" >
                        
                            <span class=""><a href="eZ%2bPublish%2b5.html">Exponential 5.x</a></span>
                                                                                            <li id="ellipsis" title="Show all breadcrumbs"><span><strong>&#8230;</strong></span></li>
                                                
                        
        <li class="hidden-crumb" >
                        
                            <span class=""><a href="eZ%2bPublish%2b5.html">Exponential 5.x Developer Documentation</a></span>
                                                                                    
                        
        <li class="hidden-crumb" >
                        
                            <span class=""><a href="../../pages/viewpage6ff2.html?pageId=6291674">Development &amp; Administration Guides</a></span>
                                                                                    
                        
        <li class="hidden-crumb" >
                        
                            <span class=""><a href="Features.html">Features</a></span>
                                                                                    
                        
        <li class="hidden-crumb" >
                        
                            <span class=""><a href="MVC%2band%2bApplication.html">MVC and Application</a></span>
                                                                    
                        
        <li>
                        
                            <span class=""><a href="Configuration.html">Configuration</a></span>
                                                    </ol>


                </div>
            
            <h1 id="title-text" class="with-breadcrumbs">
                                        <a href="Persistence%2bcache%2bconfiguration.html">Persistence cache configuration</a>
                            </h1>
        </div>
    </div>

    

    
    
    
    
    

        




        




    

    

    







    
    
        
    
    
                    
    

    


<div id="content" class="page view">
    


<div id="action-messages">
                        </div>



        <script type="text/x-template" title="searchResultsGrid">
    <table class="aui">
        <thead>
            <tr class="header">
                <th class="search-result-title">Page Title</th>
                <th class="search-result-space">Space</th>
                <th class="search-result-date">Updated</th>
            </tr>
        </thead>
    </table>
</script>
<script type="text/x-template" title="searchResultsGridCount">
    <p class="search-result-count">{0}</p>
</script>
<script type="text/x-template" title="searchResultsGridRow">
    <tr class="search-result">
        <td class="search-result-title"><a href="{1}" class="content-type-{2}"><span>{0}</span></a></td>
        <td class="search-result-space"><a class="space" href="/display/{4}/" title="{3}">{3}</a></td>
        <td class="search-result-date"><span class="date" title="{6}">{5}</span></td>
    </tr>
</script>
        
    
    
        <fieldset class="hidden parameters">
            <input type="hidden" title="parentPageId" value="2720538">
        </fieldset>

                            
    

                    

        
        <a href="#page-metadata-end" class="assistive">Skip to end of metadata</a>
<div id="page-metadata-start" class="assistive"></div>

    <div class="page-metadata">
        <ul>
                            <li class="page-metadata-item noprint">

    
            
                                            
    
    
    <a  id="content-metadata-page-restrictions" href="#" rel="nofollow" class="hidden"   title="Restrictions apply">
                    <img alt="" src="../../download/resources/com.atlassian.confluence.plugins.confluence-page-banner_page-banner-resources/images/red_padlock.png" height="16" width="16" title="">
                <span>
                        
        </span>    </a>
</li>
                        <li class="page-metadata-modification-info">
                
        
    
        
    
        
            
            Created by <span class='author'>     <a href="../../login2ee6.html"
                       class="url fn"
                            >André Rømcke</a></span>, last modified on <a class='last-modified' title='Show changes' href='../../pages/diffpagesbyversion22f5-2.html?pageId=12781293&amp;selectedPageVersions=36&amp;selectedPageVersions=37'>Jun 27, 2016</a>
                </li>
        </ul>
    </div>


<a href="#page-metadata-start" class="assistive">Go to start of metadata</a>
<div id="page-metadata-end" class="assistive"></div>

        
        <fieldset class="hidden parameters">
                        <input type="hidden" title="browsePageTreeMode" value="view">
        </fieldset>

        <div id="main-content" class="wiki-content">
                           
        <p><br /><div class="toc-macro client-side-toc-macro " data-headerelements="H1,H2,H3,H4,H5,H6,H7"></div></p><h1 id="Persistencecacheconfiguration-Introduction">Introduction</h1><p><strong>Tech Note</strong></p><p>Current implementation uses a caching library called <a href="http://stash.tedivm.com/" class="external-link" rel="nofollow">Stash</a> (, via <a href="https://github.com/tedivm/TedivmStashBundle" class="external-link" rel="nofollow">Stash-bundle</a>). <span style="font-size: 10.0pt;line-height: 13.0pt;">Stash supports the following cache backends: </span><strong style="font-size: 10.0pt;line-height: 13.0pt;">FileSystem</strong><span style="font-size: 10.0pt;line-height: 13.0pt;">, </span><strong style="font-size: 10.0pt;line-height: 13.0pt;">Memcache</strong><span style="font-size: 10.0pt;line-height: 13.0pt;">, </span><strong style="font-size: 10.0pt;line-height: 13.0pt;">APC</strong><span style="font-size: 10.0pt;line-height: 13.0pt;">, </span><strong style="font-size: 10.0pt;line-height: 13.0pt;">Sqlite</strong><strong style="font-size: 10.0pt;line-height: 13.0pt;">, Redis </strong><span style="font-size: 10.0pt;line-height: 13.0pt;">and </span><strong style="font-size: 10.0pt;line-height: 13.0pt;">BlackHole.</strong></p><p><em>Use of Memcached (or experimentally using Redis) is a requirement for use in Clustering setup, for overview of clustering feature see <a href="Clustering.html">Clustering</a>. </em></p><p><span style="font-size: 10.0pt;line-height: 13.0pt;">If Exponential Platform changes to another cache system, configuration will change in the future, changes to configuration in StashBundle is listed here:</span></p><div class="confluence-information-macro confluence-information-macro-note"><p class="title">Configuration change in 5.4/2014.07</p><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>StashBundle version bundled with 5.4/2014.07 and higher refers to cache backends as <em>&quot;drivers&quot;</em> where it was previously referred to as <em>&quot;handlers&quot;</em> in yml configuration</p></div></div><p><strong>Cache service</strong></p><p>The cache system is exposed as a &quot;cache&quot; service, and can be reused by any other service as described on the <a href="Persistence%2bcache.html">Persistence&nbsp;cache</a> page.</p><h1 id="Persistencecacheconfiguration-Configuration">Configuration</h1><p>During Setup wizard and manually using <code>exponential:configure</code> console command a default configuration is generated currently <strong>using FileSystem</strong>, using <code>%kernel.cache_dir%/stash</code> to store cache files.</p><p>The configuration is placed in exponential/config/exponential.yml, and looks like:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Default exponential.yml</b></div><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[stash:
    caches:
        default:
            # For Exponential Platform versions prior to 5.4/2014.07, use &quot;handlers&quot; instead of &quot;drivers&quot;!
            drivers:
                - FileSystem
            inMemory: false
            registerDoctrineAdapter: false]]></script>
</div></div><p>The default settings used during setup wizard as found in <code>exponential/config/exponential_setup.yml</code>:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>exponential_setup.yml</b></div><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[stash:
    caches:
        default:
            # For Exponential Platform versions prior to 5.4/2014.07, use &quot;handlers&quot; instead of &quot;drivers&quot;!
            drivers:
                - BlackHole
            inMemory: true
            registerDoctrineAdapter: false]]></script>
</div></div><p>This setting works across all installs and just caches objects within the same request thanks to the <code>inMemory: true</code> setting.</p><p>If you want to change to another cache backend, see in <em>Stash backend configuration</em> below for what kind of settings you have available.</p><div class="confluence-information-macro confluence-information-macro-note"><p class="title">Note for &quot;inMemory&quot; cache with long running scripts</p><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Use of <code>inMemory</code> caching with BlackHole or any other cache backend should not be used for long running scripts as it will over time return stale data, inMemory cache is not shared across requests/processes, so invalidation does not happen!</p></div></div><h3 id="Persistencecacheconfiguration-Multirepositorysetup">Multi repository setup</h3><p>New in 5.2 is the possibility to select a specific Stash cache pool on a siteaccess or sitegroup level, the following example shows use in a sitegroup:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>exponential.yml site group setting</b></div><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[        ezdemo_group:
            cache_pool_name: &quot;default&quot;
            database:
                ...

]]></script>
</div></div><p>The &quot;default&quot; here refers to the name of the cache pool as specified in the <em>stash</em> configuration block shown above, if your install has several repositories (databases), then make sure every group of sites using different repositories also uses a different cache pool to avoid unwanted effects.<br />NB: We plan to make this more native in the future, so this setting will someday not be needed.</p><h1 id="Persistencecacheconfiguration-Stashcachebackendconfiguration">Stash cache backend configuration</h1><h3 id="Persistencecacheconfiguration-Generalsettings">General settings</h3><p>To check which cache settings are available for your installation, run the following command in your terminal :</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: bash; gutter: false; theme: Eclipse"><![CDATA[php exponential/console config:dump-reference stash]]></script>
</div></div><h3 id="Persistencecacheconfiguration-FileSystem"><span>FileSystem</span></h3><p>This cache backend is using local filesystem, by default the Symfony cache folder, as this is per server, it <strong>does not support multi server (<a href="Clustering.html">cluster</a>) setups</strong>!</p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><strong>We strongly discourage you from storing cache files on NFS</strong>, as it defeats the purpose of the cache: speed</div></div><h4 id="Persistencecacheconfiguration-Availablesettings"><strong><span style="color: rgb(51,51,51);font-size: 10.0pt;line-height: 13.0pt;">Available settings</span></strong></h4><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><pre>path</pre></td><td class="confluenceTd">The path where the cache is placed, default is <code>%kernel.cache_dir%/stash</code>, effectively <code>exponential/cache/&lt;env&gt;/stash</code></td></tr><tr><td colspan="1" class="confluenceTd"><pre>dirSplit</pre></td><td colspan="1" class="confluenceTd">Number of times the cache key should be split up to avoid having to many files in each folder, default is 2.</td></tr><tr><td colspan="1" class="confluenceTd"><pre>filePermissions</pre></td><td colspan="1" class="confluenceTd">The permissions of the cache file, default is 0660.</td></tr><tr><td colspan="1" class="confluenceTd"><pre>dirPermissions</pre></td><td colspan="1" class="confluenceTd">The permission of the cache file directories (see dirSplit), default is 0770.</td></tr><tr><td colspan="1" class="confluenceTd"><pre>memKeyLimit</pre></td><td colspan="1" class="confluenceTd"><p>Limit on how many key to path entries are kept in memory during execution at a time to avoid having to recalculate the path on key lookups, default 200.</p></td></tr><tr><td colspan="1" class="confluenceTd"><pre>keyHashFunction</pre></td><td colspan="1" class="confluenceTd">Algorithm used for creating paths, default md5. Use crc32 on Windows to avoid path length issues.<code><code><br /></code></code></td></tr></tbody></table></div><div class="confluence-information-macro confluence-information-macro-information"><p class="title">Issues with Microsoft Windows</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>If you are using a Windows OS, you may encounter an issue regarding<strong> long paths for cache directory name</strong>. The paths are long because Stash uses md5 to generate unique key that are sanitized really quickly.</p><p>Solution is to <strong>change the hash algorithm</strong> used by Stash.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Specifying key hash function</b></div><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[stash:
    caches:
        default:
            # For Exponential Platform versions prior to 5.4/2014.07, use &quot;handlers&quot; instead of &quot;drivers&quot;!
            drivers:
                - FileSystem
            inMemory: true
            registerDoctrineAdapter: false
            FileSystem:
                keyHashFunction: &#39;crc32&#39;]]></script>
</div></div><p><strong>This configuration is only recommended for Windows users</strong>.<br /><br />Note: You can also define the<strong> path</strong> where you want the cache files to be generated to be able to get even shorter system path for cache files.</p></div></div><p> </p><h4 id="Persistencecacheconfiguration-FileSystemcachebackendtroubleshooting">FileSystem cache backend troubleshooting</h4><p>By default, Stash Filesystem cache backend stores cache to a sub-folder named after the environment (<code>i.e. exponential/cache/dev</code>, <code>exponential/cache/prod</code>). This can lead to the following issue : if different environments are used for operations, persistence cache (manipulating content, mostly) will be affected and cache can become inconsistent.</p><p>To prevent this, there are 2 solutions :</p><ol><li><h6 id="Persistencecacheconfiguration-Manual"><a name="manual" rel="nofollow"></a>Manual</h6><p><strong>Always</strong> use the same environment, for web, command line, cronjobs...<br /><br /></p></li><li><h6 id="Persistencecacheconfiguration-SharestashcacheacrossSymfonyenvironments(prod/dev)">Share stash cache across Symfony environments (prod / dev)</h6></li></ol><p>Either by using another Stash cache backend, or by setting Stash to use a shared cache folder that does not depend on the environment. <br />In exponential.yml:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[stash:
    caches:
        default:
            FileSystem:
                path: &quot;%kernel.root_dir%/cache/common&quot;
]]></script>
</div></div><p>This will store stash cache to <code>exponential/cache/common.</code></p><h3 id="Persistencecacheconfiguration-APC">APC</h3><p>This cache backend is using shard memory using APC's user cache feature, as this is per server, it <strong>does not support multi server (<a href="Clustering.html">cluster</a>) setups</strong>.</p><div class="confluence-information-macro confluence-information-macro-note"><p class="title">Limitation</p><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>As APC user cache is not shared between processes, it is not possible to clear the user cache from CLI, even if you set <span style="color: rgb(0,0,0);"><code>apc.enable_cli</code> to On</span>. Hence publishing content from a command line script won't let you properly clear SPI Persistence cache.</p></div></div><p>Please also note that the default value for <code>apc.shm_size</code> is 128MB. However, 256MB is recommended for APC to work properly. For more details please refer to the <a href="http://www.php.net/manual/en/apc.configuration.php#ini.apc.shm-size" class="external-link" rel="nofollow">APC configuration manual</a>.</p><p> </p><p><strong>Available settings</strong></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><code><strong>ttl</strong></code></td><td class="confluenceTd">The time to live of the cache in seconds, default set to 500 (8.3 minutes)</td></tr><tr><td colspan="1" class="confluenceTd"><code><strong>namespace</strong></code></td><td colspan="1" class="confluenceTd">A namespace to prefix cache keys with to avoid key conflicts with other Exponential sites on same Exponential installation, default is <code>null</code>.</td></tr></tbody></table></div><h3 id="Persistencecacheconfiguration-Memcache">Memcache</h3><p>This cache backend is using <a href="http://memcached.org/" class="external-link" rel="nofollow">Memcached, a distributed caching solution</a>, this is the only supported cache solution for multi server (<a href="Clustering.html">cluster</a>) setups!</p><div class="confluence-information-macro confluence-information-macro-information"><p class="title">Note</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Stash supports both the <a href="http://php.net/memcache" class="external-link" rel="nofollow">php-memcache</a> and <a href="http://php.net/memcached" class="external-link" rel="nofollow">php-memcached</a> extensions. <strong>However</strong> only php-memcache is officially tested on Redhat/Centos while php-memcache<u>d</u> is on Debian and Ubuntu. If you have both extensions installed, Stash will automatically choose php-memcache<u>d</u>.</p></div></div><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td colspan="1" class="confluenceTd"><code><strong>servers</strong></code></td><td colspan="1" class="confluenceTd"><p>Array of Memcached servers, with host/IP, port and weight</p><p><code><strong>server</strong></code>: Host or IP of your Memcached server<br /><code><strong>port</strong></code>: Port where Memcached is listening to (defaults to 11211)<br /><code><strong>weight</strong></code>: Weight of the server, when using several Memcached servers</p></td></tr><tr><td colspan="1" class="confluenceTd"><code><strong>prefix_key</strong></code></td><td colspan="1" class="confluenceTd"><span>A namespace to prefix cache keys with to avoid key conflicts with other Exponential sites on same Exponential installation (default is an empty string). </span><br /><span>Must be the same on all server with the same installation.<span> </span><a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-prefix-key" class="external-link" rel="nofollow">See Memcached prefix_key option</a><span>. <span style="color: rgb(128,128,0);">✲</span></span></span></td></tr><tr><td colspan="1" class="confluenceTd"><code><strong>compression</strong></code></td><td colspan="1" class="confluenceTd">default true. <a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-compression" class="external-link" rel="nofollow">See Memcached compression option</a>. <span style="color: rgb(128,128,0);">✲</span></td></tr><tr><td colspan="1" class="confluenceTd"><code><strong>libketama_compatible</strong></code></td><td colspan="1" class="confluenceTd">default false.<span> </span><a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-libketama-compatible" class="external-link" rel="nofollow">See Memcached libketama_compatible option</a> <span style="color: rgb(128,128,0);">✲</span></td></tr><tr><td colspan="1" class="confluenceTd"><code><strong>buffer_writes</strong></code></td><td colspan="1" class="confluenceTd">default false.<span> </span><a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-buffer-writes" class="external-link" rel="nofollow">See Memcached buffer_writes option</a><span> <span style="color: rgb(128,128,0);">✲</span></span></td></tr><tr><td colspan="1" class="confluenceTd"><code><strong>binary_protocol</strong></code></td><td colspan="1" class="confluenceTd">default false.<span> </span><a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-binary-protocol" class="external-link" rel="nofollow">See Memcached binary_protocol option</a><span> <span style="color: rgb(128,128,0);">✲</span></span></td></tr><tr><td colspan="1" class="confluenceTd"><code><strong>no_block</strong></code></td><td colspan="1" class="confluenceTd">default false.<span> </span><a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-no-block" class="external-link" rel="nofollow">See Memcached no_block option</a><span> <span style="color: rgb(128,128,0);">✲</span></span></td></tr><tr><td colspan="1" class="confluenceTd"><code><strong>tcp_nodelay</strong></code></td><td colspan="1" class="confluenceTd">default false.<span> </span><a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-tcp-nodelay" class="external-link" rel="nofollow">See Memcached tcp_nodelay option</a><span> <span style="color: rgb(128,128,0);">✲</span></span></td></tr><tr><td colspan="1" class="confluenceTd"><code><strong>connection_timeout</strong></code></td><td colspan="1" class="confluenceTd">default 1000.<span> </span><a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-connection-timeout" class="external-link" rel="nofollow">See Memcached connection_timeout option</a><span> <span style="color: rgb(128,128,0);">✲</span></span></td></tr><tr><td colspan="1" class="confluenceTd"><code><strong>retry_timeout</strong></code></td><td colspan="1" class="confluenceTd">default 0.<span> </span><a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-memcached-timeout" class="external-link" rel="nofollow">See Memcached retry_timeout option</a><span> <span style="color: rgb(128,128,0);">✲</span></span></td></tr><tr><td colspan="1" class="confluenceTd"><code><strong>send_timeout</strong></code></td><td colspan="1" class="confluenceTd">default 0.<span> </span><a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-send-timeout" class="external-link" rel="nofollow">See Memcached send_timeout option</a><span> <span style="color: rgb(128,128,0);">✲</span></span></td></tr><tr><td colspan="1" class="confluenceTd"><code><strong>recv_timeout</strong></code></td><td colspan="1" class="confluenceTd"><p>default 0.<span> </span><a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-recv-timeout" class="external-link" rel="nofollow">See Memcached recv_timeout option</a><span> <span style="color: rgb(128,128,0);">✲</span></span></p></td></tr><tr><td colspan="1" class="confluenceTd"><code><strong>poll_timeout</strong></code></td><td colspan="1" class="confluenceTd">default 1000.<span> </span><a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-poll-timeout" class="external-link" rel="nofollow">See Memcached poll_timeout option</a><span> <span style="color: rgb(128,128,0);">✲</span></span></td></tr><tr><td colspan="1" class="confluenceTd"><code><strong>cache_lookups</strong></code></td><td colspan="1" class="confluenceTd">default false.<span> </span><a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-cache-lookups" class="external-link" rel="nofollow">See Memcached cache_lookups option</a><span> <span style="color: rgb(128,128,0);">✲</span></span></td></tr><tr><td colspan="1" class="confluenceTd"><strong><code>server_failure_limit</code></strong></td><td colspan="1" class="confluenceTd">default 0.<span> </span><a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-server-failure-limit" class="external-link" rel="nofollow">See PHP Memcached documentation</a><span> <span style="color: rgb(128,128,0);">✲</span><br /></span></td></tr><tr><td colspan="1" class="confluenceTd"><strong><span style="color: rgb(34,34,34);"><code>socket_send_size </code><br /></span></strong></td><td colspan="1" class="confluenceTd">See <a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-socket-send-size" class="external-link" rel="nofollow">Memcached socket_send_size option</a>.<span style="color: rgb(128,128,0);"> ✲ ✸</span></td></tr><tr><td colspan="1" class="confluenceTd"><strong><code>socket_recv_size</code></strong></td><td colspan="1" class="confluenceTd">See <a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-socket-recv-size" class="external-link" rel="nofollow">Memcached socket_recv_size option</a>.<span style="color: rgb(128,128,0);"> ✲ ✸</span></td></tr><tr><td colspan="1" class="confluenceTd"><strong><code>serializer</code></strong></td><td colspan="1" class="confluenceTd">See <a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-serializer" class="external-link" rel="nofollow">Memcached serializer option</a>.<span style="color: rgb(128,128,0);"> ✲ ✸</span></td></tr><tr><td colspan="1" class="confluenceTd"><strong><code>hash</code></strong></td><td colspan="1" class="confluenceTd">See <a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-hash" class="external-link" rel="nofollow">Memcached hash option</a>.<span style="color: rgb(128,128,0);"> ✲ ✸</span></td></tr><tr><td colspan="1" class="confluenceTd"><strong><code>distribution</code></strong></td><td colspan="1" class="confluenceTd"><p>Specifies the method of distributing item keys to the servers. See<a href="http://www.php.net/manual/en/memcached.constants.php#memcached.constants.opt-distribution" class="external-link" rel="nofollow"> Memcached distribution option</a>.<span style="color: rgb(128,128,0);"> ✲ ✸</span></p></td></tr></tbody></table></div><p> </p><p><span style="color: rgb(128,128,0);"><span style="color: rgb(128,128,0);">✲ <span style="color: rgb(0,0,0);">All settings but <em>servers</em> are only available with memcache<u>d</u> php extension, for more information on these settings and which version of php-memcache<u>d</u> they are available in, see: <a href="http://php.net/Memcached" class="external-link" rel="nofollow">http://php.net/Memcached</a></span></span><br />✸</span> If you are on Exponential 5.1, make sure to update Stash and StashBundle to get access to these settings.</p><p> </p><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>When using Memcache cache backend, <strong>it's recommended to also use <code>inMemory</code> cache</strong> (see example below). <br />This will help reducing network traffic between your webserver and your Memcached server, unless you have very long running cli processes which then might end up acting on stale data.</p></div></div><h4 id="Persistencecacheconfiguration-ExamplewithMemcache">Example with Memcache</h4><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[stash:
    caches:
        default:
            # For Exponential Platform versions prior to 5.4/2014.07, use &quot;handlers&quot; instead of &quot;drivers&quot;!
            drivers: [ Memcache ]
            inMemory: true
            registerDoctrineAdapter: false
            Memcache:
                prefix_key: ezdemo_
                retry_timeout: 1
                servers:
                    -
                        server: 127.0.0.1
                        port: 11211]]></script>
</div></div><div class="confluence-information-macro confluence-information-macro-warning"><p class="title">Connection errors issue</p><span class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>If memcached does display connection errors when using the default (ascii) protocol, switching to binary protocol (in the stash configuration and memcached daemon) should resolve the issue.</p></div></div>

                
        
    
        </div>

        <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="https://doc.ez.no/display/EZP/Persistence+cache+configuration"
    dc:identifier="https://doc.ez.no/display/EZP/Persistence+cache+configuration"
    dc:title="Persistence cache configuration"
    trackback:ping="https://doc.ez.no/rpc/trackback/12781293"/>
</rdf:RDF>
-->

            
    



<div id="labels-section" class="pageSection group">
    <div class="labels-section-content content-column" entityid="12781293" entitytype="page">
	<div class="labels-content">
		
    <ul class="label-list label-list-right ">
                    
        <li class="aui-label " data-label-id="15630338"><a class="aui-label-split-main" href="../../label/EZP/cache.html" rel="tag">cache</a></li><li class="aui-label " data-label-id="20381715"><a class="aui-label-split-main" href="../../label/EZP/memcache.html" rel="tag">memcache</a></li><li class="aui-label " data-label-id="20381716"><a class="aui-label-split-main" href="../../label/EZP/apc.html" rel="tag">apc</a></li>
            </ul>

    </div>
</div>
</div>

            
            




            
    








                        
    
<div id="comments-section" class="pageSection group">
                <div class="section-header">
            <h2 id="comments-section-title" class="section-title">
                                    2 Comments
                            </h2>
        </div>
    
    

            <ol class="comment-threads top-level" id="page-comments">
                    <li id="comment-thread-21299457" class="comment-thread">
        <div class="comment  focused  " id="comment-21299457">
        <p class="comment-user-logo">
            <img class="userLogo logo anonymous" src="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/_/images/icons/profilepics/anonymous.png"
           alt="User icon: Plopix" title="Plopix">        </p>
        <div class="comment-header">
            <h4 class="author">    <a href="../../login36d8.html"
                       class="url fn"
                            >Sébastien Morel</a></h4>
        </div>
        <div class="comment-body">
            <div class="comment-content wiki-content">
                <p>Hi everybody,<br />When using Memcache in multi fronts installation, if the cache mechanism doesn't work after checking your Exponential configuration .<br />Be sure to use the php5-memcache<strong>d</strong> (with &quot;d&quot;)<br /> It will save you probably 1 or 2 hours of debug ! <img class="emoticon emoticon-wink" src="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/_/images/icons/emoticons/wink.png" data-emoticon-name="wink" alt="(wink)" /></p><p>++</p>
            </div>
            <div class="comment-actions">
                                                <ul class="comment-actions-secondary">
                                                              <li class="first comment-permalink"><a title="Permanent link to this comment" href="Persistence%2bcache%2bconfiguratione2a7.html?focusedCommentId=21299457#comment-21299457"
                 id="comment-permalink-21299457"                     ><span>Permalink</span></a></li>
            </ul>
                                    <ul class="comment-actions-primary">
                                                              <li class="first comment-date"><a title="Apr 04, 2014 14:52" href="Persistence%2bcache%2bconfiguratione2a7.html?focusedCommentId=21299457#comment-21299457"
                                    ><span>Apr 04, 2014</span></a></li>
            </ul>
                </div>
        </div>
    </div>

    <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="https://doc.ez.no/display/EZP/Persistence+cache+configuration?focusedCommentId=21299457#comment-21299457"
    dc:identifier="https://doc.ez.no/display/EZP/Persistence+cache+configuration?focusedCommentId=21299457#comment-21299457"
    dc:title="Persistence cache configuration"
    trackback:ping="https://doc.ez.no/rpc/trackback/21299457"/>
</rdf:RDF>
-->

    
</li>
                    <li id="comment-thread-25985079" class="comment-thread">
        <div class="comment  " id="comment-25985079">
        <p class="comment-user-logo">
            <img class="userLogo logo anonymous" src="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/_/images/icons/profilepics/anonymous.png"
           alt="User icon: xserna" title="xserna">        </p>
        <div class="comment-header">
            <h4 class="author">    <a href="../../login4103.html"
                       class="url fn"
                            >Xavier Serna</a></h4>
        </div>
        <div class="comment-body">
            <div class="comment-content wiki-content">
                <p>When using <code class="php plain">retry_timeout</code> option as in the example above you will get an exception like:</p><p>[Stash\Exception\RuntimeException]<br />Memcached option Memcached::OPT_RETRY_TIMEOUT not accepted by memcached extension.</p><p>At least on Ubuntu 14.04 LTS + php5_memcached 2.1.0-6build1 + memcached 1.4.14-0ubuntu9</p><p> </p>
            </div>
            <div class="comment-actions">
                                                <ul class="comment-actions-secondary">
                                                              <li class="first comment-permalink"><a title="Permanent link to this comment" href="Persistence%2bcache%2bconfigurationdbb9.html?focusedCommentId=25985079#comment-25985079"
                 id="comment-permalink-25985079"                     ><span>Permalink</span></a></li>
            </ul>
                                    <ul class="comment-actions-primary">
                                                              <li class="first comment-date"><a title="Oct 15, 2014 15:02" href="Persistence%2bcache%2bconfigurationdbb9.html?focusedCommentId=25985079#comment-25985079"
                                    ><span>Oct 15, 2014</span></a></li>
            </ul>
                </div>
        </div>
    </div>

    <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="https://doc.ez.no/display/EZP/Persistence+cache+configuration?focusedCommentId=25985079#comment-25985079"
    dc:identifier="https://doc.ez.no/display/EZP/Persistence+cache+configuration?focusedCommentId=25985079#comment-25985079"
    dc:title="Persistence cache configuration"
    trackback:ping="https://doc.ez.no/rpc/trackback/25985079"/>
</rdf:RDF>
-->

    
</li>
            </ol>


</div>


            
</div>


    




    
    

    
    
    








</div>
  
        <div id="theme-footer">
            <p>© 1999-2016 <a href="http://ez.no/" class="external-link" rel="nofollow">eZ Systems AS</a> and others</p>
        </div>
    
    </div>
</div>


        
            
            

<div id="footer" role="contentinfo">
    <section class="footer-body">

                                                            <p class="license license-opensource">
                    Powered by a free <b>Atlassian Confluence Open Source Project License</b> granted to Exponential. <a href="http://www.atlassian.com/c/conf/11461">Evaluate Confluence today</a>.<br>
                </p>
                    
        

        <ul id="poweredby">
            <li class="noprint">Powered by <a href="http://www.atlassian.com/software/confluence" class="hover-footer-link">Atlassian Confluence</a> <span id='footer-build-information'>5.8.5</span>, <a href="http://www.atlassian.com/software/confluence/overview/team-collaboration-software?utm_source=confluence-footer" class="hover-footer-link">Team Collaboration Software</a></li>
            <li class="print-only">Printed by Atlassian Confluence 5.8.5, Team Collaboration Software.</li>
            <li class="noprint"><a href="https://jira.atlassian.com/browse/CONF" class="hover-footer-link">Report a bug</a></li>
            <li class="noprint"><a href="http://www.atlassian.com/about/connected.jsp?s_kwcid=Confluence-stayintouch" class="hover-footer-link">Atlassian News</a></li>
        </ul>

        

        <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>

                    <script>
AJS.toInit(function(){
 if(AJS.params.spaceKey &&
    AJS.params.spaceKey === 'MAIN' ||
    AJS.params.spaceKey === 'EZMA' ||
    AJS.params.spaceKey === 'ODC' ||
    AJS.params.spaceKey === 'EZP50' ||
    AJS.params.spaceKey === 'EZP51' ||
    AJS.params.spaceKey === 'EZP52' ||
    AJS.params.spaceKey === 'EZPCLOUD' ||
    AJS.params.spaceKey === 'EZP' ||
    AJS.params.spaceKey === 'TECHDOC' ||
    AJS.params.spaceKey === 'USERGUIDE' ||
    AJS.params.spaceKey === 'EZRECO'
){

(function()
{var isSecure=('https:'==document.location.protocol);var ff=document.createElement('script');ff.type='text/javascript';ff.async=true;ff.src=(isSecure?'https':'http')+'://'+(isSecure?'secure.':'lb.')+'liveviewer.ez.no/statjs/sst-120-1304513615/stat.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(ff,s);}
)();

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-303624-13', 'ez.no');
  ga('send', 'pageview');
}}
);
</script>
        
    </section>
</div>

    </div>
</body>

<!-- Mirrored from doc.ez.no/display/EZP/Persistence+cache+configuration?focusedCommentId=21299457 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 10:07:13 GMT -->
</html>
