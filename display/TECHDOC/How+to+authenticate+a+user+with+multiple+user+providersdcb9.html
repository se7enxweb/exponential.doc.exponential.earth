<!DOCTYPE html>
<html>

<!-- Mirrored from doc.ez.no/display/TECHDOC/How+to+authenticate+a+user+with+multiple+user+providers?focusedCommentId=30711536 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 10:00:00 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <title>How to authenticate a user with multiple user providers - TECHDOC - eZ Documentation</title>

        

                        
    
                        
    
                        
    

    <meta http-equiv="X-UA-Compatible" content="IE=EDGE,chrome=IE7">
<meta charset="UTF-8">
<meta id="confluence-context-path" name="confluence-context-path" content="">
<meta id="confluence-base-url" name="confluence-base-url" content="../../index.html">

<meta id="atlassian-token" name="atlassian-token" content="9996d8127abd36d1b757536de859090f8b455d10">


<meta id="confluence-space-key" name="confluence-space-key" content="TECHDOC">
<script type="text/javascript">
        var contextPath = '';
</script>

    

    <meta name="confluence-request-time" content="1485852394605">
        
    
        
            <meta name="ajs-is-space-admin" content=""> <meta name="ajs-has-space-config" content="">
            <meta name="ajs-use-keyboard-shortcuts" content="true">
            <meta name="ajs-discovered-plugin-features" content="$discoveredList">
            <meta name="stp-license-product-name" content="Confluence"/> <meta name="stp-license-days-to-expiry" content="807"/> <meta name="stp-license-is-admin" content="false"/> <meta name="stp-license-should-keep-banner-hidden" content="true"/>
            <meta name="ajs-keyboardshortcut-hash" content="206314443b3cf79696d4ad89324a059c">
            <meta id="team-calendars-has-jira-link" content="true">
            <meta name="ajs-team-calendars-display-time-format" content="displayTimeFormat12">
            <meta id="team-calendars-user-timezone" content="UTC">
            <script type="text/x-template" id="team-calendars-messages" title="team-calendars-messages"><fieldset class="i18n hidden"><input type="hidden" name="calendar3.month.long.july" value="July"><input type="hidden" name="calendar3.day.short.wednesday" value="Wed"><input type="hidden" name="calendar3.day.short.thursday" value="Thu"><input type="hidden" name="calendar3.month.short.march" value="Mar"><input type="hidden" name="calendar3.month.long.april" value="April"><input type="hidden" name="calendar3.month.long.october" value="October"><input type="hidden" name="calendar3.month.long.august" value="August"><input type="hidden" name="calendar3.month.short.july" value="Jul"><input type="hidden" name="calendar3.month.short.may" value="May"><input type="hidden" name="calendar3.month.short.november" value="Nov"><input type="hidden" name="calendar3.day.long.friday" value="Friday"><input type="hidden" name="calendar3.day.long.sunday" value="Sunday"><input type="hidden" name="calendar3.day.long.saturday" value="Saturday"><input type="hidden" name="calendar3.month.short.april" value="Apr"><input type="hidden" name="calendar3.day.long.wednesday" value="Wednesday"><input type="hidden" name="calendar3.month.long.december" value="December"><input type="hidden" name="calendar3.month.short.october" value="Oct"><input type="hidden" name="calendar3.day.long.monday" value="Monday"><input type="hidden" name="calendar3.month.short.june" value="Jun"><input type="hidden" name="calendar3.day.short.monday" value="Mon"><input type="hidden" name="calendar3.day.short.tuesday" value="Tue"><input type="hidden" name="calendar3.day.short.saturday" value="Sat"><input type="hidden" name="calendar3.month.long.march" value="March"><input type="hidden" name="calendar3.month.long.june" value="June"><input type="hidden" name="calendar3.month.short.february" value="Feb"><input type="hidden" name="calendar3.month.short.august" value="Aug"><input type="hidden" name="calendar3.month.short.december" value="Dec"><input type="hidden" name="calendar3.day.short.sunday" value="Sun"><input type="hidden" name="calendar3.month.long.february" value="February"><input type="hidden" name="calendar3.day.long.tuesday" value="Tuesday"><input type="hidden" name="calendar3.month.long.may" value="May"><input type="hidden" name="calendar3.month.long.september" value="September"><input type="hidden" name="calendar3.month.long.november" value="November"><input type="hidden" name="calendar3.month.short.january" value="Jan"><input type="hidden" name="calendar3.month.short.september" value="Sep"><input type="hidden" name="calendar3.day.long.thursday" value="Thursday"><input type="hidden" name="calendar3.month.long.january" value="January"><input type="hidden" name="calendar3.day.short.friday" value="Fri"></fieldset></script>
            <meta name="ajs-is-confluence-admin" content="false">
            <meta name="ajs-connection-timeout" content="10000">
            
    
    
            <meta name="ajs-page-id" content="30711532">
            <meta name="ajs-latest-page-id" content="30711532">
            <meta name="ajs-content-type" content="page">
            <meta name="ajs-page-title" content="How to authenticate a user with multiple user providers">
            <meta name="ajs-parent-page-title" content="Advanced Tutorials">
            <meta name="ajs-parent-page-id" content="30711490">
            <meta name="ajs-space-key" content="TECHDOC">
            <meta name="ajs-space-name" content="TECHDOC">
            <meta name="ajs-comment-id" content="30711536">
            <meta name="ajs-from-page-title" content="">
            <meta name="ajs-can-remove-page" content="false">
            <meta name="ajs-context-path" content="">
            <meta name="ajs-base-url" content="https://doc.ez.no">
            <meta name="ajs-version-number" content="5.8.5">
            <meta name="ajs-build-number" content="5983">
            <meta name="ajs-remote-user" content="">
            <meta name="ajs-remote-user-key" content="">
            <meta name="ajs-current-user-fullname" content="">
            <meta name="ajs-current-user-avatar-url" content="">
            <meta name="ajs-static-resource-url-prefix" content="/s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/_">
            <meta name="ajs-global-settings-attachment-max-size" content="10485760">
            <meta name="ajs-user-locale" content="en_GB">
            <meta name="ajs-enabled-dark-features" content="confluence-inline-comments-resolved,notification.plugin.api.enabled.com.atlassian.confluence.plugins.sharepage.api.ShareContentEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.mentions.api.ConfluenceMentionEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.security.ForgotPasswordEvent,pdf-preview,notification.plugin.api.enabled.com.atlassian.confluence.plugins.tasklist.event.SendTaskEmailEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageMovedEvent,previews.sharing,previews.versions,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentUpdateEvent,file-annotations,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.attachment.AttachmentBatchUploadCompletedEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.comment.CommentCreateEvent,notification.plugin.api.enabled.com.atlassian.confluence.efi.emails.events.OnboardingLessUsersEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentRemoveEvent,atlassian.aui.raphael.disabled,previews.conversion-service,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.comment.CommentUpdateEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.follow.FollowEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageEditedEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostCreateEvent,previews.trigger-all-file-types,notification.plugin.api.enabled.com.atlassian.confluence.plugins.inlinecomments.events.InlineCommentResolveEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.like.LikeCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.inlinecomments.events.InlineCommentCreateEvent,previews.sharing.pushstate,confluence-inline-comments-rich-editor,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostUpdateEvent,file-annotations.likes,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentMentionUpdateEvent,notification.plugin.api.enabled.com.atlassian.confluence.efi.emails.events.OnboardingNoSpaceCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.hipchat.api.events.HipChatUserMapped,notification.plugin.api.enabled.com.atlassian.confluence.plugins.sharepage.api.ShareAttachmentEvent,confluence-inline-comments,confluence-inline-comments-dangling-comment,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostMovedEvent">
            <meta name="ajs-atl-token" content="9996d8127abd36d1b757536de859090f8b455d10">
            <meta name="ajs-confluence-flavour" content="VANILLA">
            <meta name="ajs-user-date-pattern" content="dd MMM yyyy">
            <meta name="ajs-date.format" content="MMM dd, yyyy">
    
    <link rel="shortcut icon" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/_/favicon.ico">
    <link rel="icon" type="image/x-icon" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/_/favicon.ico">

<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch/osd.action" title="eZ Documentation"/>

<script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-nps-plugin:atlassian-nps-plugin-resources.is-server-instance-data-provider"]="true";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics.feature-data-provider-legacy"]="true";
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager.resource-base-url-pattern"]="\"(?:(?:/s/.*?/_)?/download)\"";
WRM._unparsedData["com.atlassian.confluence.plugins.confluence-license-banner:confluence-license-banner-resources.license-details"]="{\"daysBeforeLicenseExpiry\":0,\"daysBeforeMaintenanceExpiry\":0,\"showLicenseExpiryBanner\":false,\"showMaintenanceExpiryBanner\":false,\"renewUrl\":null,\"salesEmail\":null}";
WRM._unparsedData["com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin:discovery-javascript-data.link-active"]="{\"linkActive\":false,\"conditionsMet\":true,\"admin\":false}";
WRM._unparsedData["com.atlassian.plugins.atlassian-nps-plugin:nps-acknowledgement-resources.analytics-enabled-data-provider"]="\"false\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-nps-plugin:nps-acknowledgement-resources.sen-data-provider"]="\"SEN-2255945\"";
WRM._unparsedData["com.atlassian.confluence.plugins.confluence-feature-discovery-plugin:confluence-feature-discovery-plugin-resources.test-mode"]="false";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api.feature-data-provider"]="true";
</script>
<link type="text/css" rel="stylesheet" href="../../s/1b9968ac17721e3a6947d14e3a43c3f8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch9c16.css?build-number=5983" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/fcf875d0c4710a8c828036f5c6fb7fa5-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/b8d35340d2d85de2791f14a4692ecf7b/_/download/contextbatch/css/atl.confluence.plugins.pagetree-desktop%2cmain%2cvi/batchd6a4.css?highlightactions=true&amp;flavour=VANILLA&amp;locale=en-GB" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/6c0981174e94142364564819dc0d1413-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/b8d35340d2d85de2791f14a4692ecf7b/_/download/contextbatch/css/atl.confluence.plugins.pagetree-desktop,main,viewcontent,atl.general,page,atl.comments/batch.css?conditionalComment=lt+IE+9&amp;locale=en-GB" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/7893b9affdc3bf828ad93d0610d3d5f3-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/b8d35340d2d85de2791f14a4692ecf7b/_/download/contextbatch/css/atl.confluence.plugins.pagetree-desktop,main,viewcontent,atl.general,page,atl.comments/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/3a21f7b21af4c67045d1e0255f2ac570/_/download/contextbatch/css/theme.doc/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/3.7.2/_/download/batch/confluence.extra.information_information-plugin/confluence.extra.information_information-plugin-adg-styles.cc" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/2.8.6/_/download/batch/org.randombits.confluence.toc_toc-plugin-styles/org.randombits.confluence.toc_toc-plugin-styles.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/2.1.7/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plug/com.atlassian.confluence.ext.newcode-macro-plugin_syntaxhighl" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/2.1.7/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plug/com.atlassian.confluence.ext.newcode-macro-plugin_sh-theme-ec" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/8/_/styles/colors82a8.css?spaceKey=TECHDOC" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/8/_/styles/custom82a8.css?spaceKey=TECHDOC" media="all">
<script type="text/javascript" src="../../s/1f7b22082ef39a4bb134622dae929bdc-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/js/batch32f4.js?atlassian.aui.raphael.disabled=true&amp;locale=en-GB&amp;build-number=5983" ></script>
<script type="text/javascript" src="../../s/aa56759c03dcb293b394c4b46058625c-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/b8d35340d2d85de2791f14a4692ecf7b/_/download/contextbatch/js/atl.confluence.plugins.pagetree-desktop%2cmain%2cvi/batcha41c.js?highlightactions=true&amp;flavour=VANILLA&amp;locale=en-GB&amp;anonymous-access-enabled=true&amp;is-server-instance=true&amp;hostenabled=true" ></script>
<script type="text/javascript" src="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/2.8.6/_/download/batch/org.randombits.confluence.toc_client-side-toc-r/org.randombits.confluence.toc_client-side-toc-resources.cf.de" ></script>
<script type="text/javascript" src="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/2.8.6/_/download/batch/org.randombits.confluence.toc_toc-plugin-analytics/org.randombits.confluence.toc_toc-plugin-analytics.js" ></script>
<script type="text/javascript" src="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/2.1.7/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plug/com.atlassian.confluence.ext-2.newcode-macro-plugin_syntaxhighl" ></script>
<script type="text/javascript" src="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/2.1.7/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plug/com.atlassian.confluence.ext-3.newcode-macro-plugin_syntaxhighl" ></script>
<script type="text/javascript" src="../../s/6c0981174e94142364564819dc0d1413-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/2.1.7/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plug/com.atlassian.confluence.ext.newcode-macro-plugin_syntaxhighl?locale=en-GB" ></script>


        
            <meta name="stp-license-product-name" content="Confluence"/> <meta name="stp-license-days-to-expiry" content="807"/> <meta name="stp-license-is-admin" content="false"/> <meta name="stp-license-should-keep-banner-hidden" content="true"/>
    

        
        <meta name="ajs-site-title" content="eZ Documentation" />

    
    

    
                <link rel="canonical" href="How%2bto%2bauthenticate%2ba%2buser%2bwith%2bmultiple%2buser%2bproviders.html">
        <link rel="shortlink" href="How%2bto%2bauthenticate%2ba%2buser%2bwith%2bmultiple%2buser%2bproviders.html">
    <meta name="wikilink" content="[TECHDOC:How to authenticate a user with multiple user providers]">
    <meta name="page-version" content="4">

</head>

<body             onload="placeFocus()"
     id="com-atlassian-confluence" class="theme-documentation  aui-theme-default aui-layout">

        
            <div id='stp-licenseStatus-banner'></div>
    <div id="full-height-container">
    <div id="header-precursor">
        
                    </div>






<header id="header" role="banner">
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation"><div class="aui-header-inner"><div class="aui-header-before"><a class=" aui-dropdown2-trigger app-switcher-trigger" aria-owns="app-switcher" aria-controls="app-switcher" aria-haspopup="true" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a><div id="app-switcher" class="aui-dropdown2 aui-style-default"><div class="app-switcher-loading">Loading&hellip;</div></div><script>
            (function (NL) {
                var initialise = function () {
                    // For some milestones of AUI, the atlassian soy namespace was renamed to aui. Handle that here by ensuring that window.atlassian is defined.
                    window.atlassian = window.atlassian || window.aui;
                    new NL.AppSwitcher({
                        dropdownContents: '#app-switcher'
                    });
                };
                if (NL.AppSwitcher) {
                    initialise();
                } else {
                    NL.onInit = initialise;
                }
            }(window.NL = (window.NL || {})));
            window.NL.isUserAdmin = false</script></div><div class="aui-header-primary"><h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="../../index.html"><img src="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/_/images/logo/atl.site.logo" alt="eZ Documentation" /></a></h1><ul class="aui-nav">
                            <li>
            
        
        
<a  id="space-directory-link" href="../../spacedirectory/view.html"  class=" aui-nav-imagelink"   title="Spaces">
            <span>Spaces</span>
    </a>
        </li>
                            <li id="browseMenu" role="menu">
            
    
        <a id="browse-menu-link" class="aui-nav-link aui-dropdown2-trigger" href="#" aria-haspopup="true" aria-owns="browse-menu-link-content" title="Browse">
        <span class="browse">Browse</span>
    </a>
    <nav id="browse-menu-link-content" class="aui-dropdown2 aui-style-default" aria-hidden="true">
                    <div class="aui-dropdown2-section">
                                <ul  id="browse-menu-link-leading" class="aui-list-truncate section-leading first">
                                            <li>
    
            
<a  id="space-pages-link" href="../../pages/listpages-alphaview9287.html?key=TECHDOC" class="    "      title="Browse pages in the TECHDOC space" >
        Pages
</a>
</li>
                                            <li>
    
            
<a  id="space-blogposts-link" href="../../pages/viewrecentblogposts9287.html?key=TECHDOC" class="    "      title="Browse blogs in the TECHDOC space" >
        Blog
</a>
</li>
                                            <li>
    
            
<a  id="space-labels-link" href="../../labels/listlabels-heatmap9287.html?key=TECHDOC" class="    "      title="Browse labels in the TECHDOC space" >
        Labels
</a>
</li>
                                            <li>
    
            
<a  id="space-advanced-link" href="../../spaces/viewspacesummary9287.html?key=TECHDOC" class="    "      title="Browse additional space functions in the TECHDOC space" >
        Space Operations
</a>
</li>
                                    </ul>
            </div>
            </nav>
    
        </li>
        </ul>
</div><div class="aui-header-secondary"><ul class="aui-nav">
            <li>
        
    
            
<a  id="doctheme-anchor" href="#"  class=" aui-nav-imagelink"   title="">
            <span></span>
    </a>
    </li>
                    <li>
        <form id="quick-search" class="aui-quicksearch dont-default-focus header-quicksearch" action="https://doc.ez.no/dosearchsite.action" method="get"><fieldset><input type="hidden" name="where" value="TECHDOC"/><input type="hidden" name="spaceSearch" value="true"/><label for="quick-search-query" class="assistive">Quick Search</label><input id="quick-search-query" class="text app-search search quick-search-query" type="text" accessKey="q" autocomplete="off" name="queryString" title="Quick Search" placeholder="Search space" /><input id="quick-search-submit" class="quick-search-submit" type="submit" value="Search"/><div class="aui-dd-parent quick-nav-drop-down"></div></fieldset></form>
    </li>
        <li>
            
        <a id="help-menu-link" class="aui-nav-link aui-dropdown2-trigger" href="#" aria-haspopup="true" aria-owns="help-menu-link-content" title="Help">
        <span class="aui-icon aui-icon-small aui-iconfont-help">Help</span>
    </a>
    <nav id="help-menu-link-content" class="aui-dropdown2 aui-style-default" aria-hidden="true">
                    <div class="aui-dropdown2-section">
                                <ul  id="help-menu-link-leading" class="aui-list-truncate section-leading first">
                                            <li>
        
            
<a  id="confluence-help-link" href="https://docs.atlassian.com/confluence/docs-58/Getting+Help+And+Support" class="    "      title="Visit the Confluence documentation home"  target="_blank"
>
        Online Help
</a>
</li>
                                            <li>
    
                
<a  id="keyboard-shortcuts-link" href="#" class="    "      title="View available keyboard shortcuts" >
        Keyboard Shortcuts
</a>
</li>
                                            <li>
    
            
<a  id="feed-builder-link" href="../../dashboard/configurerssfeed.html" class="    "      title="Create your custom RSS feed." >
        Feed Builder
</a>
</li>
                                            <li>
    
            
<a  id="whats-new-menu-link" href="https://docs.atlassian.com/confluence/docs-58/whatsnew/iframe" class="    "      title="" >
        What’s new
</a>
</li>
                                            <li>
    
                
<a  id="gadget-directory-link" href="#" class="   user-item administration-link "      title="Browse gadgets provided by Confluence" >
        Available Gadgets
</a>
</li>
                                            <li>
    
            
<a  id="confluence-about-link" href="../../aboutconfluencepage.html" class="    "      title="Get more information about Confluence" >
        About Confluence
</a>
</li>
                                    </ul>
            </div>
            </nav>
    
    </li>
        <li>
                
    
    </li>
        <li>
            
    </li>
        <li>
                                            <li>
        
            
<a  id="login-link" href="../../logincbe5.html?os_destination=%2Fdisplay%2FTECHDOC%2FHow%2Bto%2Bauthenticate%2Ba%2Buser%2Bwith%2Bmultiple%2Buser%2Bproviders%3FfocusedCommentId%3D30711536" class="   user-item login-link "      title="" >
        Log in
</a>
</li>
                        
    </li>
    </ul>
</div></div><!-- .aui-header-inner--></nav><!-- .aui-header -->
    <br class="clear">
</header>

    <div id="splitter">
    <div id="splitter-sidebar"  class="padding-div" >
        
        <p>&nbsp;</p>
<h4><a name="Howtoauthenticateauserwithmultipleuserproviders-&amp;nbsp;General"></a>&nbsp; General</h4>
<p><font color="#999">&bull;</font>&nbsp;&nbsp;<a href="http://ez.no/" class="external-link" rel="nofollow">eZ Systems Website</a><br/>
<font color="#999">&bull;</font>&nbsp;&nbsp;<a href="../DEVELOPER/Documentation.html" class="external-link" rel="nofollow">Technical documentation</a><br/>
<font color="#999">&bull;</font>&nbsp;&nbsp;<a href="../USER.html" class="external-link" rel="nofollow">Editor documentation</a></p>

<p>This Documentation contains:<br/>
&nbsp;<br/>
<a href="eZ%2bTechnical%2bManual.html"><strong>Technical documentation:</strong></a></p>
    

                    
    


<div class="plugin_pagetree">

        
        
    <ul class="plugin_pagetree_children_list plugin_pagetree_children_list_noleftspace">
        <div class="plugin_pagetree_children">
        </div>
    </ul>

    <fieldset class="hidden">
        <input type="hidden" name="treeId" value="">
        <input type="hidden" name="treeRequestId" value="/plugins/pagetree/naturalchildren.action?decorator=none&amp;excerpt=false&amp;sort=position&amp;reverse=false&amp;disableLinks=false&amp;expandCurrent=false">
        <input type="hidden" name="treePageId" value="30711532">

        <input type="hidden" name="noRoot" value="false">
        <input type="hidden" name="rootPageId" value="30711113">

        <input type="hidden" name="rootPage" value="">
        <input type="hidden" name="startDepth" value="0">
        <input type="hidden" name="spaceKey" value="TECHDOC" >

        <input type="hidden" name="i18n-pagetree.loading" value="Loading...">
        <input type="hidden" name="i18n-pagetree.error.permission" value="Unable to load page tree. It seems that you do not have permission to view the root page.">
        <input type="hidden" name="i18n-pagetree.eeror.general" value="There was a problem retrieving the page tree. Please check the server log file for more information.">
        <input type="hidden" name="loginUrl" value="/login.action?os_destination=%2Fpages%2Fviewpage.action%3FspaceKey%3DTECHDOC%26title%3DHow%2Bto%2Bauthenticate%2Ba%2Buser%2Bwith%2Bmultiple%2Buser%2Bproviders%26focusedCommentId%3D30711536">
        <input type="hidden" name="mobile" value="false">

                <fieldset class="hidden">
                                                <input type="hidden" name="ancestorId" value="30711490">
                                    <input type="hidden" name="ancestorId" value="30711837">
                                    <input type="hidden" name="ancestorId" value="30711113">
                                    </fieldset>
    </fieldset>
</div>



            </div>
    <div id="splitter-content">

                    <script type="text/javascript" src="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5.8.5/_/download/resources/com.atlassian.confluence.plugins.doctheme_resources/doc-theme.js"></script>
    
                        
        <div id="theme-header">
            <div class="sectionColumnWrapper"><div class="sectionMacro">
<div class="sectionMacroRow"><div class="columnMacro"></div>
<div class="columnMacro">
<div class="panel" style="background-color: #EDBB43;border-color: #F58220;border-style: solid;border-width: 1px;"><div class="panelContent" style="background-color: #EDBB43;">
<p><br class="atl-forced-newline" /> <br class="atl-forced-newline" />
<strong>⚠ WARNING ! This documentation is deprecated !</strong><br class="atl-forced-newline" /> <br class="atl-forced-newline" /> </p>
<h1><a name="Howtoauthenticateauserwithmultipleuserproviders-Pleasegoto[thecurrentTechnicalDocumentation|DEVELOPER:]\\\\"></a>Please go to <a href="../DEVELOPER/Documentation.html">the current Technical Documentation</a><br class="atl-forced-newline" /> <br class="atl-forced-newline" /></h1>
<p><span class="image-wrap" style=""><img src="../../download/attachments/30711113/smashingkeybrdd731.gif?version=1&amp;modificationDate=1464177849000&amp;api=v2" style="border: 0px solid black" /></span></p>
</div></div></div><div class="columnMacro"></div></div></div></div>
        </div>
    
            
<div id="main"  class="aui-page-panel" >
    <div id="main-header">
        
        
    <div id="navigation" class="content-navigation view">
                    <ul class="ajs-menu-bar">
                                                        
                    
        <li class="normal ajs-menu-item">
        <a id="action-menu-link" class="action aui-dropdown2-trigger-arrowless aui-button aui-button-subtle ajs-menu-title aui-dropdown2-trigger" href="#" aria-haspopup="true" aria-owns="action-menu" data-container="#navigation">
            <span>
                                    <span class="aui-icon aui-icon-small aui-iconfont-more"></span>
                                
            </span>
        </a>         <div id="action-menu" class="aui-dropdown2 aui-style-default">
                            <ul  id="action-menu-primary"                     class="section-primary first aui-dropdown2-section">
                                            <li>

    
        
                                            
    
    
    <a  id="view-attachments-link" href="../../pages/viewpageattachmentsaad4.html?pageId=30711532" rel="nofollow" class="action-view-attachments"  accessKey="t"  title="View Attachments">
                <span>
                        A<u>t</u>tachments (0)
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="action-view-history-link" href="../../pages/viewpreviousversionsaad4.html?pageId=30711532" rel="nofollow" class="action-view-history"   title="">
                <span>
                        Page History
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="action-page-permissions-link" href="../../pages/viewinfoaad4.html?pageId=30711532" rel="nofollow" class="action-page-permissions"   title="Edit restrictions">
                <span>
                        Restrictions
        </span>    </a>
</li>
                                </ul>
                            <ul  id="action-menu-secondary"                     class="section-secondary aui-dropdown2-section">
                                            <li>

    
        
                                            
    
    
    <a  id="view-page-info-link" href="../../pages/viewinfoaad4.html?pageId=30711532" rel="nofollow" class="action-view-info"   title="">
                <span>
                        Page Information
        </span>    </a>
</li>
                                        <li>

    
            
                                            
    
    
    <a  id="view-resolved-comments" href="#" rel="nofollow" class=""   title="">
                <span>
                        Resolved comments
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="link-to-page-link" href="../../pages/viewinfoaad4.html?pageId=30711532" rel="nofollow" class=""   title="Link to this Page">
                <span>
                        Link to this Page…
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="view-in-hierarchy-link" href="../../pages/listpages-dirviewa72f.html?key=TECHDOC&amp;openId=30711532#selectedPageInHierarchy" rel="nofollow" class=""   title="">
                <span>
                        View in Hierarchy
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="action-view-source-link" href="../../plugins/viewsource/viewpagesrcaad4.html?pageId=30711532" rel="nofollow" class="action-view-source popup-link"   title="">
                <span>
                        View Source
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="action-export-pdf-link" href="../../download/temp/pdfexport-20170131-310117-0846-2847/TECHDOC-Howtoauthenticateauserwithmultipleuserproviders-310117-0846-2848f1f7.pdf?pageId=30711532" rel="nofollow" class=""   title="">
                <span>
                        Export to PDF
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="action-export-word-link" href="../../exportwordaad4?pageId=30711532" rel="nofollow" class="action-export-word"   title="">
                <span>
                        Export to Word
        </span>    </a>
</li>
                                </ul>
                    </div>
    </li>
            </ul>
    </div>

        
                <div id="title-heading" class="pagetitle with-breadcrumbs">
        
                            <div class="space-logo " data-key="TECHDOC" data-name="TECHDOC" data-entity-type="confluence.space">
            <a><img class="logo space custom" src="../../download/attachments/30711109/TECHDOCd78e?version=1&amp;modificationDate=1449834628000&amp;api=v2" alt=""></a>
        </div>            
                            <div id="breadcrumb-section">
                    
    
    
    <ol id="breadcrumbs">
                                        
                        
        <li class="first" >
                        
                            <span class=""><a href="eZ%2bTechnical%2bManual.html">TECHDOC</a></span>
                                                                                            <li id="ellipsis" title="Show all breadcrumbs"><span><strong>&#8230;</strong></span></li>
                                                
                        
        <li class="hidden-crumb" >
                        
                            <span class=""><a href="eZ%2bTechnical%2bManual.html">eZ Technical Manual</a></span>
                                                                                    
                        
        <li class="hidden-crumb" >
                        
                            <span class=""><a href="Cookbooks.html">Cookbooks</a></span>
                                                                    
                        
        <li>
                        
                            <span class=""><a href="Advanced%2bTutorials.html">Advanced Tutorials</a></span>
                                                    </ol>


                </div>
            
            <h1 id="title-text" class="with-breadcrumbs">
                                        <a href="How%2bto%2bauthenticate%2ba%2buser%2bwith%2bmultiple%2buser%2bproviders.html">How to authenticate a user with multiple user providers</a>
                            </h1>
        </div>
    </div>

    

    
    
    
    
    

        




        




    

    

    







    
    
        
    
    
                    
    

    


<div id="content" class="page view">
    


<div id="action-messages">
                        </div>



        <script type="text/x-template" title="searchResultsGrid">
    <table class="aui">
        <thead>
            <tr class="header">
                <th class="search-result-title">Page Title</th>
                <th class="search-result-space">Space</th>
                <th class="search-result-date">Updated</th>
            </tr>
        </thead>
    </table>
</script>
<script type="text/x-template" title="searchResultsGridCount">
    <p class="search-result-count">{0}</p>
</script>
<script type="text/x-template" title="searchResultsGridRow">
    <tr class="search-result">
        <td class="search-result-title"><a href="{1}" class="content-type-{2}"><span>{0}</span></a></td>
        <td class="search-result-space"><a class="space" href="/display/{4}/" title="{3}">{3}</a></td>
        <td class="search-result-date"><span class="date" title="{6}">{5}</span></td>
    </tr>
</script>
        
    
    
        <fieldset class="hidden parameters">
            <input type="hidden" title="parentPageId" value="30711490">
        </fieldset>

                            
    

                    

        
        <a href="#page-metadata-end" class="assistive">Skip to end of metadata</a>
<div id="page-metadata-start" class="assistive"></div>

    <div class="page-metadata">
        <ul>
                            <li class="page-metadata-item noprint">

    
            
                                            
    
    
    <a  id="content-metadata-page-restrictions" href="#" rel="nofollow" class="hidden"   title="Restrictions apply">
                    <img alt="" src="../../download/resources/com.atlassian.confluence.plugins.confluence-page-banner_page-banner-resources/images/red_padlock.png" height="16" width="16" title="">
                <span>
                        
        </span>    </a>
</li>
                        <li class="page-metadata-modification-info">
                
        
    
        
    
        
            
            Created by <span class='author'>     <a href="../../login2ed8.html"
                       class="url fn"
                            >Jérôme Vieilledent</a></span>, last modified by <span class='editor'>     <a href="../../loginee65.html"
                       class="url fn"
                            >Dominika Kurek</a></span> on <a class='last-modified' title='Show changes' href='../../pages/diffpagesbyversiond1eb.html?pageId=30711532&amp;selectedPageVersions=3&amp;selectedPageVersions=4'>Feb 01, 2016</a>
                </li>
        </ul>
    </div>


<a href="#page-metadata-start" class="assistive">Go to start of metadata</a>
<div id="page-metadata-end" class="assistive"></div>

        
        <fieldset class="hidden parameters">
                        <input type="hidden" title="browsePageTreeMode" value="view">
        </fieldset>

        <div id="main-content" class="wiki-content">
                           
        <p><div class="toc-macro client-side-toc-macro " data-headerelements="H1,H2,H3,H4,H5,H6,H7"></div></p><h2 id="Howtoauthenticateauserwithmultipleuserproviders-Description">Description</h2><p>Symfony provides native support for <a href="http://symfony.com/doc/2.3/book/security.html#using-multiple-user-providers" class="external-link" rel="nofollow">multiple user providers</a>. This makes it easy to integrate any kind of login handlers, including SSO and existing 3rd party bundles (e.g. <a href="https://github.com/Maks3w/FR3DLdapBundle" class="external-link" rel="nofollow">FR3DLdapBundle</a>, <a href="https://github.com/hwi/HWIOAuthBundle" class="external-link" rel="nofollow">HWIOauthBundle</a>, <a href="https://github.com/FriendsOfSymfony/FOSUserBundle" class="external-link" rel="nofollow">FOSUserBundle</a>, <a href="http://github.com/BeSimple/BeSimpleSsoAuthBundle" class="external-link" rel="nofollow">BeSimpleSsoAuthBundle</a>, etc.).</p><p>However, to be able to use <em>external</em> user providers with eZ, a valid eZ user needs to be injected into the repository. This is mainly for the kernel to be able to manage content-related permissions (but not limited to this).</p><p>Depending on your context, you will either want to create an eZ user <code>on-the-fly</code>, return an existing user, or even always use a generic user.</p><p> </p><h2 id="Howtoauthenticateauserwithmultipleuserproviders-Solution">Solution</h2><p>Whenever an <em>external</em> user is matched (i.e. that does not come from eZ repository, like coming from LDAP), eZ kernel fires an <code>MVCEvents::INTERACTIVE_LOGIN</code> event. Every service listening to this event will receive an <code>eZ\Publish\Core\MVC\Symfony\Event\InteractiveLoginEvent</code> object which contains the original security token (that holds the matched user) and the request.</p><p>It's then up to the listener to retrieve an eZ user from the repository and to assign it back to the event object. This user will be injected into the repository and used for the rest of the request.</p><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>If no eZ user is returned, the anonymous user will be used.</p></div></div><h3 id="Howtoauthenticateauserwithmultipleuserproviders-Userexposedandsecuritytoken">User exposed and security token</h3><p>When an <em>external</em> user is matched, a different token will be injected into the security context, the <code>InteractiveLoginToken</code>. This token holds a <code>UserWrapped</code> instance which contains the originally matched user and the <em>API user</em> (the one from the eZ repository).</p><p>Note that the <em>API user</em> is mainly used for permission checks against the repository and thus stays <em>under the hood</em>.</p><h3 id="Howtoauthenticateauserwithmultipleuserproviders-Customizingtheuserclass">Customizing the user class</h3><p>It is possible to customize the user class used by extending <code>exponential.security.login_listener</code> service, which defaults to <code>eZ\Publish\Core\MVC\Symfony\Security\EventListener\SecurityListener</code>.</p><p>You can override <code>getUser()</code> to return whatever user class you want, as long as it implements <code>eZ\Publish\Core\MVC\Symfony\Security\UserInterface</code>.</p><h2 id="Howtoauthenticateauserwithmultipleuserproviders-Example">Example</h2><p><span>Here is a very simple example using the in-memory user provider.</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>app/config/security.yml</b></div><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[security:
    providers:
        # Chaining in_memory and exponential user providers
        chain_provider:
            chain:
                providers: [in_memory, exponential]
        exponential:
            id: exponential.security.user_provider
        in_memory:
            memory:
                users:
                    # You will then be able to login with username &quot;user&quot; and password &quot;userpass&quot;
                    user:  { password: userpass, roles: [ &#39;ROLE_USER&#39; ] }
	# The &quot;in memory&quot; provider requires an encoder for Symfony\Component\Security\Core\User\User
 encoders:
        Symfony\Component\Security\Core\User\User: plaintext]]></script>
</div></div><h3 id="Howtoauthenticateauserwithmultipleuserproviders-Implementingthelistener">Implementing the listener</h3><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>services.yml in your AcmeTestBundle</b></div><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[parameters:
    acme_test.interactive_event_listener.class: Acme\TestBundle\EventListener\InteractiveLoginListener

services:
    acme_test.interactive_event_listener:
        class: %acme_test.interactive_event_listener.class%
        arguments: [@exponential.api.service.user]
        tags:
            - { name: kernel.event_subscriber } ]]></script>
</div></div><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Do not mix <code>MVCEvents::INTERACTIVE_LOGIN</code> event (specific to eZ Platform) and <code>SecurityEvents::INTERACTIVE_LOGIN</code> event (fired by Symfony security component)</p></div></div><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Interactive login listener</b></div><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[&lt;?php
namespace Acme\TestBundle\EventListener;

use eZ\Publish\API\Repository\UserService;
use eZ\Publish\Core\MVC\Symfony\Event\InteractiveLoginEvent;
use eZ\Publish\Core\MVC\Symfony\MVCEvents;
use Symfony\Component\EventDispatcher\EventSubscriberInterface;

class InteractiveLoginListener implements EventSubscriberInterface
{
    /**
     * @var \eZ\Publish\API\Repository\UserService
     */
    private $userService;

    public function __construct( UserService $userService )
    {
        $this-&gt;userService = $userService;
    }

    public static function getSubscribedEvents()
    {
        return array(
            MVCEvents::INTERACTIVE_LOGIN =&gt; &#39;onInteractiveLogin&#39;
        );
    }

    public function onInteractiveLogin( InteractiveLoginEvent $event )
    {
        // We just load a generic user and assign it back to the event.
        // You may want to create users here, or even load predefined users depending on your own rules.
        $event-&gt;setApiUser( $this-&gt;userService-&gt;loadUserByLogin( &#39;lolautruche&#39; ) );
    }
} ]]></script>
</div></div><p><strong><br /></strong></p><p> </p><p> </p><p> </p><div class="table-wrap"><table class="diff-table tab-size-8 confluenceTable"><tbody><tr><td class="blob-code blob-code-addition confluenceTd">+<span class="pl-s2"> <span class="pl-c"># The &quot;in memory&quot; provider requires an encoder for Symfony\Component\Security\Core\User\User</span></span></td></tr></tbody></table></div><p> </p><p> </p><div class="table-wrap"><table class="diff-table tab-size-8 confluenceTable"><tbody><tr><td class="blob-code blob-code-addition confluenceTd"> </td></tr></tbody></table></div><div class="table-wrap"><table class="diff-table tab-size-8 confluenceTable"><tbody><tr><td class="blob-code blob-code-addition confluenceTd">+<span class="pl-s2"> <span class="pl-s1"><span class="pl-ent">encoders:</span></span></span></td></tr></tbody></table></div><p> </p><p> </p><div class="table-wrap"><table class="diff-table tab-size-8 confluenceTable"><tbody><tr><td class="blob-code blob-code-addition confluenceTd"> </td></tr></tbody></table></div><p>+ <span class="pl-ent">Symfony\Component\Security\Core\User\User:</span></p>

                
        
    
        </div>

        <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="https://doc.ez.no/display/TECHDOC/How+to+authenticate+a+user+with+multiple+user+providers"
    dc:identifier="https://doc.ez.no/display/TECHDOC/How+to+authenticate+a+user+with+multiple+user+providers"
    dc:title="How to authenticate a user with multiple user providers"
    trackback:ping="https://doc.ez.no/rpc/trackback/30711532"/>
</rdf:RDF>
-->

            
    



<div id="labels-section" class="pageSection group">
    <div class="labels-section-content content-column" entityid="30711532" entitytype="page">
	<div class="labels-content">
		
    <ul class="label-list label-list-right ">
                    
        <li class="aui-label " data-label-id="20381710"><a class="aui-label-split-main" href="../../label/TECHDOC/login.html" rel="tag">login</a></li><li class="aui-label " data-label-id="20381711"><a class="aui-label-split-main" href="../../label/TECHDOC/authentication.html" rel="tag">authentication</a></li><li class="aui-label " data-label-id="21430319"><a class="aui-label-split-main" href="../../label/TECHDOC/user.html" rel="tag">user</a></li>
            </ul>

    </div>
</div>
</div>

            
            




            
    








                        
    
<div id="comments-section" class="pageSection group">
                <div class="section-header">
            <h2 id="comments-section-title" class="section-title">
                                    4 Comments
                            </h2>
        </div>
    
    

            <ol class="comment-threads top-level" id="page-comments">
                    <li id="comment-thread-30711533" class="comment-thread">
        <div class="comment  " id="comment-30711533">
        <p class="comment-user-logo">
            <img class="userLogo logo anonymous" src="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/_/images/icons/profilepics/anonymous.png"
           alt="User icon: gaetano.giunta@ez.no" title="gaetano.giunta@ez.no">        </p>
        <div class="comment-header">
            <h4 class="author">    <a href="../../loginf4f0.html"
                       class="url fn"
                            >Gaetano Giunta</a></h4>
        </div>
        <div class="comment-body">
            <div class="comment-content wiki-content">
                <p>A couple of questions:</p><ol><li>when multiple user providers are chained, will the interactiveloginevent be fired only once (from first the user provider which matched the user credentials) ? Is it possible to distinguish the provider which actually did match?</li><li>&quot;user exposed and security token&quot; paragraph: this is for code which gets executed after the user login process, I suppose ?</li><li>&quot;customising the user class&quot; paragraph: any example of why/where this could be useful?</li><li>if I get it correctly, to implement the equivalent of an eZ4 custom-login-handler, the dev needs to write both an sf-user-provider and the event-listener described here. Could someone point to a very simple example of implementation of the former?</li></ol>
            </div>
            <div class="comment-actions">
                                                <ul class="comment-actions-secondary">
                                                              <li class="first comment-permalink"><a title="Permanent link to this comment" href="How%2bto%2bauthenticate%2ba%2buser%2bwith%2bmultiple%2buser%2bproviders745d.html?focusedCommentId=30711533#comment-30711533"
                 id="comment-permalink-30711533"                     ><span>Permalink</span></a></li>
            </ul>
                                    <ul class="comment-actions-primary">
                                                              <li class="first comment-date"><a title="Sep 10, 2014 11:04" href="How%2bto%2bauthenticate%2ba%2buser%2bwith%2bmultiple%2buser%2bproviders745d.html?focusedCommentId=30711533#comment-30711533"
                                    ><span>Sep 10, 2014</span></a></li>
            </ul>
                </div>
        </div>
    </div>

    <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="https://doc.ez.no/display/TECHDOC/How+to+authenticate+a+user+with+multiple+user+providers?focusedCommentId=30711533#comment-30711533"
    dc:identifier="https://doc.ez.no/display/TECHDOC/How+to+authenticate+a+user+with+multiple+user+providers?focusedCommentId=30711533#comment-30711533"
    dc:title="How to authenticate a user with multiple user providers"
    trackback:ping="https://doc.ez.no/rpc/trackback/30711533"/>
</rdf:RDF>
-->

    
</li>
                    <li id="comment-thread-30711534" class="comment-thread">
        <div class="comment  " id="comment-30711534">
        <p class="comment-user-logo">
            <img class="userLogo logo anonymous" src="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/_/images/icons/profilepics/anonymous.png"
           alt="User icon: jerome.vieilledent-obsolete@ez.no" title="jerome.vieilledent-obsolete@ez.no">        </p>
        <div class="comment-header">
            <h4 class="author">    <a href="../../login2ed8.html"
                       class="url fn"
                            >Jérôme Vieilledent</a></h4>
        </div>
        <div class="comment-body">
            <div class="comment-content wiki-content">
                <div><ol><li>Mainly from the token type, embedded in the event object. Matched used object is inside the token.</li><li>This paragraph is about the eZ user (from Repository) you want to use in the end, for Repository authentication.</li><li>Really depends on your needs...</li><li>Yes, but &quot;sf-user-provider&quot; are usually reused from bundles in the Symfony community, unless very specific. </li></ol><blockquote><p><span>Could someone point to a very simple example of implementation of the former?</span></p></blockquote><p><span>You mean a full implementation of custom login handler?</span></p></div><p> </p>
            </div>
            <div class="comment-actions">
                                                <ul class="comment-actions-secondary">
                                                              <li class="first comment-permalink"><a title="Permanent link to this comment" href="How%2bto%2bauthenticate%2ba%2buser%2bwith%2bmultiple%2buser%2bprovidersb62a.html?focusedCommentId=30711534#comment-30711534"
                 id="comment-permalink-30711534"                     ><span>Permalink</span></a></li>
            </ul>
                                    <ul class="comment-actions-primary">
                                                              <li class="first comment-date"><a title="Sep 10, 2014 12:21" href="How%2bto%2bauthenticate%2ba%2buser%2bwith%2bmultiple%2buser%2bprovidersb62a.html?focusedCommentId=30711534#comment-30711534"
                                    ><span>Sep 10, 2014</span></a></li>
            </ul>
                </div>
        </div>
    </div>

    <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="https://doc.ez.no/display/TECHDOC/How+to+authenticate+a+user+with+multiple+user+providers?focusedCommentId=30711534#comment-30711534"
    dc:identifier="https://doc.ez.no/display/TECHDOC/How+to+authenticate+a+user+with+multiple+user+providers?focusedCommentId=30711534#comment-30711534"
    dc:title="How to authenticate a user with multiple user providers"
    trackback:ping="https://doc.ez.no/rpc/trackback/30711534"/>
</rdf:RDF>
-->

    
</li>
                    <li id="comment-thread-30711535" class="comment-thread">
        <div class="comment  " id="comment-30711535">
        <p class="comment-user-logo">
            <img class="userLogo logo anonymous" src="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/_/images/icons/profilepics/anonymous.png"
           alt="User icon: kaonan" title="kaonan">        </p>
        <div class="comment-header">
            <h4 class="author">    <a href="../../login0bf2.html"
                       class="url fn"
                            >André Sousa</a></h4>
        </div>
        <div class="comment-body">
            <div class="comment-content wiki-content">
                <p>It would be great to have a more detailed example of implementation with an external ldap user provider:</p><pre>providers[ldap, exponential]</pre><p>I managed so far to install/config BorisMorel LdapBundle: <a href="https://github.com/BorisMorel/LdapBundle" class="external-link" rel="nofollow">https://github.com/BorisMorel/LdapBundle</a></p><p>I can even connect to the ldap server and authenticate an external user until ez pulish refreshes the page and reloads user from user provider. After reloading user from user provider, symfony debug shows Logged in as external user but Authenticated = No, and redirects to login again.</p><p>Do I have to customize the User class provided by the ldap bundle (<a href="https://github.com/BorisMorel/LdapBundle/blob/master/User/LdapUser.php" class="external-link" rel="nofollow">https://github.com/BorisMorel/LdapBundle/blob/master/User/LdapUser.php</a>) ?</p><p>Do I have to generate a new LoginToken ?</p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p>
            </div>
            <div class="comment-actions">
                                                <ul class="comment-actions-secondary">
                                                              <li class="first comment-permalink"><a title="Permanent link to this comment" href="How%2bto%2bauthenticate%2ba%2buser%2bwith%2bmultiple%2buser%2bprovidersf034.html?focusedCommentId=30711535#comment-30711535"
                 id="comment-permalink-30711535"                     ><span>Permalink</span></a></li>
            </ul>
                                    <ul class="comment-actions-primary">
                                                              <li class="first comment-date"><a title="Sep 12, 2014 06:43" href="How%2bto%2bauthenticate%2ba%2buser%2bwith%2bmultiple%2buser%2bprovidersf034.html?focusedCommentId=30711535#comment-30711535"
                                    ><span>Sep 12, 2014</span></a></li>
            </ul>
                </div>
        </div>
    </div>

    <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="https://doc.ez.no/display/TECHDOC/How+to+authenticate+a+user+with+multiple+user+providers?focusedCommentId=30711535#comment-30711535"
    dc:identifier="https://doc.ez.no/display/TECHDOC/How+to+authenticate+a+user+with+multiple+user+providers?focusedCommentId=30711535#comment-30711535"
    dc:title="How to authenticate a user with multiple user providers"
    trackback:ping="https://doc.ez.no/rpc/trackback/30711535"/>
</rdf:RDF>
-->

    
</li>
                    <li id="comment-thread-30711536" class="comment-thread">
        <div class="comment  focused  " id="comment-30711536">
        <p class="comment-user-logo">
            <img class="userLogo logo anonymous" src="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/_/images/icons/profilepics/anonymous.png"
           alt="User icon: valmaior" title="valmaior">        </p>
        <div class="comment-header">
            <h4 class="author">    <a href="../../loginc756.html"
                       class="url fn"
                            >Maior Valentin</a></h4>
        </div>
        <div class="comment-body">
            <div class="comment-content wiki-content">
                <p>After implementing a pure symfony user login system with custom UserProvider and AuthenticationProvider using a 3rd party API, failure and succes handlers, I started integrating the bundle in eZ5.</p><p>Managed to cable it in and get the user logged in, BUT I realized that I ended up with UserWrapped type and not my custom User Type. This causes a lot of issues when using FormTypes in my Controllers.I am using getUser() in the Controllers which return an UserWrapped which actually contains my customUser in a private wrappedUser to which unfortunately we do not have access.</p><p>Documentation suggests to override getUser() to get your custom user class but as long as you implement eZUserInterface, which I can not do as I want to develop a stand alone bundle, so I am implementing directly Symfony's UserInterface.</p><p><em>You can override <code>getUser()</code> to return whatever user class you want, as long as it implements <code>eZ\Publish\Core\MVC\Symfony\Security\UserInterface</code>.</em></p><p>I am aware that this means not having a repo user at the end so it might cause issues when working with content due to roles, but that is not the case (at least for the moment).</p><p>So what I was thinking is to implement a Listener that will listen to SecurityEvents::INTERACTIVE_LOGIN with a higher priority, and stop propagation afterwards so it does not end up caught in  ez SecurityListener, thus not ending up with UserWrapped and InteractiveLoginToken.</p><p> </p><p>What is your opinion on this approach?</p><p>Thank you in advance.</p>
            </div>
            <div class="comment-actions">
                                                <ul class="comment-actions-secondary">
                                                              <li class="first comment-permalink"><a title="Permanent link to this comment" href="How%2bto%2bauthenticate%2ba%2buser%2bwith%2bmultiple%2buser%2bprovidersdcb9.html?focusedCommentId=30711536#comment-30711536"
                 id="comment-permalink-30711536"                     ><span>Permalink</span></a></li>
            </ul>
                                    <ul class="comment-actions-primary">
                                                              <li class="first comment-date"><a title="Jan 12, 2015 16:17" href="How%2bto%2bauthenticate%2ba%2buser%2bwith%2bmultiple%2buser%2bprovidersdcb9.html?focusedCommentId=30711536#comment-30711536"
                                    ><span>Jan 12, 2015</span></a></li>
            </ul>
                </div>
        </div>
    </div>

    <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="https://doc.ez.no/display/TECHDOC/How+to+authenticate+a+user+with+multiple+user+providers?focusedCommentId=30711536#comment-30711536"
    dc:identifier="https://doc.ez.no/display/TECHDOC/How+to+authenticate+a+user+with+multiple+user+providers?focusedCommentId=30711536#comment-30711536"
    dc:title="How to authenticate a user with multiple user providers"
    trackback:ping="https://doc.ez.no/rpc/trackback/30711536"/>
</rdf:RDF>
-->

    
</li>
            </ol>


</div>


            
</div>


    




    
    

    
    
    








</div>
  
        <div id="theme-footer">
            <p>© 1999-2016 <a href="http://ez.no/" class="external-link" rel="nofollow">eZ Systems AS</a> and others</p>
        </div>
    
    </div>
</div>


        
            
            

<div id="footer" role="contentinfo">
    <section class="footer-body">

                                                            <p class="license license-opensource">
                    Powered by a free <b>Atlassian Confluence Open Source Project License</b> granted to Exponential. <a href="http://www.atlassian.com/c/conf/11461">Evaluate Confluence today</a>.<br>
                </p>
                    
        

        <ul id="poweredby">
            <li class="noprint">Powered by <a href="http://www.atlassian.com/software/confluence" class="hover-footer-link">Atlassian Confluence</a> <span id='footer-build-information'>5.8.5</span>, <a href="http://www.atlassian.com/software/confluence/overview/team-collaboration-software?utm_source=confluence-footer" class="hover-footer-link">Team Collaboration Software</a></li>
            <li class="print-only">Printed by Atlassian Confluence 5.8.5, Team Collaboration Software.</li>
            <li class="noprint"><a href="https://jira.atlassian.com/browse/CONF" class="hover-footer-link">Report a bug</a></li>
            <li class="noprint"><a href="http://www.atlassian.com/about/connected.jsp?s_kwcid=Confluence-stayintouch" class="hover-footer-link">Atlassian News</a></li>
        </ul>

        

        <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>

                    <script>
AJS.toInit(function(){
 if(AJS.params.spaceKey &&
    AJS.params.spaceKey === 'MAIN' ||
    AJS.params.spaceKey === 'EZMA' ||
    AJS.params.spaceKey === 'ODC' ||
    AJS.params.spaceKey === 'EZP50' ||
    AJS.params.spaceKey === 'EZP51' ||
    AJS.params.spaceKey === 'EZP52' ||
    AJS.params.spaceKey === 'EZPCLOUD' ||
    AJS.params.spaceKey === 'EZP' ||
    AJS.params.spaceKey === 'TECHDOC' ||
    AJS.params.spaceKey === 'USERGUIDE' ||
    AJS.params.spaceKey === 'EZRECO'
){

(function()
{var isSecure=('https:'==document.location.protocol);var ff=document.createElement('script');ff.type='text/javascript';ff.async=true;ff.src=(isSecure?'https':'http')+'://'+(isSecure?'secure.':'lb.')+'liveviewer.ez.no/statjs/sst-120-1304513615/stat.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(ff,s);}
)();

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-303624-13', 'ez.no');
  ga('send', 'pageview');
}}
);
</script>
        
    </section>
</div>

    </div>
</body>

<!-- Mirrored from doc.ez.no/display/TECHDOC/How+to+authenticate+a+user+with+multiple+user+providers?focusedCommentId=30711536 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 10:00:01 GMT -->
</html>
