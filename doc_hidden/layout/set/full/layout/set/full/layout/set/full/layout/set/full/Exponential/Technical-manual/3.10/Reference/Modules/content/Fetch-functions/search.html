

<!DOCTYPE html>
<html lang="en-GB">


<!-- Mirrored from doc.ez.no/doc_hidden/layout/set/full/layout/set/full/layout/set/full/layout/set/full/Exponential/Technical-manual/3.10/Reference/Modules/content/Fetch-functions/search by HTTrack Website Copier/3.x [XR&CO'2013], Wed, 01 Feb 2017 04:16:34 GMT -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../../../../../../../../../extension/ezdoc/design/doc/stylesheets/core.css" />
<style type="text/css"></style>
                                                                
    <title>search / Fetch functions / content / Modules / Reference / 3.10 / Technical manual / Exponential / Documentation - Doc</title>

    
    
    
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

            <meta http-equiv="Content-language" content="en-GB" />

    
                <meta name="author" content="eZ systems" />
                    <meta name="copyright" content="eZ systems" />
                    <meta name="description" content="Exponential Documentation" />
                    <meta name="keywords" content="Exponential, documentation, manual, reference, eZ systems" />
        
    <meta name="generator" content="Exponential" />
    <link rel="Home" href="../../../../../../../../full.html" title="Doc front page" />
<link rel="Search" href="../../../../../../../content/advancedsearch.html" title="Search Doc" />
<link rel="Shortcut icon" href="../../../../../../../../../../../../../../../../../../../../extension/ezdoc/design/doc/images/favicon.ico" type="image/x-icon" />

</head>

<body>



<div class="attribute-heading">
<h1>search</h1>
</div>
<h3>Summary</h3>
Fetches nodes containing data that match a certain criteria.<h3>Usage</h3>
<pre class="wordwrap">
<span class="line">fetch( content, search,</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hash( text, text,</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ offset, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;offset, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ limit, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;limit, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ section_id, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ subtree_array, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ publish_timestamp, &nbsp;time, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ publish_date, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;date, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ class_id, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ class_attribute_id, id, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ sort_by, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sort_by, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ limitation, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;limitation, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ ignore_visibility, &nbsp;ignore_visibility, ] ) )</span>

</pre><h3>Parameters</h3><table class="list" cellspacing="0">
<tr><th>Name</th><th>Type</th><th>Description</th><th>Required</th></tr><tr class="bglight">
        <td>text</td>
        <td>string</td>
        <td>The text that should be matched.</td>
        <td>Yes.</td>
    </tr><tr class="bgdark">
        <td>subtree_array</td>
        <td>mixed</td>
        <td>Array node ID number under which the system should search.</td>
        <td>No.</td>
    </tr><tr class="bglight">
        <td>offset</td>
        <td>integer</td>
        <td>The offset to start at.</td>
        <td>No.</td>
    </tr><tr class="bgdark">
        <td>limit</td>
        <td>integer</td>
        <td>The number of nodes that should be returned.</td>
        <td>No.</td>
    </tr><tr class="bglight">
        <td>publish_timestamp</td>
        <td>integer</td>
        <td>Only search objects with the specified publishing date/time (as a UNIX timestamp).</td>
        <td>No.</td>
    </tr><tr class="bgdark">
        <td>publish_date</td>
        <td>integer</td>
        <td>Only search objects published during the last day / week / month / three months / one year.</td>
        <td>No.</td>
    </tr><tr class="bglight">
        <td>section_id</td>
        <td>integer</td>
        <td>Only match objects that are in this section.</td>
        <td>No.</td>
    </tr><tr class="bgdark">
        <td>class_id</td>
        <td>integer</td>
        <td>Only match objects that are instances of this class. This parameter can also be an array of class ID numbers.</td>
        <td>No.</td>
    </tr><tr class="bglight">
        <td>class_attribute_id</td>
        <td>integer</td>
        <td>Only search within this attribute. This parameter can also be an array of attribute ID numbers.</td>
        <td>No.</td>
    </tr><tr class="bgdark">
        <td>sort_by</td>
        <td>mixed</td>
        <td>Sort the result. See description below.</td>
        <td>No.</td>
    </tr><tr class="bglight">
        <td>limitation</td>
        <td>array</td>
        <td>Limitation array (emtpy array = access override).</td>
        <td>No.</td>
    </tr><tr class="bgdark">
        <td>ignore_visibility</td>
        <td>boolean</td>
        <td>Makes it possible to get hidden nodes.</td>
        <td>No.</td>
    </tr></table><h3>Returns</h3>
 <p>An array of hashes (see below) or FALSE.</p><h3>Description</h3>
 <p>This function will perform a search and it will return the hits that the current user has read access to. The function returns an array of hashes. The hashes consist of the following elements:</p> <table class="renderedtable" cellpadding="2" cellspacing="0">
 
<tr>
 <td valign="top" style="vertical-align: top">   <p>SearchResult</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>array</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>An array of the nodes (as <a href="../../../Objects/ezcontentobjecttreenode.html" target="_self">ezcontentobjecttreenode</a> objects) that matched the search conditions.</p> 
  </td>
 
</tr>
 
<tr>
 <td valign="top" style="vertical-align: top">   <p>SearchCount</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>integer</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>The total number of nodes that matched the search conditions.</p> 
  </td>
 
</tr>
 
<tr>
 <td valign="top" style="vertical-align: top">   <p>StopWordArray</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>array</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>An array of strings containing words that were excluded from the search.</p> 
  </td>
 
</tr>
 
</table>
    <a name="eztoc76067_0_0_1" id="eztoc76067_0_0_1"></a><h4>Sorting</h4> <p>The &quot;sort_by&quot; parameter makes it possible to sort the result in different ways. This parameter behaves exactly in the same way as it does for the &quot;list&quot; function. Please refer to the documentation page of the &quot;<a href="list.html" target="_self">list</a>&quot; function for a complete explanation of this parameter.</p>       <a name="eztoc76067_0_0_2" id="eztoc76067_0_0_2"></a><h4>Searching by the date of publishing</h4> <p>The &quot;publish_date&quot; parameter makes it possible to search objects published during the specified period. The following table reveals the possible values of this parameter.</p> <table class="renderedtable" cellpadding="2" cellspacing="0">
 
<tr>
 <td valign="top" style="vertical-align: top">   <p>1</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>one day</p> 
  </td>
 
</tr>
 
<tr>
 <td valign="top" style="vertical-align: top">   <p>2</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>one week</p> 
  </td>
 
</tr>
 
<tr>
 <td valign="top" style="vertical-align: top">   <p>3</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>one month</p> 
  </td>
 
</tr>
 
<tr>
 <td valign="top" style="vertical-align: top">   <p>4</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>three months</p> 
  </td>
 
</tr>
 
<tr>
 <td valign="top" style="vertical-align: top">   <p>5</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>one year</p> 
  </td>
 
</tr>
 
</table>
 <p>The &quot;publish_timestamp&quot; parameter makes it possible to search objects with the specified publishing date/time. This value must be a UNIX timestamp. You can also use an array of two elements in order to search withing the given range.</p> <p>Please note that you can not use both &quot;publish_timestamp&quot; and &quot;publish_date&quot; at the same time. If you use &quot;publish_timestamp&quot; then &quot;publish_date&quot; will be ignored.</p>       <a name="eztoc76067_0_0_3" id="eztoc76067_0_0_3"></a><h4>Access override</h4> <p>The &quot;limitation&quot; parameter makes it possible to instruct the system to use an alternate set of access limitations instead of the ones that belong to the current user. This is typically useful when there is a need to match and return nodes that the current user does not have access to. All permission checking can be skipped by providing an empty array. It is also possible to provide arrays that define access limitations of other users and/or custom sets of limitations. Note that this is for advanced/experienced users. You'll have to look in the source code of the kernel for details related to the format of this array.</p>       <a name="eztoc76067_0_0_4" id="eztoc76067_0_0_4"></a><h4>Visibility override</h4> <p>The &quot;ignore_visibility&quot; parameter makes it possible to allow the search function to get hidden nodes. It can be set to either &quot;true()&quot; or &quot;false()&quot; (default). If set to &quot;true()&quot;, the search engine will ignore the visibility flags of nodes and thus the result will contain all kinds of nodes regardless if they are hidden or not. In other words, this parameter overrides the <a href="../../../Configuration-files/site.ini/SiteAccessSettings/ShowHiddenNodes.html" target="_self">&quot;ShowHiddenNodes&quot;</a> configuration directive for a specific search operation in a template.</p>   <h3>Examples</h3>
    <a name="eztoc76068_0_0_1" id="eztoc76068_0_0_1"></a><h4>Example 1</h4> <pre class="wordwrap copytoclipboard"><span class="line">{def $search=fetch( 'content', 'search',</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hash( 'text', &nbsp;&nbsp;&nbsp;&nbsp;'example',</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'class_id', array( '2', '5' ) ) )}</span>
<span class="line">&nbsp;</span>
<span class="line">The search returned {$search.SearchCount} matches. &lt;br /&gt;</span>
<span class="line">&nbsp;</span>
<span class="line">{foreach $search.SearchResult as $matched_node}</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;{$matched_node.name|wash} &lt;br /&gt;</span>
<span class="line">{/foreach}</span>
</pre><!--[if IE]>
<p class="copytoclipboard"><img src="/extension/ezdoc/design/doc/images/copytoclipboard.gif" height="16" width="16" alt="Copy to clipboard" title="Copy to clipboard" onclick="window.clipboardData.setData( 'text', '{def $search=fetch( \'content\', \'search\',\r\n                    hash( \'text\',     \'example\',\r\n                          \'class_id\', array( \'2\', \'5\' ) ) )} \r\n\r\nThe search returned {$search.SearchCount} matches. &lt;br /&gt;\r\n\r\n{foreach $search.SearchResult as $matched_node}\r\n    {$matched_node.name|wash} &lt;br /&gt;\r\n{/foreach}' ); return false;" /></p>
<![endif]--> <p>Outputs the names of all nodes which encapsulte objects of classes 2 and 5 containing the word &quot;example&quot;.</p>       <a name="eztoc76068_0_0_2" id="eztoc76068_0_0_2"></a><h4>Example 2</h4> <pre class="wordwrap copytoclipboard"><span class="line">{def $search=fetch( 'content', 'search',</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hash( 'text', &nbsp;&nbsp;&nbsp;&nbsp;'example',</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'publish_timestamp', array( '1033920746', '1033920789' ) ) )}</span>
<span class="line">&nbsp;</span>
<span class="line">The search returned {$search.SearchCount} matches. &lt;br /&gt;</span>
<span class="line">&nbsp;</span>
<span class="line">{foreach $search.SearchResult as $matched_node}</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;{$matched_node.name|wash} &lt;br /&gt;</span>
<span class="line">{/foreach}</span>
</pre><!--[if IE]>
<p class="copytoclipboard"><img src="/extension/ezdoc/design/doc/images/copytoclipboard.gif" height="16" width="16" alt="Copy to clipboard" title="Copy to clipboard" onclick="window.clipboardData.setData( 'text', '{def $search=fetch( \'content\', \'search\',\r\n                    hash( \'text\',     \'example\',\r\n                          \'publish_timestamp\', array( \'1033920746\', \'1033920789\' ) ) )} \r\n\r\nThe search returned {$search.SearchCount} matches. &lt;br /&gt;\r\n\r\n{foreach $search.SearchResult as $matched_node}\r\n    {$matched_node.name|wash} &lt;br /&gt;\r\n{/foreach}' ); return false;" /></p>
<![endif]--> <p>Outputs the names of all nodes which encapsulte objects published between the specified date/time values.</p>   





<address>
Powered by <a href="http://ez.no/exponential" title="Exponential&trade; CMS Open Source Web Content Management">Exponential&trade; CMS Open Source Web Content Management</a>. Copyright &copy; 1999-2013 <a href="http://ez.no/" title="eZ Systems AS">eZ Systems AS</a> (except where otherwise noted). All rights reserved.
</address>


</body>

<!-- Mirrored from doc.ez.no/doc_hidden/layout/set/full/layout/set/full/layout/set/full/layout/set/full/Exponential/Technical-manual/3.10/Reference/Modules/content/Fetch-functions/search by HTTrack Website Copier/3.x [XR&CO'2013], Wed, 01 Feb 2017 04:16:34 GMT -->
</html>
