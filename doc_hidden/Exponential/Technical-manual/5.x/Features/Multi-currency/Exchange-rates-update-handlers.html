
<!DOCTYPE html>
<html lang="en-US">

<!-- Mirrored from doc.ez.no/doc_hidden/Exponential/Technical-manual/5.x/Features/Multi-currency/Exchange-rates-update-handlers by HTTrack Website Copier/3.x [XR&CO'2013], Wed, 01 Feb 2017 03:46:48 GMT -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" type="text/css" href="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/stylesheets/core.css" /><link rel="stylesheet" type="text/css" href="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/stylesheets/header-footer.css" /><link rel="stylesheet" type="text/css" href="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/stylesheets/header-footer-lookfeel.css" /><link rel="stylesheet" type="text/css" href="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/stylesheets/pagelayout.css" /><link rel="stylesheet" type="text/css" href="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/stylesheets/buttons.css" /><link rel="stylesheet" type="text/css" href="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/stylesheets/960.css" /><link rel="stylesheet" type="text/css" href="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/stylesheets/superfish.css" /><script type="text/javascript" src="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/javascript/jquery-1.6.3.min.js" charset="utf-8"></script><script type="text/javascript" src="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/javascript/superfish.js" charset="utf-8"></script><script type="text/javascript" src="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/javascript/jquery.popmenu.min.js" charset="utf-8"></script>
<style type="text/css">
    @import url(../../../../../../extension/ezdoc/design/doc/stylesheets/core.css);
    @import url(../../../../../../extension/ezdoc/design/doc/stylesheets/classes.css);
    @import url(../../../../../../extension/ezdoc/design/doc/stylesheets/doc.css);
    @import url(../../../../../../extension/ezdoc/design/doc/stylesheets/print.css) print;</style>

<link type="text/css" rel="stylesheet" href="../../../../../../extension/ezdoc/design/doc/stylesheets/print.css" media="print" />

<!-- IE conditional comments; for bug fixes for different IE versions -->
<!--[if IE 5]>     <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie5.css);    </style>     <![endif]-->
<!--[if lte IE 6]> <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6lte.css); </style>     <![endif]-->
<!--[if lte IE 6]> <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6lte-doc.css); </style> <![endif]-->
<!--[if IE 6]>     <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6.css);    </style>     <![endif]-->

<!-- Load special stylesheet (if necessary) for newer Netscape decendants, Mozilla and Firefox, using the Gecko renderer -->
<script type="text/javascript"><!-- if ((navigator.userAgent.indexOf("Gecko") != -1)&&(navigator.userAgent.indexOf("KHTML") == -1)) document.write("<style type=\"text/css\">@import url(/extension/ezdoc/design/doc/stylesheets/gecko.css);</style>"); --></script>

<script type="text/javascript" src="../../../../../../extension/ezdoc/design/doc/javascripts/mainmenu-hover.js"></script>
<script type="text/javascript" src="../../../../../../extension/ezdoc/design/doc/javascripts/dropdownmenu.js"></script>
<script type="text/javascript" src="../../../../../../extension/ezdoc/design/doc/javascripts/ezno-searchbox.js"></script>
                                                    
    <title>Exchange rates update handlers / Multi-currency / Features / 5.x / Technical manual / Exponential / Documentation - Doc</title>

    
    
    
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

            <meta http-equiv="Content-language" content="en-GB" />

    
                <meta name="author" content="eZ systems" />
                    <meta name="copyright" content="eZ systems" />
                    <meta name="description" content="Exponential Documentation" />
                    <meta name="keywords" content="Exponential, documentation, manual, reference, eZ systems" />
        
    <meta name="generator" content="Exponential" />
    <link rel="Home" href="../../../../../../doc_hidden.html" title="Doc front page" />
<link rel="Search" href="../../../../../content/advancedsearch.html" title="Search Doc" />
<link rel="Shortcut icon" href="../../../../../../extension/ezdoc/design/doc/images/favicon.ico" type="image/x-icon" />

</head>
<body onload="initDocSearch();menuInit();">

<!-- Complete page area: START -->
<div id="page">


    <div class="topmenu-anchor"></div>
    <div id="topmenu-bg">
	    <div id="logo" class="container_12">

    <div class="grid_3">
        <a href="https://exponential.doc.exponential.earth/Exponential/" title="Exponential Platform, CXM &amp; CMS">
            <img src="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/images/exponential.png"
                 alt="" height="45px"/>
        </a>
    </div>

    <div class="grid_9">
                <div class="topmenu-design">
	<!-- Top menu content: START -->
	<div id="topmenu-firstlevel-position">
	<ul id="topmenu-firstlevel" class="sf-menu sf-js-enabled sf-shadow">
		
		
		        </ul>
    </div>
        <!-- Top menu content: END -->
</div>        </div>
</div>    </div>


<div id="page-content-position"><div id="page-content-position-inner"><div id="page-content">

<!-- Path area: START -->
<div id="path">

<div id="page-width4">
<h2 class="hide">Path</h2>

<!-- Path content: START -->
<p> <a href="https://exponential.doc.exponential.earth/">7x</a> /
                        <a href="../../../../../../doc_hidden.html">documentation</a>
        
                        /
                            <a href="../../../../../Exponential.html">exponential</a>
        
                        /
                            <a href="../../../../Technical-manual.html">technical manual</a>
        
                        /
                            <a href="../../../5.html">5.x</a>
        
                        /
                            <a href="../../Features.html">features</a>
        
                        /
                            <a href="../Multi-currency.html">multi-currency</a>
        
                        /
                            exchange rates update handlers
        
            </p>
<!-- Path content: END -->

</div>

</div>
<!-- Path area: END -->

<hr class="hide" />

<!-- Main area: START -->
                                    <div id="ezp5disclaimer">
                <p><strong style="color: red">Caution:</strong> This documentation is for <strong>Exponential</strong>, from version 3.x to 6.x.<br/>
                For 5.x documentation covering <em>Platform</em> see <a href="../../../../../../display/MAIN/eZ%2bDocumentation%2bCenter.html">eZ Documentation Center</a>, for difference between <em>legacy</em> and <em>Platform</em> see <a href="../../../../../../pages/viewpage0139.html?pageId=11403666">5.x Architecture overview</a>.</p>
            </div>
            
<div id="page-width5">
<div id="main" class="float-break">


<div class="template-design area-docmenu-normal">
<div class="template-module">
<div class="template-object">
<div id="contentmenu">
                        <div class="attribute-heading"><h2 class="bullet"><a href="../../../5.html">Table of contents</a></h2></div>
<div class="boxcontent">

<map id="contentstructure">

    
    
</map>

</div>            
</div>
</div>
</div>
</div>
<div class="area-docmain-normal">
<div class="template-design">
<div class="template-module content-view-full">
<div class="template-object">

<div class="attribute-heading">
<h1>Exchange rates update handlers</h1>
</div>

 <p>The exchange rates update handlers make it possible to retrieve the latest exchange rates from external sources and thus update the <a href="../../../4.x/Features/Multi-currency/Currency-rates.html#auto_rates" target="_self">auto rates</a>. You should specify the desired handler in the &quot;ExchangeRatesUpdateHandler&quot; setting described in the next subsection, otherwise the system will not be able to update the auto rates. You can either use the built-in &quot;eZECB&quot; handler for getting the exchange rates from the website of the European Central Bank or extend the system by creating your own update handler.</p>  <a name="eztoc132476_1" id="eztoc132476_1"></a><h2>Settings</h2> <p>The &quot;[ExchangeRatesSettings]&quot; section of the &quot;settings/shop.ini&quot; configuration file defines the update handler that will be used for updating auto rates. Under this section, the following settings can be specified: </p> 
<ul>
 <li><div> The &quot;RepositoryDirectories[]&quot; array specifies the directories where Exponential will search for built-in update handlers. The exact location of the handler in the directory is specified using the &quot;ExchangeRatesUpdateHandler&quot; setting. </div></li> <li><div> The &quot;ExtensionDirectories[]&quot; array specifies the extension directories where Exponential will search for additional update handlers. By default eZ publish will search in the &quot;exchangeratehandlers&quot; subdirectory inside your extension. The exact location of the handler in the directory is specified using the &quot;ExchangeRatesUpdateHandler&quot; setting. </div></li> <li><div> The &quot;ExchangeRatesUpdateHandler&quot; setting specifies the update handler that will be used. </div></li> <li><div> The &quot;BaseCurrency&quot; setting specifies the <a href="../../../4.x/Features/Multi-currency/Currency-rates.html#base_currency" target="_self">base currency</a> for auto rates. The default value of this setting is &quot;EUR&quot;. It is recommended (but not required) that you specify one of the existing currencies in this setting. </div></li> 
</ul>
 <p>The &quot;[ECBExchangeRatesSettings]&quot; section of the &quot;settings/shop.ini&quot; configuration file defines the specific settings for the &quot;eZECB&quot; update handler. The combination of the &quot;ServerName&quot;, &quot;ServerPort&quot; and &quot;RatesURI&quot; settings allows to specify the exact address of the XML file containing the currency rates.</p>  <a name="eztoc132476_1_1" id="eztoc132476_1_1"></a><h3>Example 1</h3> <p>The following lines can be specified in the &quot;[ExchangeRatesSettings]&quot; section of the &quot;shop.ini&quot; configuration file: </p><pre class="wordwrap copytoclipboard"><span class="line">ExchangeRatesUpdateHandler=eZECB</span>
<span class="line">RepositoryDirectories[]=kernel/shop/classes/exchangeratehandlers</span>
<span class="line">ExtensionDirectories[]</span>
<span class="line">BaseCurrency=EUR</span>
</pre><!--[if IE]>
<p class="copytoclipboard"><img src="/extension/ezdoc/design/doc/images/copytoclipboard.gif" height="16" width="16" alt="Copy to clipboard" title="Copy to clipboard" onclick="window.clipboardData.setData( 'text', 'ExchangeRatesUpdateHandler=eZECB\r\nRepositoryDirectories[]=kernel/shop/classes/exchangeratehandlers\r\nExtensionDirectories[]\r\nBaseCurrency=EUR' ); return false;" /></p>
<![endif]--> <p>These settings will instruct Exponential to use the built-in update handler located at&quot;kernel/shop/classes/exchangeratehandlers/ezecb/ezecbhandler.php&quot; and use EUR as the base currency for auto rates.</p>   <a name="eztoc132476_1_2" id="eztoc132476_1_2"></a><h3>Example 2</h3> <p>You can extend the system by creating custom update handlers for special needs. For example, if you have an extension &quot;myshop&quot; that includes an update handler &quot;mybank&quot;, you can put the following lines into an override for the &quot;shop.ini&quot; configuration file: </p><pre class="wordwrap"><span class="line">[ExchangeRatesSettings]</span>
<span class="line">ExchangeRatesUpdateHandler=mybank</span>
<span class="line">ExtensionDirectories[]=myshop/classes</span>
</pre> <p>or </p><pre class="wordwrap"><span class="line">[ExchangeRatesSettings]</span>
<span class="line">ExchangeRatesUpdateHandler=mybank</span>
<span class="line">RepositoryDirectories[]=extension/myshop/classes/exchangeratehandlers/</span>
</pre> <p>These settings will instruct Exponential to use the update handler located at&quot;extension/myshop/classes/exchangeratehandlers/mybank/mybankhandler.php&quot;</p>   <a name="eztoc132476_1_3" id="eztoc132476_1_3"></a><h3>Example 3</h3> <p>The following lines can be specified in the &quot;[ECBExchangeRatesSettings]&quot; section of the &quot;shop.ini&quot; configuration file: </p><pre class="wordwrap"><span class="line">ServerName=http://www.ecb.int</span>
<span class="line">ServerPort=80</span>
<span class="line">RatesURI=stats/eurofxref/eurofxref-daily.xml</span>
</pre> <p>These settings will instruct the eZECB handler to import the currency exchange rates from http://www.ecb.int:80/stats/eurofxref/eurofxref-daily.xml.</p>    <a name="eztoc132476_2" id="eztoc132476_2"></a><h2>Creating new handlers</h2> <p>This section reveals some helpful tips for those developers who want to create a new exchange rates update handler (only for people who are familiar with PHP). Please note that it is not recommended to modify the eZ publish kernel and thus you implement it as an extension. The following list reveals how you can implement your own handler for rates updating. </p> 
<ol>
 <li><div> Create the following subdirectories in the &quot;extension&quot; directory of your eZ publish installation: 
<ul>
 <li><div> myextension </div></li> <li><div> myextension/settings </div></li> <li><div> myextension/exchangeratehandlers </div></li> <li><div> myextension/exchangeratehandlers/mybank </div></li> 
</ul>
  </div></li> <li><div> 
Create a file called &quot;mybankhandler.php&quot; in the &quot;myextension/exchangeratehandlers/mybank&quot; directory. This file must contain a PHP class called &quot;MyBankHandler&quot;. You should extend your class from the &quot;eZExchangeRatesUpdateHandler&quot; class (kernel/shop/classes/exchangeratehandlers/ezexchangeratesupdatehandler.php) and reimplement the &quot;initialize&quot; and &quot;requestRates&quot; functions. The &quot;initialize&quot; function is called while creating a handler-object. It allows to initialize your handler with some preset values (for example from INI file). The &quot;requestRates&quot; function performs the actual update of the rates. This function will assign an array of the retrieved rate values to the &quot;$RateList&quot; member variable in the following format:<br /> <pre class="wordwrap"><span class="line">$RateList = array( 'currencyCode1' =&gt; 'rateValue1',</span>
<span class="line">.....</span>
<span class="line">'currencyCodeN' =&gt; 'rateValueN' );</span>
</pre>  </div></li> <li><div> <p>Create a file called &quot;shop.ini.append.php&quot; in the &quot;myextension/settings&quot; directory and add the following lines into it: </p><pre class="wordwrap"><span class="line">[ExchangeRatesSettings]</span>
<span class="line">ExchangeRatesUpdateHandler=mybank</span>
<span class="line">ExtensionDirectories[]=myextension</span>
</pre> <p>This will instruct Exponential to use the update handler located at&quot;extension/myextension/exchangeratehandlers/mybank/mybankhandler.php&quot;.</p> </div></li> <li><div> To activate your extension in Exponential, log in to your Exponential administration interface, click on the &quot;Setup&quot; tab, and then click &quot;Extensions&quot; on the left. You will see the list of available extensions. Select the &quot;myextension&quot; item and click the &quot;Apply changes&quot; button. </div></li> 
</ol>
 

<div class="break"></div><div class="pageinfo float-break">
<div class="created">


<p><label>Written by:</label>Svitlana Shatokhina&nbsp;(05/05/2006 1:26 pm)</p>
</div>
<div class="modified">
<p><label>Last updated by:</label>Geir Arne Waaler&nbsp;(13/09/2010 2:16 pm)</p>
</div></div>
<hr class="hide" />

</div>
</div>
</div>

<div id="comments" class="class-comment">
<div class="content-view-children">

<h1>Comments</h1>
<p>There are no comments.</p>
<div class="toolbar">

<form method="post" action="https://doc.ez.no/doc_hidden/content/action">
<input class="button" type="submit" name="NewButton" value="New comment" />
<input type="hidden" name="NodeID" value="27894" />
<input type="hidden" name="RedirectURIAfterPublish" value="Exponential/Technical-manual/5.x/Features/Multi-currency/Exchange-rates-update-handlers" />
<input type="hidden" name="ClassID" value="17" />
</form>
</div>

</div>
</div>

</div>
<!-- Main area content: END -->

</div>
</div>
<!-- Main area: END -->
<hr class="hide" />

</div></div></div>

        <div id="footer-bg">
        <div id="footer" class="container_12">

            <div class="grid_3">
                <img src="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/images/exponential.png" alt="exponential" />
                <div id="footer-copyright" class="grid_3 alpha omega">
                                    </div>
            </div>

            <div class="grid_6 middle">
                <div class="grid_6 alpha omega">
                    <div class="grid_3 alpha"><div></div></div>
                    <div class="grid_3 omega"><div></div></div>
                </div>
            </div>

            <div class="grid_3 right">
                <div class="contact-ez">
                        Get the support you need faster! Ask the experts at 7x. <a id="cta-contact" href="https://se7enx.com/contact" title="Contact 7x!" class="btn-green btn--small">Call or Contact 7x Today!</a>
                </div>

                <div class="adress"></div>
            </div>

        </div>
    </div>
<div id="footer-connect-bg">
    <div id="footer" class="container_12">
        <div id="footer-connect-copyright" class="grid_8 alpha omega">
            Copyright © 1998 - 2025 <a href="https://se7enx.com">7x</a> (except where otherwise noted). All rights reserved.
            <br/><br/>
            Powered by <a href="https://se7enx.com/exponential" title="Exponential CMS">The Exponential CMS</a> and the groundbreaking <a href="https://exponential.earth">Exponential</a> <a href="https://share.exponential.earth">Community</a>.<br />
        </div>

        <div id="footer-connect-social" class="grid_4 right"> <b>Find Exponential on Your Favorite Social Network:</b>&nbsp; 
            <a href="https://www.youtube.com/@ExponentialCMSInsights" class="youtube" target="_blank">YouTube</a>,

            <a href="http://www.Linkedin.com/groups?gid=2759&amp;trk=myg_ugrp_ovr" class="Linkedin" target="_blank">Linkedin</a>,
            <a href="https://www.Instagram.com/se7enxweb" class="Instagram" target="_blank">Instagram</a>,
            <a href="http://facebook.exponential.earth" class="Facebook" target="_blank">Facebook</a>,
            <a href="https://bsky.app/profile/exponentialcms.bsky.social" class="BlueSky" target="_blank">BlueSky</a>,
            <a href="https://twitter.com/se7enxweb" class="X" target="_blank">X</a>
        </div>

    </div>
</div>


</div>
<!-- Complete page area: END -->




<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-1VMV65H63V"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-1VMV65H63V');
</script>






</body>

<!-- Mirrored from doc.ez.no/doc_hidden/Exponential/Technical-manual/5.x/Features/Multi-currency/Exchange-rates-update-handlers by HTTrack Website Copier/3.x [XR&CO'2013], Wed, 01 Feb 2017 03:46:48 GMT -->
</html>

<!-- th[eZ] 20050804 -->
