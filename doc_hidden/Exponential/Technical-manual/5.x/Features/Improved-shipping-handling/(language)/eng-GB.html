
<!DOCTYPE html>
<html lang="en-US">

<!-- Mirrored from doc.ez.no/doc_hidden/Exponential/Technical-manual/5.x/Features/Improved-shipping-handling/(language)/eng-GB by HTTrack Website Copier/3.x [XR&CO'2013], Wed, 01 Feb 2017 02:24:26 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>

<link rel="stylesheet" type="text/css" href="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/stylesheets/core.css" /><link rel="stylesheet" type="text/css" href="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/stylesheets/header-footer.css" /><link rel="stylesheet" type="text/css" href="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/stylesheets/header-footer-lookfeel.css" /><link rel="stylesheet" type="text/css" href="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/stylesheets/pagelayout.css" /><link rel="stylesheet" type="text/css" href="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/stylesheets/buttons.css" /><link rel="stylesheet" type="text/css" href="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/stylesheets/960.css" /><link rel="stylesheet" type="text/css" href="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/stylesheets/superfish.css" /><script type="text/javascript" src="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/javascript/jquery-1.6.3.min.js" charset="utf-8"></script><script type="text/javascript" src="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/javascript/superfish.js" charset="utf-8"></script><script type="text/javascript" src="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/javascript/jquery.popmenu.min.js" charset="utf-8"></script>
<style type="text/css">
    @import url(../../../../../../../extension/ezdoc/design/doc/stylesheets/core.css);
    @import url(../../../../../../../extension/ezdoc/design/doc/stylesheets/classes.css);
    @import url(../../../../../../../extension/ezdoc/design/doc/stylesheets/doc.css);
    @import url(../../../../../../../extension/ezdoc/design/doc/stylesheets/print.css) print;</style>

<link type="text/css" rel="stylesheet" href="../../../../../../../extension/ezdoc/design/doc/stylesheets/print.css" media="print" />

<!-- IE conditional comments; for bug fixes for different IE versions -->
<!--[if IE 5]>     <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie5.css);    </style>     <![endif]-->
<!--[if lte IE 6]> <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6lte.css); </style>     <![endif]-->
<!--[if lte IE 6]> <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6lte-doc.css); </style> <![endif]-->
<!--[if IE 6]>     <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6.css);    </style>     <![endif]-->

<!-- Load special stylesheet (if necessary) for newer Netscape decendants, Mozilla and Firefox, using the Gecko renderer -->
<script type="text/javascript"><!-- if ((navigator.userAgent.indexOf("Gecko") != -1)&&(navigator.userAgent.indexOf("KHTML") == -1)) document.write("<style type=\"text/css\">@import url(/extension/ezdoc/design/doc/stylesheets/gecko.css);</style>"); --></script>

<script type="text/javascript" src="../../../../../../../extension/ezdoc/design/doc/javascripts/mainmenu-hover.js"></script>
<script type="text/javascript" src="../../../../../../../extension/ezdoc/design/doc/javascripts/dropdownmenu.js"></script>
<script type="text/javascript" src="../../../../../../../extension/ezdoc/design/doc/javascripts/ezno-searchbox.js"></script>
                                              
    <title>Improved shipping handling / Features / 5.x / Technical manual / Exponential / Documentation - Doc</title>

    
    
    
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

            <meta http-equiv="Content-language" content="en-GB" />

    
                <meta name="author" content="eZ systems" />
                    <meta name="copyright" content="eZ systems" />
                    <meta name="description" content="Exponential Documentation" />
                    <meta name="keywords" content="Exponential, documentation, manual, reference, eZ systems" />
        
    <meta name="generator" content="Exponential" />
    <link rel="Home" href="../../../../../../../doc_hidden.html" title="Doc front page" />
<link rel="Search" href="../../../../../../content/advancedsearch.html" title="Search Doc" />
<link rel="Shortcut icon" href="../../../../../../../extension/ezdoc/design/doc/images/favicon.ico" type="image/x-icon" />

</head>
<body onload="initDocSearch();menuInit();">

<!-- Complete page area: START -->
<div id="page">


    <div class="topmenu-anchor"></div>
    <div id="topmenu-bg">
	    <div id="logo" class="container_12">

    <div class="grid_3">
        <a href="https://exponential.doc.exponential.earth/Exponential/" title="Exponential Platform, CXM &amp; CMS">
            <img src="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/images/exponential.png"
                 alt="" height="45px"/>
        </a>
    </div>

    <div class="grid_9">
                <div class="topmenu-design">
	<!-- Top menu content: START -->
	<div id="topmenu-firstlevel-position">
	<ul id="topmenu-firstlevel" class="sf-menu sf-js-enabled sf-shadow">
		
		
		        </ul>
    </div>
        <!-- Top menu content: END -->
</div>        </div>
</div>    </div>


<div id="page-content-position"><div id="page-content-position-inner"><div id="page-content">

<!-- Path area: START -->
<div id="path">

<div id="page-width4">
<h2 class="hide">Path</h2>

<!-- Path content: START -->
<p> <a href="https://exponential.doc.exponential.earth/">7x</a> /
                        <a href="../../../../../../../doc_hidden.html">documentation</a>
        
                        /
                            <a href="../../../../../../Exponential.html">exponential</a>
        
                        /
                            <a href="../../../../../Technical-manual.html">technical manual</a>
        
                        /
                            <a href="../../../../5.html">5.x</a>
        
                        /
                            <a href="../../../Features.html">features</a>
        
                        /
                            improved shipping handling
        
            </p>
<!-- Path content: END -->

</div>

</div>
<!-- Path area: END -->

<hr class="hide" />

<!-- Main area: START -->
                                    <div id="ezp5disclaimer">
                <p><strong style="color: red">Caution:</strong> This documentation is for <strong>Exponential</strong>, from version 3.x to 6.x.<br/>
                For 5.x documentation covering <em>Platform</em> see <a href="../../../../../../../display/MAIN/eZ%2bDocumentation%2bCenter.html">eZ Documentation Center</a>, for difference between <em>legacy</em> and <em>Platform</em> see <a href="../../../../../../../pages/viewpage0139.html?pageId=11403666">5.x Architecture overview</a>.</p>
            </div>
            
<div id="page-width5">
<div id="main" class="float-break">


<div class="template-design area-docmenu-normal">
<div class="template-module">
<div class="template-object">
<div id="contentmenu">
                        <div class="attribute-heading"><h2 class="bullet"><a href="../../../../5.html">Table of contents</a></h2></div>
<div class="boxcontent">

<map id="contentstructure">

    
    
</map>

</div>            
</div>
</div>
</div>
</div>
<div class="area-docmain-normal">
<div class="template-design">
<div class="template-module content-view-full">
<div class="template-object">

<div class="attribute-heading">
<h1>Improved shipping handling</h1>
</div>

 <p>Exponential 3.8 makes it possible to define custom shipping options for your webshop (e.g. the cost of shipping may depend on the product properties). This could be done by implementing a <i>shipping handler</i> i.e. PHP class providing a mechanism that keeps shipping information for a product collection (basket or order) and calculates the cost of shipping for it. Exponential does not include any built-in shipping handlers so you will need to extend the system by creating your own shipping handler in order to add shipping options for your webshop. Using two or more shipping handlers at the same time is not supported (within one siteaccess). The shipping handler to use must be specified in the &quot;Handler&quot; INI setting described in the &quot;<a href="#ini_settings" target="_self">INI settings</a>&quot; subsection.</p> <p>When a user is viewing a product page, no shipping cost will be displayed and included into product price. After adding some products to the basket the system will calculate their shipping cost that will be shown under the list of items and included into order total. A shipping handler returns not only shipping cost but also shipping options summary and a link to the shipping management interface where shipping options can be modified. This information will be displayed in the basket together with the shipping cost. The system will also show shipping cost and shipping options summary when asking a user to confirm his/her order and in the order view interface for site administrators. <a name="ini_settings"></a>
 </p>  <a name="eztoc132509_1" id="eztoc132509_1"></a><h2>INI settings</h2> <p>The &quot;[ShippingSettings]&quot; section of the &quot;settings/shop.ini&quot; configuration file defines the shipping handler that will be used for calculating the cost of shipping for your products. Under this section, the following settings can be specified: </p> 
<ul>
 <li><div> The &quot;Handler&quot; setting specifies the shipping handler that will be used. </div></li> <li><div> The &quot;RepositoryDirectories[]&quot; array specifies the directories where eZ publish will search for built-in shipping handlers. </div></li> <li><div> The &quot;ExtensionDirectories[]&quot; array specifies the extension directories where eZ publish will search for additional shipping handlers. By default eZ publish will search in the &quot;shippinghandlers&quot; subdirectory inside your extension. </div></li> 
</ul>
  <a name="eztoc132509_1_1" id="eztoc132509_1_1"></a><h3>Example 1</h3> <p>The following lines can be specified under the &quot;[ShippingSettings]&quot; section of the &quot;shop.ini&quot; configuration file: </p><pre class="wordwrap"><span class="line">[ShippingSettings]</span>
<span class="line">Handler=ezcustom</span>
<span class="line">RepositoryDirectories[]=kernel/classes/shippinghandlers</span>
</pre> <p>These settings will instruct Exponential to use the shipping handler located at &quot;kernel/classes/shippinghandlers/ezcustomshippinghandler.php&quot;.</p>   <a name="eztoc132509_1_2" id="eztoc132509_1_2"></a><h3>Example 2</h3> <p>If you have an extension &quot;myextension&quot; that includes a shipping handler &quot;mycost&quot;, you can put the following lines into an override for the &quot;shop.ini&quot; configuration file: </p><pre class="wordwrap"><span class="line">[ShippingSettings]</span>
<span class="line">Handler=mycost</span>
<span class="line">ExtensionDirectories[]=myextension</span>
</pre> <p>or </p><pre class="wordwrap"><span class="line">[ShippingSettings]</span>
<span class="line">Handler=mycost</span>
<span class="line">RepositoryDirectories[]=extension/myextension/shippinghandlers</span>
</pre> <p>These settings will instruct Exponential to use the VAT handler located at &quot;extension/myextension/shippinghandlers/mycostshippinghandler.php&quot;.</p>    <a name="eztoc132509_2" id="eztoc132509_2"></a><h2>Creating new shipping handlers</h2> <p>This section reveals some helpful tips for those developers who want to create a new shipping handler (only for people who are familiar with PHP). Please note that it is not recommended to modify the Exponential kernel and thus you should implement it as an extension.</p>  <a name="eztoc132509_2_3" id="eztoc132509_2_3"></a><h3>Implementation details</h3> <p>A shipping handler is a file that contains a class implementing the following methods: </p><pre class="wordwrap copytoclipboard"><span class="line">/**</span>
<span class="line">* Invoked to get shipping information for given product collection.</span>
<span class="line">* \public</span>
<span class="line">* \static</span>
<span class="line">*/</span>
<span class="line">function getShippingInfo( $productCollectionID );</span>
<span class="line">&nbsp;</span>
<span class="line">/*</span>
<span class="line">* Invoked when shopping basket contents is changed</span>
<span class="line">* to update shipping info/cost appropriately.</span>
<span class="line">* \public</span>
<span class="line">* \static</span>
<span class="line">*/</span>
<span class="line">function updateShippingInfo( $productCollectionID );</span>
<span class="line">&nbsp;</span>
<span class="line">/**</span>
<span class="line">* Invoked when the associated product collection is removed</span>
<span class="line">* to clean up shipping information.</span>
<span class="line">* \public</span>
<span class="line">* \static</span>
<span class="line">*/</span>
<span class="line">function purgeShippingInfo( $productCollectionID );</span>
</pre><!--[if IE]>
<p class="copytoclipboard"><img src="/extension/ezdoc/design/doc/images/copytoclipboard.gif" height="16" width="16" alt="Copy to clipboard" title="Copy to clipboard" onclick="window.clipboardData.setData( 'text', '/**\r\n* Invoked to get shipping information for given product collection.\r\n* \public\r\n* \static\r\n*/\r\nfunction getShippingInfo( $productCollectionID );\r\n\r\n/*\r\n* Invoked when shopping basket contents is changed\r\n* to update shipping info/cost appropriately.\r\n* \public\r\n* \static\r\n*/\r\nfunction updateShippingInfo( $productCollectionID );\r\n\r\n/**\r\n* Invoked when the associated product collection is removed\r\n* to clean up shipping information.\r\n* \public\r\n* \static\r\n*/\r\nfunction purgeShippingInfo( $productCollectionID );' ); return false;" /></p>
<![endif]--> <p>A handler is called via eZShippingManager class that has the same methods. </p><pre class="wordwrap"><span class="line">$shippingInfo = eZShippingManager::getShippingInfo( $productCollection );</span>
</pre> <p>All that getShippingInfo() method does is invoking getShippingInfo() method of the shipping handler that is specified in the &quot;Handler&quot; INI setting. This method returns shipping information for a given product collection as a hash containing the following elements: </p><table class="renderedtable" cellpadding="2" cellspacing="0">
 
<tr>
 <th >   <p>Name</p> 
  </th> <th >   <p>Type</p> 
  </th> <th >   <p>Description</p> 
  </th> 
</tr>
 
<tr>
 <td valign="top" style="vertical-align: top">   <p>description</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>string</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>Shipping options summary.</p> 
  </td>
 
</tr>
 
<tr>
 <td valign="top" style="vertical-align: top">   <p>cost</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>integer</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>Shipping cost for given set of products.</p> 
  </td>
 
</tr>
 
<tr>
 <td valign="top" style="vertical-align: top">   <p>management_link</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>string</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>Link to the shipping management interface where shipping options can be modified.</p> 
  </td>
 
</tr>
 
</table>
 <p>The next subsection explains how you can implement your own shipping handler.</p>   <a name="eztoc132509_2_4" id="eztoc132509_2_4"></a><h3>Creating your own handler</h3> <p>The following text describes the implementation of a trivial shipping handler for demonstration purposes. </p> 
<ol>
 <li><div> Create the following subdirectories in the &quot;extension&quot; directory of your Exponential installation: 
<ul>
 <li><div> myextension </div></li> <li><div> myextension/settings </div></li> <li><div> myextension/shippinghandlers </div></li> 
</ul>
  </div></li> <li><div> Create a file called &quot;mycostshippinghandler.php&quot; in the &quot;myextension/shippinghandlers/&quot; directory (this file must contain a PHP class called &quot;MyCostShippingHandler&quot;) and add the following lines into it: <pre class="wordwrap copytoclipboard"><span class="line">&lt;?php</span>
<span class="line">class MyCostShippingHandler</span>
<span class="line">{</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;function getShippingInfo( $productCollectionID )</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return array(</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'description' =&gt; 'Manual',</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'cost' =&gt; 10,</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'management_link' =&gt; '/shop/basket/' // dummy</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;function purgeShippingInfo( $productCollectionID )</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// nothing to purge</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;function updateShippingInfo( $productCollectionID )</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// nothing to update</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<span class="line">}</span>
<span class="line">?&gt;</span>
</pre><!--[if IE]>
<p class="copytoclipboard"><img src="/extension/ezdoc/design/doc/images/copytoclipboard.gif" height="16" width="16" alt="Copy to clipboard" title="Copy to clipboard" onclick="window.clipboardData.setData( 'text', '&lt;?php\r\nclass MyCostShippingHandler\r\n{\r\n    function getShippingInfo( $productCollectionID )\r\n    {\r\n        return array(\r\n        \'description\' =&gt; \'Manual\',\r\n        \'cost\' =&gt; 10,\r\n        \'management_link\' =&gt; \'/shop/basket/\' // dummy\r\n        );\r\n    }\r\n    function purgeShippingInfo( $productCollectionID )\r\n    {\r\n        // nothing to purge\r\n    }\r\n    function updateShippingInfo( $productCollectionID )\r\n    {\r\n        // nothing to update\r\n    }\r\n}\r\n?&gt;' ); return false;" /></p>
<![endif]-->  </div></li> <li><div> Create a file called &quot;shop.ini.append.php&quot; in the &quot;myextension/settings&quot; directory and add the following lines into it: <pre class="wordwrap"><span class="line">[ShippingSettings]</span>
<span class="line">Handler=mycost</span>
<span class="line">ExtensionDirectories[]=myextension</span>
</pre>  </div></li> <li><div> To activate your extension in Exponential, log in to your Exponential administration interface, click on the &quot;Setup&quot; tab, and then click &quot;Extensions&quot; on the left. You will see the list of available extensions. Select the &quot;myextension&quot; item and click the &quot;Apply changes&quot; button. </div></li> 
</ol>
 <p>This will make the system add the fixed cost of shipping to any set of products being purchased from your site.</p> <p>If you need more complicated shipping options, you can try to use the advanced example from <a href="http://ez.no/community/contribs/examples/sample_shipping_handler" target="_self">http://ez.no/community/contribs/examples/sample_shipping_handler</a> or develop your own shipping handler.</p>  

<div class="break"></div><div class="pageinfo float-break">
<div class="created">


<p><label>Written by:</label>Svitlana Shatokhina&nbsp;(31/05/2006 10:47 am)</p>
</div>
<div class="modified">
<p><label>Last updated by:</label>Geir Arne Waaler&nbsp;(13/09/2010 1:57 pm)</p>
</div></div>
<hr class="hide" />

</div>
</div>
</div>

<div id="comments" class="class-comment">
<div class="content-view-children">

<h1>Comments</h1>
<div id="comments-content">
<ul>    <li class="comment-bglight"><div class="padding">
    <div class="content-view-line">
<div class="class-comment">

<form method="post" action="https://doc.ez.no/doc_hidden/content/action">

<div id="comment27906" class="attribute-heading">
<h2>is ile to select shipping method from user site?</h2>
</div>

<div class="attribute-byline float-break">
    <p class="date">Friday 16 June 2006 1:30:46 pm</p>
    <p class="author">vytis</p>
</div>

<div class="attribute-short">
for example, options:<br />
- normal delivery   <br />
- fast delivery adds 100%<br />
- by post adds 10 EUR
</div>

<input class="button" type="submit" name="NewButton" value="Reply" />
<input type="hidden" name="NodeID" value="27906" />
<input type="hidden" name="ClassID" value="17" />
     
<input type="hidden" name="RedirectURIAfterPublish" value="hidden/Exponential/Technical-manual/5.x/Features/Improved-shipping-handling" />

</form>


</div>
</div>    </div></li></ul>
</div>
<div class="toolbar">

<form method="post" action="https://doc.ez.no/doc_hidden/content/action">
<input class="button" type="submit" name="NewButton" value="New comment" />
<input type="hidden" name="NodeID" value="27905" />
<input type="hidden" name="RedirectURIAfterPublish" value="Exponential/Technical-manual/5.x/Features/Improved-shipping-handling" />
<input type="hidden" name="ClassID" value="17" />
</form>
</div>

</div>
</div>

</div>
<!-- Main area content: END -->

</div>
</div>
<!-- Main area: END -->
<hr class="hide" />

</div></div></div>

        <div id="footer-bg">
        <div id="footer" class="container_12">

            <div class="grid_3">
                <img src="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/images/exponential.png" alt="exponential" />
                <div id="footer-copyright" class="grid_3 alpha omega">
                                    </div>
            </div>

            <div class="grid_6 middle">
                <div class="grid_6 alpha omega">
                    <div class="grid_3 alpha"><div></div></div>
                    <div class="grid_3 omega"><div></div></div>
                </div>
            </div>

            <div class="grid_3 right">
                <div class="contact-ez">
                        <a id="cta-contact" href="https://se7enx.com" title="Contact 7x!" class="btn-green btn--small">Contact 7x!</a>
                </div>

                <div class="adress"></div>
            </div>

        </div>
    </div>
<div id="footer-connect-bg">
    <div id="footer" class="container_12">
        <div id="footer-connect-copyright" class="grid_8 alpha omega">
            Copyright © 1998 - 2025 7x (except where otherwise noted). All rights reserved.
            <br/><br/>
            Powered by <a href="https://se7enx.com/exponential" title="Exponential CMS">The Exponential CMS</a>.<br />
        </div>

        <div id="footer-connect-social" class="grid_4 right">
            <a href="https://www.youtube.com/@ExponentialCMSInsights" class="youtube" target="_blank">YouTube</a>
            
            <a href="http://www.Linkedin.com/groups?gid=2759&amp;trk=myg_ugrp_ovr" class="Linkedin" target="_blank">Linkedin</a>
            <a href="https://www.Instagram.com/se7enxweb" class="Instagram" target="_blank">Instagram</a>
            <a href="https://twitter.com/se7enxweb" class="X" target="_blank">X</a>
        </div>


    </div>
</div>


</div>
<!-- Complete page area: END -->




<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-1VMV65H63V"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-1VMV65H63V');
</script>






</body>

<!-- Mirrored from doc.ez.no/doc_hidden/Exponential/Technical-manual/5.x/Features/Improved-shipping-handling/(language)/eng-GB by HTTrack Website Copier/3.x [XR&CO'2013], Wed, 01 Feb 2017 02:24:26 GMT -->
</html>

<!-- th[eZ] 20050804 -->
