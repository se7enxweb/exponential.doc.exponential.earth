
<!DOCTYPE html>
<html lang="en-US">

<!-- Mirrored from doc.ez.no/doc_hidden/Exponential/Technical-manual/3.6/Reference/Template-functions/Miscellaneous/cache-block by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 13:17:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>

<link rel="stylesheet" type="text/css" href="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/stylesheets/core.css" /><link rel="stylesheet" type="text/css" href="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/stylesheets/header-footer.css" /><link rel="stylesheet" type="text/css" href="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/stylesheets/header-footer-lookfeel.css" /><link rel="stylesheet" type="text/css" href="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/stylesheets/pagelayout.css" /><link rel="stylesheet" type="text/css" href="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/stylesheets/buttons.css" /><link rel="stylesheet" type="text/css" href="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/stylesheets/960.css" /><link rel="stylesheet" type="text/css" href="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/stylesheets/superfish.css" /><script type="text/javascript" src="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/javascript/jquery-1.6.3.min.js" charset="utf-8"></script><script type="text/javascript" src="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/javascript/superfish.js" charset="utf-8"></script><script type="text/javascript" src="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/javascript/jquery.popmenu.min.js" charset="utf-8"></script>
<style type="text/css">
    @import url(../../../../../../../extension/ezdoc/design/doc/stylesheets/core.css);
    @import url(../../../../../../../extension/ezdoc/design/doc/stylesheets/classes.css);
    @import url(../../../../../../../extension/ezdoc/design/doc/stylesheets/doc.css);
    @import url(../../../../../../../extension/ezdoc/design/doc/stylesheets/print.css) print;</style>

<link type="text/css" rel="stylesheet" href="../../../../../../../extension/ezdoc/design/doc/stylesheets/print.css" media="print" />

<!-- IE conditional comments; for bug fixes for different IE versions -->
<!--[if IE 5]>     <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie5.css);    </style>     <![endif]-->
<!--[if lte IE 6]> <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6lte.css); </style>     <![endif]-->
<!--[if lte IE 6]> <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6lte-doc.css); </style> <![endif]-->
<!--[if IE 6]>     <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6.css);    </style>     <![endif]-->

<!-- Load special stylesheet (if necessary) for newer Netscape decendants, Mozilla and Firefox, using the Gecko renderer -->
<script type="text/javascript"><!-- if ((navigator.userAgent.indexOf("Gecko") != -1)&&(navigator.userAgent.indexOf("KHTML") == -1)) document.write("<style type=\"text/css\">@import url(/extension/ezdoc/design/doc/stylesheets/gecko.css);</style>"); --></script>

<script type="text/javascript" src="../../../../../../../extension/ezdoc/design/doc/javascripts/mainmenu-hover.js"></script>
<script type="text/javascript" src="../../../../../../../extension/ezdoc/design/doc/javascripts/dropdownmenu.js"></script>
<script type="text/javascript" src="../../../../../../../extension/ezdoc/design/doc/javascripts/ezno-searchbox.js"></script>
                                                          
    <title>cache-block / Miscellaneous / Template functions / Reference / 3.6 / Technical manual / Exponential / Documentation - Doc</title>

    
    
    
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

            <meta http-equiv="Content-language" content="en-GB" />

    
                <meta name="author" content="eZ systems" />
                    <meta name="copyright" content="eZ systems" />
                    <meta name="description" content="Exponential Documentation" />
                    <meta name="keywords" content="Exponential, documentation, manual, reference, eZ systems" />
        
    <meta name="generator" content="Exponential" />
    <link rel="Home" href="../../../../../../../doc_hidden.html" title="Doc front page" />
<link rel="Search" href="../../../../../../content/advancedsearch.html" title="Search Doc" />
<link rel="Shortcut icon" href="../../../../../../../extension/ezdoc/design/doc/images/favicon.ico" type="image/x-icon" />

</head>
<body onload="initDocSearch();menuInit();">

<!-- Complete page area: START -->
<div id="page">


    <div class="topmenu-anchor"></div>
    <div id="topmenu-bg">
	    <div id="logo" class="container_12">

    <div class="grid_3">
        <a href="https://exponential.doc.exponential.earth/Exponential/" title="Exponential Platform, CXM &amp; CMS">
            <img src="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/images/exponential.png"
                 alt="" height="45px"/>
        </a>
    </div>

    <div class="grid_9">
                <div class="topmenu-design">
	<!-- Top menu content: START -->
	<div id="topmenu-firstlevel-position">
	<ul id="topmenu-firstlevel" class="sf-menu sf-js-enabled sf-shadow">
		
		
		        </ul>
    </div>
        <!-- Top menu content: END -->
</div>        </div>
</div>    </div>


<div id="page-content-position"><div id="page-content-position-inner"><div id="page-content">

<!-- Path area: START -->
<div id="path">

<div id="page-width4">
<h2 class="hide">Path</h2>

<!-- Path content: START -->
<p> <a href="https://exponential.doc.exponential.earth/">7x</a> /
                        <a href="../../../../../../../doc_hidden.html">documentation</a>
        
                        /
                            <a href="../../../../../../Exponential.html">exponential</a>
        
                        /
                            <a href="../../../../../Technical-manual.html">technical manual</a>
        
                        /
                            <a href="../../../../3-5.html">3.6</a>
        
                        /
                            <a href="../../../Reference.html">reference</a>
        
                        /
                            <a href="../../Template-functions.html">template functions</a>
        
                        /
                            <a href="../Miscellaneous.html">miscellaneous</a>
        
                        /
                            cache-block
        
            </p>
<!-- Path content: END -->

</div>

</div>
<!-- Path area: END -->

<hr class="hide" />

<!-- Main area: START -->
                                    <div id="ezp5disclaimer">
                <p><strong style="color: red">Caution:</strong> This documentation is for <strong>Exponential</strong>, from version 3.x to 6.x.<br/>
                For 5.x documentation covering <em>Platform</em> see <a href="../../../../../../../display/MAIN/eZ%2bDocumentation%2bCenter.html">Exponential Platform Documentation</a>, for difference between <em>legacy</em> and <em>Platform</em> see <a href="../../../../../../../pages/viewpage0139.html?pageId=11403666">5.x Architecture overview</a>.</p>
            </div>
            
<div id="page-width5">
<div id="main" class="float-break">


<div class="template-design area-docmenu-normal">
<div class="template-module">
<div class="template-object">
<div id="contentmenu">
                        <div class="attribute-heading"><h2 class="bullet"><a href="../../../../3-5.html">Table of contents</a></h2></div>
<div class="boxcontent">

<map id="contentstructure">

    
    
</map>

</div>            
</div>
</div>
</div>
</div>
<div class="area-docmain-normal">
<div class="template-design">
<div class="template-module content-view-full">
<div class="template-object">

<div class="attribute-heading">
<h1>cache-block</h1>
</div>
<h3>Summary</h3>
Caches the contents of a template block.<h3>Usage</h3>
<pre>{cache-block [ keys=keys                      ]
             [ expiry=expiry                  ]
             [ ignore_content_expiry          ]
             [ subtree_expiry=subtree_expiry  ]}

...

{/cache-block}
</pre><h3>Parameters</h3><table class="list" cellspacing="0">
<tr><th>Name</th><th>Type</th><th>Description</th><th>Required</th></tr><tr class="bglight">
        <td>keys</td>
        <td>string or array</td>
        <td>Cache key(s) - either as a string or an array of strings.</td>
        <td>No.</td>
    </tr><tr class="bgdark">
        <td>expiry</td>
        <td>integer</td>
        <td>The number of seconds that the cache should be allowed to live.</td>
        <td>No.</td>
    </tr><tr class="bglight">
        <td>ignore_content_expiry</td>
        <td>-</td>
        <td>Disables cache expiry when new content is published.</td>
        <td>No.</td>
    </tr><tr class="bgdark">
        <td>subtree_expiry</td>
        <td>string</td>
        <td>A subtree that expires the cache block.</td>
        <td>No.</td>
    </tr></table><h3>Description</h3>
 <p>This solution makes it possible to reduce the processing time of the main template (&quot;pagelayout.tpl&quot;), which often contains a lot of dynamic elements. It can be used to instruct the system to store and reuse cached blocks of template code based on different conditions.</p> <p>A typical example of where the &quot;cache-block&quot; mechanism should be used is the main menu of a site. The menu is often dynamically generated by fetching and displaying information about some nodes. It is usually the same for almost every page, therefore it should not be generated from scratch every time Exponential is instructed to render a page. This is where the &quot;cache-block&quot; solution comes in. In this particular scenario, it can be used to cache the contents of the main menu and thus reduce the processing time for each page load.</p>    <a name="eztoc4744_0_0_1" id="eztoc4744_0_0_1"></a><h4>Cache keys</h4> <p>The &quot;keys&quot; parameter can be used to define the uniqueness of a cache block. It must be either a string or an array of strings. By default, Exponential uses the name of the template and the position of the cache block as keys. This means that if the cache block is common for all cases that use the given template (normally &quot;pagelayout.tpl&quot;), there is no need to define any keys. However, the &quot;keys&quot; parameter is quite handy when it comes to relating a cache block to something specific (for example URLs, users, etc.). Please refer to the examples below for a demonstration of how this parameter can be used.</p>       <a name="eztoc4744_0_0_2" id="eztoc4744_0_0_2"></a><h4>Time based expiration</h4> <p>The &quot;expiry&quot; parameter makes it possible to manually specify how long a cache block should live (number of seconds). The default expiration time is two hours (this is hardcoded in the system and can not be configured). If an object is published, all blocks will automatically be expired. A value of zero will produce a cache block that will never expire.</p>       <a name="eztoc4744_0_0_3" id="eztoc4744_0_0_3"></a><h4>Content expiration</h4> <p>By default, all cache blocks will be expired whenever an object is published. If the &quot;ignore_content_expiry&quot; parameter is used, the cache block will not be expired when an object is published. However, it will still expire after two hours unless an alternative time is specified using the &quot;expiry&quot; parameter.</p>       <a name="eztoc4744_0_0_4" id="eztoc4744_0_0_4"></a><h4>Subtree expiration</h4> <p>The &quot;subtree_expiry&quot; parameter can be used to bind the expiration of a cache block to a certain part of the content node tree. When this is done, the block will expire if an object is published below the given subtree instead of the entire tree. In addition, it will also expire after two hours unless an alternative time is specified using the &quot;expiry&quot; parameter.</p>       <a name="eztoc4744_0_0_5" id="eztoc4744_0_0_5"></a><h4>Tips and tricks</h4> <p>Since cache blocks themselves also produce some overhead, too many blocks may lead to longer response times than expected. Because of this, only a few cache blocks should be used; and their keys should be as unique as possible. It is often very efficient to have two large cache blocks. One which caches all header information (title, path, etc.) and one which will take care of the bottom/footer of the page. This solution combined with a nested cache block used for the main menu (or several menus, etc.) often leads to good results. Please note that although the cache block mechanism was designed to minimize the processing of the main template, it may also be used in view templates. For example, it is possible to cache a part of a view - this is typically useful when the viewcache is frequently deleted. Another scenario is when the view cache is turned off and there is a need to create a cache on a per-user basis.</p>   <h3>Examples</h3>
    <a name="eztoc4745_0_0_1" id="eztoc4745_0_0_1"></a><h4>Example 1</h4> <pre class="wordwrap copytoclipboard"><span class="line">...</span>
<span class="line">{include uri='design:page_toppath.tpl'}</span>
<span class="line">&nbsp;</span>
<span class="line">{cache-block}</span>
<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;{include uri='design:menu.tpl'}</span>
<span class="line">{/cache-block}</span>
<span class="line">&nbsp;</span>
<span class="line">{$module_result.content}</span>
<span class="line">&nbsp;</span>
<span class="line">{include uri='design:page_bottom.tpl'}</span>
<span class="line">...</span>
</pre><!--[if IE]>
<p class="copytoclipboard"><img src="/extension/ezdoc/design/doc/images/copytoclipboard.gif" height="16" width="16" alt="Copy to clipboard" title="Copy to clipboard" onclick="window.clipboardData.setData( 'text', '...\r\n{include uri=\'design:page_toppath.tpl\'}\r\n\r\n{cache-block}\r\n    {include uri=\'design:menu.tpl\'}\r\n{/cache-block}\r\n\r\n{$module_result.content}\r\n\r\n{include uri=\'design:page_bottom.tpl\'}\r\n...' ); return false;" /></p>
<![endif]--> <p>This example demonstrates how the cache block solution can be used to cache the contents of a menu (which will be the same for all pages) in the pagelayout.</p>       <a name="eztoc4745_0_0_2" id="eztoc4745_0_0_2"></a><h4>Example 2</h4> <pre class="wordwrap"><span class="line">{cache-block expiry=130}</span>
<span class="line">...</span>
<span class="line">{/cache-block}</span>
</pre> <p>This example demonstrates how to create a cache block that will expire after 130 seconds.</p>       <a name="eztoc4745_0_0_3" id="eztoc4745_0_0_3"></a><h4>Example 3</h4> <pre class="wordwrap"><span class="line">{cache-block keys=$uri_string}</span>
<span class="line">...</span>
<span class="line">{/cache-block}</span>
</pre> <p>This example demonstrates how to create a cache block that will be unique for every URL.</p>       <a name="eztoc4745_0_0_4" id="eztoc4745_0_0_4"></a><h4>Example 4</h4> <pre class="wordwrap"><span class="line">{cache-block keys=array( $uri_string, $current_user.contentobject_id )}</span>
<span class="line">...</span>
<span class="line">{/cache-block}</span>
</pre> <p>This example demonstrates how to create a cache block that is unique for each URL and each user.</p>       <a name="eztoc4745_0_0_5" id="eztoc4745_0_0_5"></a><h4>Example 5</h4> <pre class="wordwrap"><span class="line">{cache-block ignore_content_expiry}</span>
<span class="line">...</span>
<span class="line">{/cache-block}</span>
</pre> <p>This example demonstrates how to create a cache block that will not expire when new content is published. However, it will expire every second hour unless an alternative &quot;time to live&quot; value is specified using the &quot;expiry&quot; parameter.</p>       <a name="eztoc4745_0_0_6" id="eztoc4745_0_0_6"></a><h4>Example 6</h4> <pre class="wordwrap"><span class="line">{cache-block subtree_expiry='products/'}</span>
<span class="line">...</span>
<span class="line">{/cache-block}</span>
</pre> <p>This example demonstrates how to create a cache block that will expire only if something is modified within the &quot;products/&quot; subtree, for example if a product is modified or a new product is published.</p>   

<div class="break"></div><div class="pageinfo float-break">
<div class="created">


<p><label>Written by:</label>Balazs Halasy&nbsp;(06/02/2004 1:19 pm)</p>
</div>
<div class="modified">
<p><label>Last updated by:</label>Balazs Halasy&nbsp;(18/09/2007 4:56 pm)</p>
</div></div>
<hr class="hide" />

</div>
</div>
</div>

<div id="comments" class="class-comment">
<div class="content-view-children">

<h1>Comments</h1>
<p>There are no comments.</p>
<div class="toolbar">

<form method="post" action="https://doc.ez.no/doc_hidden/content/action">
<input class="button" type="submit" name="NewButton" value="New comment" />
<input type="hidden" name="NodeID" value="942" />
<input type="hidden" name="RedirectURIAfterPublish" value="Exponential/Technical-manual/3.6/Reference/Template-functions/Miscellaneous/cache-block" />
<input type="hidden" name="ClassID" value="17" />
</form>
</div>

</div>
</div>

</div>
<!-- Main area content: END -->

</div>
</div>
<!-- Main area: END -->
<hr class="hide" />

</div></div></div>

        <div id="footer-bg">
        <div id="footer" class="container_12">

            <div class="grid_3">
                <img src="https://exponential.doc.exponential.earth/extension/ezdoc/design/doc/images/exponential.png" alt="exponential" />
                <div id="footer-copyright" class="grid_3 alpha omega">
                                    </div>
            </div>

            <div class="grid_6 middle">
                <div class="grid_6 alpha omega">
                    <div class="grid_3 alpha"><div></div></div>
                    <div class="grid_3 omega"><div></div></div>
                </div>
            </div>

            <div class="grid_3 right">
                <div class="contact-ez">
                        Get the support you need faster! Ask the experts at 7x. <a id="cta-contact" href="https://se7enx.com/contact" title="Contact 7x!" class="btn-green btn--small">Call or Contact 7x Today!</a>
                </div>

                <div class="adress"></div>
            </div>

        </div>
    </div>
<div id="footer-connect-bg">
    <div id="footer" class="container_12">
        <div id="footer-connect-copyright" class="grid_8 alpha omega">
            Copyright © 1998 - 2025 <a href="https://se7enx.com">7x</a> (except where otherwise noted). All rights reserved.
            <br/><br/>
            Powered by <a href="https://se7enx.com/exponential" title="Exponential CMS">The Exponential CMS</a> and the groundbreaking <a href="https://exponential.earth">Exponential</a> <a href="https://share.exponential.earth">Community</a>.<br />
        </div>

        <div id="footer-connect-social" class="grid_4 right"> <b>Find Exponential on Your Favorite Social Network:</b>&nbsp; 
            <a href="https://www.youtube.com/@ExponentialCMSInsights" class="youtube" target="_blank">YouTube</a>,

            <a href="http://www.Linkedin.com/groups?gid=2759&amp;trk=myg_ugrp_ovr" class="Linkedin" target="_blank">Linkedin</a>,
            <a href="https://www.Instagram.com/se7enxweb" class="Instagram" target="_blank">Instagram</a>,
            <a href="http://facebook.exponential.earth" class="Facebook" target="_blank">Facebook</a>,
            <a href="https://bsky.app/profile/exponentialcms.bsky.social" class="BlueSky" target="_blank">BlueSky</a>,
            <a href="https://twitter.com/se7enxweb" class="X" target="_blank">X</a>
        </div>

    </div>
</div>


</div>
<!-- Complete page area: END -->




<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-1VMV65H63V"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-1VMV65H63V');
</script>






</body>

<!-- Mirrored from doc.ez.no/doc_hidden/Exponential/Technical-manual/3.6/Reference/Template-functions/Miscellaneous/cache-block by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 13:17:47 GMT -->
</html>

<!-- th[eZ] 20050804 -->
