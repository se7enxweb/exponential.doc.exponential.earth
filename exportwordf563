Message-ID: <1135420324.2790.1485850807393.JavaMail.confluence@ip-10-127-227-164>
Subject: Exported From Confluence
MIME-Version: 1.0
Content-Type: multipart/related; 
	boundary="----=_Part_2789_487265362.1485850807393"

------=_Part_2789_487265362.1485850807393
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
Content-Location: file:///C:/exported.html

<html xmlns:o=3D'urn:schemas-microsoft-com:office:office'
      xmlns:w=3D'urn:schemas-microsoft-com:office:word'
      xmlns:v=3D'urn:schemas-microsoft-com:vml'
      xmlns=3D'urn:w3-org-ns:HTML'>
<head>
    <meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dutf-8=
">
    <title>Upgrading from 5.4.x and 2014.11 to 16.xx</title>
    <!--[if gte mso 9]>
    <xml>
        <o:OfficeDocumentSettings>
            <o:TargetScreenSize>1024x640</o:TargetScreenSize>
            <o:PixelsPerInch>72</o:PixelsPerInch>
            <o:AllowPNG/>
        </o:OfficeDocumentSettings>
        <w:WordDocument>
            <w:View>Print</w:View>
            <w:Zoom>90</w:Zoom>
            <w:DoNotOptimizeForBrowser/>
        </w:WordDocument>
    </xml>
    <![endif]-->
    <style>
                <!--
        @page Section1 {
            size: 8.5in 11.0in;
            margin: 1.0in;
            mso-header-margin: .5in;
            mso-footer-margin: .5in;
            mso-paper-source: 0;
        }

        td {
            page-break-inside: avoid;
        }

        tr {
            page-break-after: avoid;
        }

        div.Section1 {
            page: Section1;
        }

        /* Confluence print stylesheet. Common to all themes for print medi=
a */
/* Full of !important until we improve batching for print CSS */

@media print {
    #main {
        padding-bottom: 1em !important; /* The default padding of 6em is to=
o much for printouts */
    }

    body {
        font-family: Arial, Helvetica, FreeSans, sans-serif;
        font-size: 10pt;
        line-height: 1.2;
    }

    body, #full-height-container, #main, #page, #content, .has-personal-sid=
ebar #content {
        background: #fff !important;
        color: #000 !important;
        border: 0 !important;
        width: 100% !important;
        height: auto !important;
        min-height: auto !important;
        margin: 0 !important;
        padding: 0 !important;
        display: block !important;
    }

    a, a:link, a:visited, a:focus, a:hover, a:active {
        color: #000;
    }

    #content h1,
    #content h2,
    #content h3,
    #content h4,
    #content h5,
    #content h6 {
        font-family: Arial, Helvetica, FreeSans, sans-serif;
        page-break-after: avoid;
    }

    pre {
        font-family: Monaco, "Courier New", monospace;
    }

    #header,
    .aui-header-inner,
    #navigation,
    #sidebar,
    .sidebar,
    #personal-info-sidebar,
    .ia-fixed-sidebar,
    .page-actions,
    .navmenu,
    .ajs-menu-bar,
    .noprint,
    .inline-control-link,
    .inline-control-link a,
    a.show-labels-editor,
    .global-comment-actions,
    .comment-actions,
    .quick-comment-container,
    #addcomment {
        display: none !important;
    }

    .comment .date::before {
        content: none !important; /* remove middot for print view */
    }

    h1.pagetitle img {
        height: auto;
        width: auto;
    }

    .print-only {
        display: block;
    }

    #footer {
        position: relative !important; /* CONF-17506 Place the footer at en=
d of the content */
        margin: 0;
        padding: 0;
        background: none;
        clear: both;
    }

    #poweredby {
        border-top: none;
        background: none;
    }

    #poweredby li.print-only {
        display: list-item;
        font-style: italic;
    }

    #poweredby li.noprint {
        display: none;
    }

    /* no width controls in print */
    .wiki-content .table-wrap,
    .wiki-content p,
    .panel .codeContent,
    .panel .codeContent pre,
    .image-wrap {
        overflow: visible !important;
    }

    /* TODO - should this work? */
    #children-section,
    #comments-section .comment,
    #comments-section .comment .comment-body,
    #comments-section .comment .comment-content,
    #comments-section .comment p {
        page-break-inside: avoid;
    }

    #page-children a {
        text-decoration: none;
    }

    /**
     hide twixies

     the specificity here is a hack because print styles
     are getting loaded before the base styles. */
    #comments-section.pageSection .section-header,
    #comments-section.pageSection .section-title,
    #children-section.pageSection .section-header,
    #children-section.pageSection .section-title,
    .children-show-hide {
        padding-left: 0;
        margin-left: 0;
    }

    .children-show-hide.icon {
        display: none;
    }

    /* personal sidebar */
    .has-personal-sidebar #content {
        margin-right: 0px;
    }

    .has-personal-sidebar #content .pageSection {
        margin-right: 0px;
    }
}
-->
    </style>
</head>
<body>
    <h1>Upgrading from 5.4.x and 2014.11 to 16.xx</h1>
    <div class=3D"Section1">
        <div class=3D"contentLayout2">=20
<div class=3D"columnLayout two-right-sidebar" data-layout=3D"two-right-side=
bar">=20
<div class=3D"cell normal" data-type=3D"normal">=20
<div class=3D"innerCell">=20
<div class=3D"attribute-heading">
<div class=3D"confluence-information-macro confluence-information-macro-war=
ning">
<p class=3D"title">Beta</p>
<span class=3D"aui-icon aui-icon-small aui-iconfont-error confluence-inform=
ation-macro-icon"></span>
<div class=3D"confluence-information-macro-body">
<p>Instructions and scripts provided here are open for testing and feedback=
, and for eZ Enterprise users eZ will take care about bugs over support, ho=
wever until 2017 when features like custom tags are in place, and community=
 provides feedback on how this works "in the wild", this will continue to b=
e labeled as beta.</p>
<p>Topics you should be aware of when planning an upgrade:</p>
<ul style=3D"list-style-type: square;">
<li><a href=3D"/display/DEVELOPER/Field+Types+reference">Field Types refere=
nce</a> for overview of Field Types that exists and not on eZ Platform</li>
<li>RichText Field Type capabilities, currently not covering:
<ul style=3D"list-style-type: square;">
<li><a href=3D"https://jira.ez.no/browse/EZP-25541" class=3D"external-link"=
 rel=3D"nofollow">Tables</a></li>
<li><a href=3D"https://jira.ez.no/browse/EZP-25357" class=3D"external-link"=
 rel=3D"nofollow">Custom Tags</a></li>
</ul></li>
<li>Symfony 2.8, this is also the case on later 5.4.x versions, but not the=
 first once including 2014.11</li>
<li>API changes, while we have a strict Backwards Compatibility focus, some=
 deprecated API features where removed, some changes where done to internal=
 parts of the system, and as planned Exponential legacy and legacy bridge wa=
s removed. See <a href=3D"https://github.com/ezsystems/exponential-kernel/blo=
b/v6.6.0/doc/bc/changes-6.0.md" class=3D"external-link" rel=3D"nofollow">ez=
publish-kernel:doc/bc/changes-6.0.md</a></li>
</ul>
</div>
</div>
<p><span style=3D"color: rgb(51,51,51);font-size: 14.0px;line-height: 1.428=
5715;"><br></span></p>
<p><span style=3D"color: rgb(51,51,51);font-size: 14.0px;line-height: 1.428=
5715;"><style type=3D"text/css">/*<![CDATA[*/
div.rbtoc1485850807308 {padding: 0px;}
div.rbtoc1485850807308 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1485850807308 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style></span></p>
<div class=3D"toc-macro rbtoc1485850807308">=20
<ul class=3D"toc-indentation">=20
<li><a href=3D"#Upgradingfrom5.4.xand2014.11to16.xx-NoteonPaths">Note on Pa=
ths</a></li>=20
<li><a href=3D"#Upgradingfrom5.4.xand2014.11to16.xx-Checkforrequirements">C=
heck for requirements</a></li>=20
<li><a href=3D"#Upgradingfrom5.4.xand2014.11to16.xx-Upgradesteps">Upgrade s=
teps</a>=20
<ul class=3D"toc-indentation">=20
<li><a href=3D"#Upgradingfrom5.4.xand2014.11to16.xx-Step1:ExtractlatesteZPl=
atform/Studio16.02.xinstallation">Step 1: Extract latest eZ Platform/Studio=
 16.02.x installation</a></li>=20
<li><a href=3D"#Upgradingfrom5.4.xand2014.11to16.xx-Step2:Moveovercodeandco=
nfig">Step 2: Move over code and config</a>=20
<ul class=3D"toc-indentation">=20
<li><a href=3D"#Upgradingfrom5.4.xand2014.11to16.xx-2.1.Code">2.1. Code</a>=
</li>=20
<li><a href=3D"#Upgradingfrom5.4.xand2014.11to16.xx-2.2.Composer">2.2. Comp=
oser</a>=20
<ul class=3D"toc-indentation">=20
<li><a href=3D"#Upgradingfrom5.4.xand2014.11to16.xx-2.2.1Moveoverownpackage=
s">2.2.1 Move over own packages</a></li>=20
<li><a href=3D"#Upgradingfrom5.4.xand2014.11to16.xx-2.2.2Temporarilyinstall=
XmlTextFieldType">2.2.2 Temporarily install XmlText Field Type</a></li>=20
</ul> </li>=20
<li><a href=3D"#Upgradingfrom5.4.xand2014.11to16.xx-2.3.Config">2.3. Config=
</a></li>=20
<li><a href=3D"#Upgradingfrom5.4.xand2014.11to16.xx-2.4.Bundles">2.4. Bundl=
es</a></li>=20
<li><a href=3D"#Upgradingfrom5.4.xand2014.11to16.xx-2.5Binaryfiles">2.5 Bin=
ary files</a></li>=20
<li><a href=3D"#Upgradingfrom5.4.xand2014.11to16.xx-2.6Re-applypermissionsa=
ndupdatecomposer">2.6 Re-apply permissions and update composer</a></li>=20
<li><a href=3D"#Upgradingfrom5.4.xand2014.11to16.xx-2.7RegisterEzSystemsEzP=
latformXmlTextFieldTypeBundle">2.7 Register&nbsp;EzSystemsEzPlatformXmlText=
FieldTypeBundle</a></li>=20
</ul> </li>=20
<li><a href=3D"#Upgradingfrom5.4.xand2014.11to16.xx-Step3:Upgradethedatabas=
e">Step 3: Upgrade the database</a>=20
<ul class=3D"toc-indentation">=20
<li><a href=3D"#Upgradingfrom5.4.xand2014.11to16.xx-3.1.ExecuteupdateSQL">3=
.1. Execute update SQL</a></li>=20
<li><a href=3D"#Upgradingfrom5.4.xand2014.11to16.xx-3.2.ExecuteXmlTextMigra=
tionscript">3.2. Execute XmlText Migration script</a></li>=20
<li><a href=3D"#Upgradingfrom5.4.xand2014.11to16.xx-3.3.MigratePagefieldtoL=
andingPage(eZStudioonly)">3.3. Migrate Page field to Landing Page (eZ Studi=
o only)</a></li>=20
</ul> </li>=20
<li><a href=3D"#Upgradingfrom5.4.xand2014.11to16.xx-Step4:Re-configurewebse=
rver&amp;proxy">Step 4: Re-configure web server &amp; proxy</a>=20
<ul class=3D"toc-indentation">=20
<li><a href=3D"#Upgradingfrom5.4.xand2014.11to16.xx-Varnish(optional)">Varn=
ish (optional)</a></li>=20
<li><a href=3D"#Upgradingfrom5.4.xand2014.11to16.xx-Webserverconfiguration"=
>Web server configuration</a></li>=20
</ul> </li>=20
<li><a href=3D"#Upgradingfrom5.4.xand2014.11to16.xx-Step5:Linkassets">Step =
5: Link assets</a></li>=20
</ul> </li>=20
</ul>=20
</div>
<p></p>
<div class=3D"confluence-information-macro confluence-information-macro-not=
e">
<span class=3D"aui-icon aui-icon-small aui-iconfont-warning confluence-info=
rmation-macro-icon"></span>
<div class=3D"confluence-information-macro-body">
<p>Instructions for upgrading from Exponential to eZ Platform and eZ Studio =
is in preview starting release <a href=3D"/display/DEVELOPER/eZ+Platform+16=
.02+Release+notes">16.02</a>. The status of the upgrade is:</p>
<ul>
<li>eZ Platform: <strong>XmlText to RichText migration</strong>: <em>In Bet=
a, and described below.</em></li>
<li>eZ Studio : <strong>Flow to Landing Page migration</strong>:<em> Schedu=
led for beta version with 16.04.</em></li>
</ul>
</div>
</div>
<p><span style=3D"color: rgb(51,51,51);font-size: 14.0px;line-height: 1.428=
5715;">&nbsp;</span></p>
<div class=3D"confluence-information-macro confluence-information-macro-not=
e">
<span class=3D"aui-icon aui-icon-small aui-iconfont-warning confluence-info=
rmation-macro-icon"></span>
<div class=3D"confluence-information-macro-body">
<p>If you are migrating from a legacy Exponential version, this page contain=
s the information you need. However, first have a look at an overview of th=
e process in <a href=3D"/display/DEVELOPER/Migration+from+eZ+Publish">Migra=
tion from Exponential</a>.</p>
</div>
</div>
<p><span style=3D"color: rgb(51,51,51);font-size: 14.0px;line-height: 1.428=
5715;">This section describes how to upgrade your existing &nbsp;Exponential=
 Platform&nbsp;&nbsp;5.4/2014.11 installation to eZ Platform and eZ Studio.=
 Make sure that you have a <u>working backup</u> of the site before you do =
the actual upgrade, and that the installation you are performing the upgrad=
e on is <u>offline</u>.</span></p>
</div>
<h2 id=3D"Upgradingfrom5.4.xand2014.11to16.xx-NoteonPaths">Note on Paths</h=
2>
<ul>
<li><em>&lt;old-ez-root&gt;/</em>: The root directory where the 5.4/2014.11=
 installation is located in, for example: "<em>/home/myuser/old_www</em>/" =
or "<em>/var/sites/ezp/</em>"<em><br></em></li>
<li><em>&lt;new-ez-root&gt;/</em>: The root directory where the installatio=
n is located in, for example: "<em>/home/myuser/new_www</em>/" or "<em>/var=
/sites/[ezplatform|ezstudio]/</em>"</li>
</ul>
<h2 id=3D"Upgradingfrom5.4.xand2014.11to16.xx-Checkforrequirements">Check f=
or requirements</h2>
<ul>
<li>Information regarding system requirements can be found on the <span cla=
ss=3D"confluence-link">&nbsp;</span><a href=3D"/pages/viewpage.action?pageI=
d=3D31429536"><span class=3D"confluence-link">Requirements documentation pa=
ge</span></a>; notable changes include:
<ul>
<li>PHP 5.5.9 or higher</li>
<li>MySQL or MariaDB 5.5 or higher</li>
<li>Browser from 2015 or newer for use with backend UI</li>
</ul></li>
<li>This page assumes you have composer installed on the machine and that i=
t is a somewhat recent version. See&nbsp;<a href=3D"/display/DEVELOPER/Usin=
g+Composer">Using Composer</a>.</li>
</ul>
<p><a name=3D"eztoc126882_2" rel=3D"nofollow"></a></p>
<h2 id=3D"Upgradingfrom5.4.xand2014.11to16.xx-Upgradesteps">Upgrade steps<a=
 name=3D"eztoc126882_1" rel=3D"nofollow"></a></h2>
<h3 id=3D"Upgradingfrom5.4.xand2014.11to16.xx-Step1:ExtractlatesteZPlatform=
/Studio16.02.xinstallation">Step 1: Extract latest eZ Platform/Studio 16.02=
.x installation</h3>
<p>The easiest way to upgrade the distribution files is to extract a clean =
installation of eZ Platform / eZ Studio to a separate directory.</p>
<h3 id=3D"Upgradingfrom5.4.xand2014.11to16.xx-Step2:Moveovercodeandconfig">=
Step 2: Move over code and config</h3>
<h5 id=3D"Upgradingfrom5.4.xand2014.11to16.xx-2.1.Code">2.1. Code</h5>
<p>If you have code in src folder, move that over:</p>
<ul>
<li><code><span style=3D"color: rgb(128,128,128);"><em>&lt;old-ez-root&gt;/=
</em></span>src =3D&gt; <span style=3D"color: rgb(128,128,128);"><em>&lt;ne=
w-ez-root&gt;/</em></span></code><code>src</code></li>
</ul>
<h5 id=3D"Upgradingfrom5.4.xand2014.11to16.xx-2.2.Composer">2.2. Composer</=
h5>
<h6 style=3D"margin-left: 30.0px;" id=3D"Upgradingfrom5.4.xand2014.11to16.x=
x-2.2.1Moveoverownpackages">2.2.1 Move over own packages</h6>
<p style=3D"margin-left: 30.0px;">Assuming you have own composer packages<e=
m> (libraries and bundles, but not Exponential legacy&nbsp;packages)</em>, e=
xecute commands like below to add them to new install in &lt;new-ez-root&gt=
;:</p>
<p style=3D"margin-left: 60.0px;"><code class=3D"php plain">composer&nbsp;<=
/code><code class=3D"php keyword">require</code>&nbsp;<code class=3D"php pl=
ain">--no-update&nbsp;</code><code class=3D"php string">"vendor/package:~1.=
3.0"</code></p>
<p style=3D"margin-left: 30.0px;"><em>Adapt the command with your</em><em>&=
nbsp;<code>vendor</code>, <code>package</code>, version number, and add&nbs=
p;<code>"=E2=80=93dev"</code> if a given package is for dev use. Also check=
 if there are other changes in <code>composer.json</code> you should move o=
ver.</em></p>
<h6 style=3D"margin-left: 30.0px;" id=3D"Upgradingfrom5.4.xand2014.11to16.x=
x-2.2.2TemporarilyinstallXmlTextFieldType"><span style=3D"color: rgb(14,175=
,255);">2.2.2 Temporarily install XmlText Field Type</span></h6>
<p style=3D"margin-left: 30.0px;">While no longer&nbsp;bundled, the XmlText=
 Field Type exists and is needed to perform migration from Exponential's Xml=
Text to the new docbook-based format used by RichText Field Type. From &lt;=
new-ez-root&gt; execute:</p>
<p style=3D"margin-left: 60.0px;"><code class=3D"php plain">composer&nbsp;<=
/code><code class=3D"php keyword">require</code>&nbsp;<code class=3D"php pl=
ain">--no-update --dev&nbsp;</code><code>"ezsystems/ezplatform-xmltext-fiel=
dtype:^1.1.0</code>"</p>
<h5 id=3D"Upgradingfrom5.4.xand2014.11to16.xx-2.3.Config">2.3. Config</h5>
<p>To move over your own custom configurations, follow the conventions belo=
w and manually move the settings over:</p>
<ul>
<li><code><span><span style=3D"color: rgb(128,128,128);"><em>&lt;old-ez-roo=
t&gt;/</em></span><strong>exponential</strong>/config/parameters.yml =3D&gt;&=
nbsp;<span style=3D"color: rgb(128,128,128);"><em>&lt;new-ez-root&gt;/</em>=
</span><span><strong>app</strong>/config/parameters.yml</span></span></code=
>
<ul>
<li><span style=3D"color: rgb(128,128,128);"><em>For parameters like before=
, for new parameters you'll be prompted on later step.</em></span></li>
</ul></li>
<li><code><span style=3D"color: rgb(128,128,128);"><em>&lt;old-ez-root&gt;/=
</em></span><strong>exponential</strong>/config/config.yml &nbsp; &nbsp; =3D&=
gt; <span style=3D"color: rgb(128,128,128);"><em>&lt;new-ez-root&gt;/</em><=
/span><strong>app</strong>/config/<span>config.yml</span></code>
<ul>
<li><span style=3D"color: rgb(128,128,128);"><em>For system/framework confi=
g, and for defining global db, cache, search settings.</em></span></li>
</ul></li>
<li><code><span style=3D"color: rgb(128,128,128);"><em>&lt;old-ez-root&gt;/=
</em></span><strong>exponential</strong>/config/exponential.yml &nbsp;=3D&gt; <=
span style=3D"color: rgb(128,128,128);"><em>&lt;new-ez-root&gt;/</em></span=
><strong>app</strong>/config/<strong>ezplatform</strong>.yml</code>
<ul>
<li><span style=3D"color: rgb(128,128,128);"><em>For site access, site grou=
ps and repository settings.</em></span></li>
</ul></li>
</ul>
<div class=3D"confluence-information-macro confluence-information-macro-inf=
ormation">
<p class=3D"title">Changes to repository configuration</p>
<span class=3D"aui-icon aui-icon-small aui-iconfont-info confluence-informa=
tion-macro-icon"></span>
<div class=3D"confluence-information-macro-body">
<p>When moving <span>configuration</span> over, be aware that as of 5.4.5 a=
nd higher, repository configuration has been enhanced to allow configuring =
storage engine and search engine independently.</p>
<pre><span style=3D"color: rgb(0,0,128);"><br></span></pre>
<div class=3D"code panel pdl" style=3D"border-width: 1px;">
<div class=3D"codeHeader panelHeader pdl" style=3D"border-bottom-width: 1px=
;">
<b>Default ezplatform.yml repositories configuration with comments</b>
</div>
<div class=3D"codeContent panelContent pdl">=20
<pre class=3D"brush: php; gutter: false; theme: Eclipse" style=3D"font-size=
:12px;">exponential:
    # Repositories configuration, setup default repository to support solr =
if enabled
    repositories:
        default:
            # For storage engine use kernel default (current LegacyStorageE=
ngine)
            storage: ~
            # For search engine, pick the one configured in parameters.yml,=
 either "legacy" or "solr"
            # see SolrBundle for further info: https://doc.ez.no/display/TE=
CHDOC/Solr+Bundle
            search:
                engine: %search_engine%
                connection: default</pre>=20
</div>
</div>
</div>
</div>
<div class=3D"confluence-information-macro confluence-information-macro-inf=
ormation">
<p class=3D"title">Make sure to adapt siteaccess names</p>
<span class=3D"aui-icon aui-icon-small aui-iconfont-info confluence-informa=
tion-macro-icon"></span>
<div class=3D"confluence-information-macro-body">
<p>In the default configurations in <strong class=3D"final-path">ezplatform=
.yml </strong>you'll find existing siteaccesses like <strong>site</strong>,=
 and depending on installation perhaps a few others, all under site group <=
strong>site_group</strong>. Make sure to change those to what you had in <s=
trong>exponential.yml</strong> to avoid issues with having to login to your w=
ebsite, given user/login policy rules will need to be updated if you change=
 names of siteaccess as part of the upgrade.</p>
</div>
</div>
<h5 id=3D"Upgradingfrom5.4.xand2014.11to16.xx-2.4.Bundles">2.4. Bundles</h5=
>
<p>Move over registration of bundles you have from src and from composer pa=
ckages, from old to new kernel:</p>
<ul>
<li><p><code><span style=3D"color: rgb(128,128,128);"><em>&lt;old-ez-root&g=
t;/</em></span><strong>exponential</strong>/EzPublishKernel.php <span style=
=3D"line-height: 1.42857;">=3D&gt;&nbsp;<span style=3D"color: rgb(128,128,1=
28);"><em>&lt;new-ez-root&gt;/</em></span></span><span style=3D"line-height=
: 1.42857;"><strong>app</strong>/AppKernel.php</span></code></p></li>
</ul>
<h5 id=3D"Upgradingfrom5.4.xand2014.11to16.xx-2.5Binaryfiles"><span style=
=3D"font-family: monospace;"><span style=3D"line-height: 20.0px;">2.5 Binar=
y files</span></span></h5>
<p>Binary files can simply be copied from the old to the new installation:<=
/p>
<ul>
<li><code><span><span style=3D"color: rgb(128,128,128);"><em>&lt;old-ez-roo=
t&gt;/</em></span>web/var[/&lt;site_name&gt;]/storage&nbsp;</span><span>=3D=
&gt;&nbsp;<span style=3D"color: rgb(128,128,128);"><em>&lt;new-ez-root&gt;/=
</em></span>web/var[/&lt;site_name&gt;]/storage</span></code></li>
</ul>
<div class=3D"confluence-information-macro confluence-information-macro-inf=
ormation">
<span class=3D"aui-icon aui-icon-small aui-iconfont-info confluence-informa=
tion-macro-icon"></span>
<div class=3D"confluence-information-macro-body">
<p>In The Exponential CMS 5.x install <code>web/var</code> is a symlink=
 to <code>exponential_legacy/var</code>, so if you can't find it in path abov=
e you can instead copy the storage files from the similar <code>exponential_l=
egacy</code> path.</p>
</div>
</div>
<h5 id=3D"Upgradingfrom5.4.xand2014.11to16.xx-2.6Re-applypermissionsandupda=
tecomposer"><span style=3D"font-family: monospace;"><span style=3D"line-hei=
ght: 20.0px;">2.6 Re-apply permissions and update composer</span></span></h=
5>
<p><span>Since writable directories and files have been replaced / copied, =
their permissions might have changed. Re-apply permissions as explained in =
the installation instructions.&nbsp;<span class=3D"status-macro aui-lozenge=
 aui-lozenge-current aui-lozenge-subtle">TODO: LINK</span></span></p>
<p>When that is done, execute the following to update and install all packa=
ges from within&nbsp;<code>&lt;new-ez-root&gt;</code>*:</p>
<p style=3D"margin-left: 30.0px;"><span><code>composer update&nbsp;<span>--=
prefer-dist</span></code></span></p>
<div class=3D"confluence-information-macro confluence-information-macro-inf=
ormation">
<span class=3D"aui-icon aui-icon-small aui-iconfont-info confluence-informa=
tion-macro-icon"></span>
<div class=3D"confluence-information-macro-body">
At the end of the process, you will be asked for values for parameters.yml =
not already moved from old installation, or new=20
<em>(as defined in parameters.yml.dist)</em>.
</div>
</div>
<h5 id=3D"Upgradingfrom5.4.xand2014.11to16.xx-2.7RegisterEzSystemsEzPlatfor=
mXmlTextFieldTypeBundle">2.7 Register&nbsp;EzSystemsEzPlatformXmlTextFieldT=
ypeBundle</h5>
<p>Add the following new bundle to your new kernel file, <span><span style=
=3D"color: rgb(128,128,128);"><em>&lt;new-ez-root&gt;/</em></span></span><s=
pan><strong>app</strong>/AppKernel.php</span>:</p>
<p style=3D"margin-left: 30.0px;"><code>new EzSystems\EzPlatformXmlTextFiel=
dTypeBundle\EzSystemsEzPlatformXmlTextFieldTypeBundle(),</code>&nbsp;</p>
<h3 id=3D"Upgradingfrom5.4.xand2014.11to16.xx-Step3:Upgradethedatabase">Ste=
p 3: Upgrade the database</h3>
<h5 id=3D"Upgradingfrom5.4.xand2014.11to16.xx-3.1.ExecuteupdateSQL">3.1. Ex=
ecute update SQL</h5>
<p>Import to your database the changes provided in <u>one of</u> the follow=
ing files, optionally read inline comments as you might not need to run som=
e cleanup queries:</p>
<p style=3D"margin-left: 30.0px;"><code>MySQL: <span style=3D"color: rgb(12=
8,128,128);">&lt;new-ez-root&gt;/</span>vendor/ezsystems/exponential-kernel/d=
ata/update/mysql/dbupdate-6.1.0-to-6.2.0.sql</code></p>
<p style=3D"margin-left: 30.0px;"><code><span>Postgres: <span style=3D"colo=
r: rgb(128,128,128);">&lt;new-ez-root&gt;/</span>vendor/ezsystems/exponential=
-kernel/data/update/postgres/dbupdate-6.1.0-to-6.2.0.sql</span></code></p>
<div class=3D"confluence-information-macro confluence-information-macro-inf=
ormation">
<span class=3D"aui-icon aui-icon-small aui-iconfont-info confluence-informa=
tion-macro-icon"></span>
<div class=3D"confluence-information-macro-body">
<p><em>Instructions on purpose does not use <code>dbupdate-5.4.0-to-6.2.0.s=
ql</code><a class=3D"external-link" href=3D"https://github.com/ezsystems/ez=
publish-kernel/blob/v6.2.0/data/update/mysql/dbupdate-5.4.0-to-6.2.0.sql" r=
el=3D"nofollow"> as it contains issues with the sql, and the sql update fil=
e above contains all relevant schema updates.</a></em></p>
</div>
</div>
<p style=3D"margin-left: 30.0px;"><span><br></span></p>
<h5 id=3D"Upgradingfrom5.4.xand2014.11to16.xx-3.2.ExecuteXmlTextMigrationsc=
ript">3.2. Execute XmlText Migration script</h5>
<p>For migrating content from the XmlText format to the new RichText format=
, a migration script exists, execute the following from &lt;new-ez-root&gt;=
:</p>
<p style=3D"margin-left: 30.0px;"><code>php app/console ezxmltext:convert-t=
o-richtext -v</code></p>
<div class=3D"confluence-information-macro confluence-information-macro-not=
e">
<span class=3D"aui-icon aui-icon-small aui-iconfont-warning confluence-info=
rmation-macro-icon"></span>
<div class=3D"confluence-information-macro-body">
<p>The migration script is currently in beta, which is why command example =
is suggested with verbose flag. Feedback on how it works and on how we can =
improve it is welcome <a href=3D"https://github.com/ezsystems/ezplatform-xm=
ltext-fieldtype" class=3D"external-link" rel=3D"nofollow">on the repository=
</a>.</p>
</div>
</div>
<h5 id=3D"Upgradingfrom5.4.xand2014.11to16.xx-3.3.MigratePagefieldtoLanding=
Page(eZStudioonly)">3.3. Migrate Page field to Landing Page (eZ Studio only=
)</h5>
<p>If you have Page field (ezflow) content and an eZ Enterprise subscriptio=
n, you can use a script to migrate your Page content to eZ Studio Landing P=
age. See <span class=3D"confluence-link"><a href=3D"/pages/viewpage.action?=
pageId=3D31431405">Migrating legacy Page field (ezflow) to Landing Page (En=
terprise)</a></span> for more information.</p>
<h3 id=3D"Upgradingfrom5.4.xand2014.11to16.xx-Step4:Re-configurewebserver&a=
mp;proxy">Step 4: Re-configure web server &amp; proxy</h3>
<h4 id=3D"Upgradingfrom5.4.xand2014.11to16.xx-Varnish(optional)">Varnish <e=
m>(optional)</em></h4>
<p>If you use Varnish, the recommended Varnish (3 and 4) VCL configuration =
can be found in the&nbsp;<code>doc/varnish</code>&nbsp;folder. See also the=
&nbsp;<a href=3D"https://doc.ez.no/display/DEVELOPER/HTTP+Cache#HTTPCache-U=
singVarnish" rel=3D"nofollow">Using Varnish</a>&nbsp;page.</p>
<h4 id=3D"Upgradingfrom5.4.xand2014.11to16.xx-Webserverconfiguration">Web s=
erver configuration</h4>
<p>The officially recommended virtual configuration is now shipped in the&n=
bsp;<code>doc</code>&nbsp;folder, for both apache2 (<code>doc/apache2</code=
>) and nginx (<code>doc/nginx</code>).&nbsp;Both are built to be easy to un=
derstand and use, but aren't meant as drop-in replacements for your existin=
g configuration.</p>
<p>As was the case starting 5.4, one notable change is that&nbsp;<code>SetE=
nvIf</code>&nbsp;is now used to dynamically change rewrite rules depending =
on the Symfony environment. It is currently used for the assetic production=
 rewrite rules.</p>
<h3 id=3D"Upgradingfrom5.4.xand2014.11to16.xx-Step5:Linkassets">Step 5: Lin=
k assets</h3>
<p>Assets from the various bundles need to be made available for the webser=
ver through the web/ document root, execute the following commands from &lt=
;new-ez-root&gt;:</p>
<div class=3D"code panel pdl" style=3D"border-width: 1px;">
<div class=3D"codeContent panelContent pdl">=20
<pre class=3D"brush: php; gutter: false; theme: Eclipse" style=3D"font-size=
:12px;">php app/console assets:install --env=3Dprod --symlink
php app/console assetic:dump --env=3Dprod</pre>=20
</div>
</div>
<p>&nbsp;</p>
<p><span style=3D"color: rgb(0,98,147);"><br></span></p>
</div>=20
</div>=20
<div class=3D"cell aside" data-type=3D"aside">=20
<div class=3D"innerCell">=20
<p>&nbsp;</p>
</div>=20
</div>=20
</div>=20
</div>
    </div>
</body>
</html>
------=_Part_2789_487265362.1485850807393--
