                    
    
                    
    
                    
    
<!DOCTYPE html>
<html>
    
<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=26675551 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 10:36:57 GMT -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>View Source</title>
        <link rel="canonical" href="../../pages/viewpage3133.html?pageId=26675551" />
        <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager.resource-base-url-pattern"]="\"(?:(?:/s/.*?/_)?/download)\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"\"";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics.feature-data-provider-legacy"]="true";
</script>
<link type="text/css" rel="stylesheet" href="../../s/1b9968ac17721e3a6947d14e3a43c3f8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch9c16.css?build-number=5983" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/f3685658010e413141854089096800b5/_/download/contextbatch/css/plugin.viewsource/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/df762e50bc83a9608020a1ff1476cda6-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/5714bd5a5c86641cad10106916cda7c8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css" media="all">
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/51/_/styles/colorsb538.css?spaceKey=EZP" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/51/_/styles/customb538.css?spaceKey=EZP" media="all">

    </head>

    <body class="mceContentBody aui-theme-default wiki-content fullsize">
        <p>&nbsp;</p>         <p><span>This format is used by eZ P</span></p><p> </p><table class="wysiwyg-macro" data-macro-name="note" data-macro-id="abb941c0-cf87-4668-a76d-df23e3c278e5" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingdd57.png?definition=e25vdGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>This FieldType is not officially supported yet, it will be as of first stable eZ Platform release.</p></td></tr></table><p><span style="color: rgb(0,0,0);">This FieldType validates and stores structured richtext, and exposes it in several formats.</span></p><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Name</th><th class="confluenceTh">Internal name</th><th class="confluenceTh">Expected input</th></tr><tr><td class="confluenceTd"><pre>RichText</pre></td><td class="confluenceTd"><pre>ezrichtext</pre></td><td class="confluenceTd"><pre>mixed</pre></td></tr></tbody></table><p><img class="editor-inline-macro" src="../servlet/confluence/placeholder/macro4373.png?definition=e3RvYzptaW5MZXZlbD0yfQ&amp;locale=en_GB&amp;version=2" data-macro-name="toc" data-macro-id="86e7d779-146d-4f36-ad0e-0d4837f0b7f1" data-macro-parameters="minLevel=2" data-macro-schema-version="1"></p><h2><span style="color: rgb(0,0,0);">Input expectations</span></h2><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Type</th><th class="confluenceTh">Description</th><th class="confluenceTh">Example</th></tr><tr><td class="confluenceTd"><pre>string</pre></td><td class="confluenceTd">XML document in one of the FieldType's input formats as a string.</td><td class="confluenceTd">See the example below.</td></tr><tr><td class="confluenceTd"><pre>DOMDocument</pre></td><td class="confluenceTd"><p><span> <span>XML document in one of the FieldType's input formats as a</span> </span></p><p><strong> <code>DOMDocument</code> </strong> object.</p></td><td class="confluenceTd">See the example below.</td></tr><tr><td class="confluenceTd"><pre>eZ\Publish\Core\FieldType\RichText\Value</pre></td><td class="confluenceTd">An instance of the FieldType's <strong> <code>Value</code> </strong> object.</td><td class="confluenceTd">See the example below.</td></tr></tbody></table><h3><span style="color: rgb(0,0,0);">Input formats</span></h3><p><span style="color: rgb(0,0,0);">FieldType works with XML and also expects an XML value as input, wether as a string, <strong> <code>DOMDocument</code> </strong> <span> object or <span>FieldType's </span> <strong> <code>Value</code> </strong> <span> object. When the value is given as a string or a <strong> <code>DOMDocument</code> </strong> <span style="color: rgb(0,0,0);"> object, it </span>will be checked for conformance to the one of the supported input formats, then dispatched to the appropriate converter, to be converted to the FieldType's internal format. No conversion will be performed if providing the value in FieldType's internal format, or when providing the value as <span>FieldType's </span> <strong> <code>Value</code> </strong> <span> object. In the latter case it will be expected that <strong> <code>Value</code> </strong> <span style="color: rgb(0,0,0);"> object holds the value in FieldType's internal format.</span> </span> </span> </span> </span></p><p><span style="color: rgb(0,0,0);"> <span> <span>Currently supported input formats are described in the table below:</span> </span> </span></p><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Name</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd">Exponential Docbook variant</td><td class="confluenceTd">FieldType's internal format</td></tr><tr><td class="confluenceTd">XHTML5 editing format</td><td class="confluenceTd">Typically used with in-browser HTML editor</td></tr><tr><td class="confluenceTd">Legacy eZXML format</td><td class="confluenceTd">Compatibility with legacy eZXML format, used by <a class="confluence-link" href="../../display/EZP/The%2bXmlText%2bFieldType.html" data-linked-resource-id="22937804" data-linked-resource-version="16" data-linked-resource-type="page" data-linked-resource-default-alias="The XmlText FieldType" data-base-url="../../index.html">XmlText FieldType</a> <span style="color: rgb(0,0,0);"> </span></td></tr></tbody></table><h3><span style="color: rgb(0,0,0);">Example of the FieldType's internal format</span></h3><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="69e39806-80a5-4388-b679-14c663a79ca1" data-macro-parameters="language=xml|linenumbers=true" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingd0e8.png?definition=e2NvZGU6bGFuZ3VhZ2U9eG1sfGxpbmVudW1iZXJzPXRydWV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>&lt;section xmlns="http://docbook.org/ns/docbook"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:ezxhtml="http://ez.no/xmlns/exponential/docbook/xhtml"
         xmlns:ezcustom="http://ez.no/xmlns/exponential/docbook/custom"
         version="5.0-variant exponential-1.0">
    &lt;title ezxhtml:level="2">This is a title.&lt;/title>
    &lt;para ezxhtml:class="paraClass">This is a paragraph.&lt;/para>
&lt;/section></pre></td></tr></table><h3><span style="color: rgb(0,0,0);">Example of the FieldType's XHTML5 edit format</span></h3><table class="wysiwyg-macro" data-macro-name="warning" data-macro-id="44ce08cf-0f67-45bb-be9c-2ee3eadebf83" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingca13.png?definition=e3dhcm5pbmd9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>This format is used by eZ Platform Online Editor and will change with its needs as we continue to evolve this part of the UI.</p></td></tr></table><p><span style="color: rgb(0,0,0);"> <br /> </span></p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="50ee42f5-eb62-4c64-a9c0-753c2ee55757" data-macro-parameters="language=xml|linenumbers=true" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingd0e8.png?definition=e2NvZGU6bGFuZ3VhZ2U9eG1sfGxpbmVudW1iZXJzPXRydWV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>&lt;section xmlns="http://ez.no/namespaces/exponential5/xhtml5/edit">
    &lt;h2>This is a title.&lt;/h2>
    &lt;p class="paraClass">This is a paragraph.&lt;/p>
&lt;/section></pre></td></tr></table><table class="wysiwyg-macro" data-macro-name="info" data-macro-id="c6e62209-6255-4ba6-8e24-db20d23ebebe" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingd35c.png?definition=e2luZm99&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>For more information about internal format and input formats, see <a href="https://github.com/ezsystems/exponential-kernel/tree/master/eZ/Publish/Core/FieldType/Tests/RichText/Converter/Xslt/_fixtures">FieldType's conversion test fixtures on GitHub</a>.</p></td></tr></table><table class="wysiwyg-macro" data-macro-name="tip" data-macro-id="720e4707-3c51-44ae-b279-e1b665b3942c" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading7f8c.png?definition=e3RpcH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>For example, ezxml does not use explicit level attributes for &lt;header&gt; elements, instead &lt;header&gt; element levels are indicated through the level of nesting inside &lt;section&gt; elements.</p></td></tr></table><h3><span style="color: rgb(0,0,0);">Example of using XML document in internal format as a string</span></h3><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="d412e33d-0abd-4b1c-aa40-2425b6d31abd" data-macro-parameters="language=php|linenumbers=true" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading1fe0.png?definition=e2NvZGU6bGFuZ3VhZ2U9cGhwfGxpbmVudW1iZXJzPXRydWV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>...
 
$contentService = $repository->getContentService();
$contentTypeService = $repository->getContentTypeService();
 
$contentType = $contentTypeService->loadContentTypeByIdentifier( "article" );
$contentCreateStruct = $contentService->newContentCreateStruct( $contentType, "eng-GB" );
 
$inputString = &lt;&lt;&lt;DOCBOOK

&lt;section xmlns="http://docbook.org/ns/docbook"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:ezxhtml="http://ez.no/xmlns/exponential/docbook/xhtml"
         xmlns:ezcustom="http://ez.no/xmlns/exponential/docbook/custom"
         version="5.0-variant exponential-1.0">
    &lt;title ezxhtml:level="2">This is a title.&lt;/title>
    &lt;para ezxhtml:class="paraClass">This is a paragraph.&lt;/para>
&lt;/section>
DOCBOOK;
 
$contentCreateStruct->setField( "description", $inputString );
 
...</pre></td></tr></table><h2><span style="color: rgb(0,0,0);">Value object API</span></h2><p><span style="color: rgb(0,0,0);"> <strong> <code>eZ\Publish\Core\FieldType\RichText\Value</code> </strong> offers following properties:</span></p><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Type</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><pre>xml</pre></td><td class="confluenceTd"><pre>DOMDocument</pre></td><td class="confluenceTd">Internal format value as an instance of <span> <code>DOMDocument</code>.</span></td></tr></tbody></table><h2><span style="color: rgb(0,0,0);">REST API specifics</span></h2><h3><span style="color: rgb(0,0,0);">Creating or updating Content</span></h3><p><span style="color: rgb(0,0,0);">When creating RichText content with the REST API, it is possible to provide data as a string, using the &quot;<code>xml</code>&quot; fieldValue key:</span></p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="6f75f308-e6fa-40d6-bdec-8fbf2614ac37" data-macro-parameters="language=xml|linenumbers=true" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingd0e8.png?definition=e2NvZGU6bGFuZ3VhZ2U9eG1sfGxpbmVudW1iZXJzPXRydWV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>&lt;fieldValue>
    &lt;value key="xml">&amp;lt;?xml version="1.0" encoding="UTF-8"?&amp;gt;
&amp;lt;section xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ezxhtml="http://ez.no/xmlns/exponential/docbook/xhtml" xmlns:ezcustom="http://ez.no/xmlns/exponential/docbook/custom" version="5.0-variant exponential-1.0"&amp;gt;
&amp;lt;title ezxhtml:level="2"&amp;gt;This is a title.&amp;lt;/title&amp;gt;
&amp;lt;/section&amp;gt;
&lt;/value>
&lt;/fieldValue></pre></td></tr></table><p><span style="color: rgb(0,0,0);">When the value given over REST API is transformed into a <span>FieldType's </span> <strong> <code>Value</code> </strong> <span> object, it will be treated as a string. This means you can use any supported input format for input over REST</span> API.</span></p>
        <p>&nbsp;</p>
    </body>

<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=26675551 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 10:36:58 GMT -->
</html>
