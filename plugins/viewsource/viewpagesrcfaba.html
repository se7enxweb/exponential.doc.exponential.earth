                    
    
                    
    
                    
    
<!DOCTYPE html>
<html>
    
<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=31430551 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 10:52:18 GMT -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>View Source</title>
        <link rel="canonical" href="../../pages/viewpagefaba.html?pageId=31430551" />
        <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager.resource-base-url-pattern"]="\"(?:(?:/s/.*?/_)?/download)\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"\"";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics.feature-data-provider-legacy"]="true";
</script>
<link type="text/css" rel="stylesheet" href="../../s/1b9968ac17721e3a6947d14e3a43c3f8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch9c16.css?build-number=5983" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/f3685658010e413141854089096800b5/_/download/contextbatch/css/plugin.viewsource/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/df762e50bc83a9608020a1ff1476cda6-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/5714bd5a5c86641cad10106916cda7c8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css" media="all">
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/6/_/styles/colors74cd.css?spaceKey=DEVELOPER" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/6/_/styles/custom74cd.css?spaceKey=DEVELOPER" media="all">

    </head>

    <body class="mceContentBody aui-theme-default wiki-content fullsize">
        <p>&nbsp;</p>         <div class="contentLayout2">
<div class="columnLayout two-right-sidebar" data-layout="two-right-sidebar">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<table class="wysiwyg-macro" data-macro-name="warning" data-macro-id="19539442-fb1e-407a-a282-ec794574b4c6" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingca13.png?definition=e3dhcm5pbmd9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>The XmlText Field Type isn't officially supported by eZ Platform. It can be installed by requiring ezsystems/ezplatform-xmltext-fieldtype. PlatformUI does not support wysiwyg editing of this type of Field.</p></td></tr></table><p><span style="color: rgb(0,0,0);"><br /></span></p><p><span style="color: rgb(0,0,0);">This Field Type validates and stores formatted text using the Exponential legacy format, ezxml. </span></p><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Name</th><th class="confluenceTh">Internal name</th><th class="confluenceTh">Expected input</th></tr><tr><td class="confluenceTd"><code>XmlText</code></td><td class="confluenceTd"><code>ezxmltext</code></td><td class="confluenceTd"><code>mixed</code></td></tr></tbody></table><h2>Input expectations</h2><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Type</th><th class="confluenceTh">Description</th><th class="confluenceTh">Example</th></tr><tr><td class="confluenceTd"><code>string</code></td><td class="confluenceTd">XML document in the Field Type internal format as a string.</td><td class="confluenceTd"><p>See the example below.</p></td></tr><tr><td class="confluenceTd"><pre>eZ\Publish\Core\FieldType\<span>XmlText\Input</span></pre></td><td class="confluenceTd">An instance of the class implementing Field Type abstract <strong><code>Input</code></strong> class.</td><td class="confluenceTd"><span>See the example below.</span></td></tr><tr><td class="confluenceTd"><pre>eZ\Publish\Core\FieldType\XmlText\Value</pre></td><td class="confluenceTd"><span>An instance of the Field Type <strong><code>Value</code></strong> object.</span></td><td class="confluenceTd"><span>See the example below.</span></td></tr></tbody></table><h3>Example of the Field Type's internal format</h3><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="9f31baf5-3771-4ac5-b456-7aae64aac7a6" data-macro-parameters="language=xml|linenumbers=true" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingd0e8.png?definition=e2NvZGU6bGFuZ3VhZ2U9eG1sfGxpbmVudW1iZXJzPXRydWV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>&lt;?xml version="1.0" encoding="utf-8"?>
&lt;section
	xmlns:custom="http://ez.no/namespaces/exponential3/custom/"
	xmlns:image="http://ez.no/namespaces/exponential3/image/"
	xmlns:xhtml="http://ez.no/namespaces/exponential3/xhtml/">
    &lt;paragraph>This is a paragraph.&lt;/paragraph>
&lt;/section></pre></td></tr></table><h3>For XHTML Input</h3><p><span style="color: rgb(0,0,0);">The eZ XML output uses &lt;strong&gt; and &lt;em&gt; by default, respecting the semantic XHTML notation.<br /></span></p><table class="wysiwyg-macro" data-macro-name="info" data-macro-id="80e57619-5ca9-449a-8202-d3291155bfee" data-macro-parameters="icon=false|title=Learn more about &lt;strong>, &lt;b>, &lt;em>, &lt;i>" data-macro-schema-version="1" style="background-image: url(/plugins/servlet/confluence/placeholder/macro-heading?definition=e2luZm86aWNvbj1mYWxzZXx0aXRsZT1MZWFybiBtb3JlIGFib3V0IDxzdHJvbmc-LCA8Yj4sIDxlbT4sIDxpPn0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><ul><li><a href="http://share.ez.no/forums/exponential-5-platform/strong-vs-b-and-em-vs-i">Read the share.ez.no forum about our choice of semantic tags with eZ XML</a></li><li>Learn more <a href="http://html5doctor.com/i-b-em-strong-element/">about the semantic tags vs the presentational tags.</a></li></ul></td></tr></table><p><span style="color: rgb(0,0,0);"><br /></span></p><h2>Input object API</h2><p><span style="color: rgb(0,0,0);"><code><strong>Input</strong></code> object is intended as a vector for different input formats. It should accept input value in a foreign format and convert it to the Field Type's internal format.</span></p><p><span style="color: rgb(0,0,0);">It should implement abstract </span><strong><code>eZ\Publish\Core\FieldType\XmlText\Input</code></strong> class, which defines only one method:</p><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Method</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><pre><span>getInternalRepresentation</span></pre></td><td class="confluenceTd">The method should return the input value in the internal format.</td></tr></tbody></table><p><span style="color: rgb(0,0,0);">At the moment there is only one implementation of the <strong><code>Input</code></strong></span><span style="color: rgb(0,0,0);"> class, </span><strong><code style="line-height: 1.4285715;">eZ\Publish\Core\FieldType\XmlText\Input\EzXml</code></strong><span style="color: rgb(0,0,0);">, which accepts input value in the internal format, and therefore only performs validation of the input value.</span></p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="5a4d6716-5cd4-413c-8fd6-f0f73695d844" data-macro-parameters="language=php|linenumbers=true|title=Example of using the Input object" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headinga015.png?definition=e2NvZGU6bGFuZ3VhZ2U9cGhwfHRpdGxlPUV4YW1wbGUgb2YgdXNpbmcgdGhlIElucHV0IG9iamVjdHxsaW5lbnVtYmVycz10cnVlfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>...
 
use eZ\Publish\Core\FieldType\XmlText\Input\EzXml as EzXmlInput;

...

$contentService = $repository->getContentService();
$contentTypeService = $repository->getContentTypeService();
 
$contentType = $contentTypeService->loadContentTypeByIdentifier( "article" );
$contentCreateStruct = $contentService->newContentCreateStruct( $contentType, "eng-GB" );

$inputString = &lt;&lt;&lt;EZXML
&lt;?xml version="1.0" encoding="utf-8"?>
&lt;section
	xmlns:custom="http://ez.no/namespaces/exponential3/custom/"
	xmlns:image="http://ez.no/namespaces/exponential3/image/"
	xmlns:xhtml="http://ez.no/namespaces/exponential3/xhtml/">
    &lt;paragraph>This is a paragraph.&lt;/paragraph>
&lt;/section>
EZXML;
 
$ezxmlInput = new EzXmlInput( $inputString );

$contentCreateStruct->setField( "description", $ezxmlInput );
 
...</pre></td></tr></table><h2>Value object API</h2><p><strong><code>eZ\Publish\Core\FieldType\XmlText\Value</code></strong> offers following properties:</p><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Type</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><code>xml</code></td><td class="confluenceTd"><pre><span>DOMDocument</span></pre></td><td class="confluenceTd">Internal format value as an instance of <span style="line-height: 1.4285715;"><code>DOMDocument</code>.</span></td></tr></tbody></table><h2>Validation</h2><p><span style="color: rgb(0,0,0);">Validation of the internal format is performed in the <strong><code>eZ\Publish\Core\FieldType\XmlText\Input\EzXml</code></strong> class.</span></p><h2>Settings</h2><p><span style="color: rgb(0,0,0);">Following settings are available:</span></p><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Name</th><th class="confluenceTh">Type</th><th class="confluenceTh">Default value</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><p><code><span style="color: rgb(0,51,102);">numRows</span></code></p></td><td class="confluenceTd"><code>int</code></td><td class="confluenceTd"><code>10</code></td><td class="confluenceTd">Defines the number of rows for the online editor in the administration interface.</td></tr><tr><td class="confluenceTd"><p><code><span style="color: rgb(0,51,102);">tagPreset</span></code></p></td><td class="confluenceTd"><code>mixed</code></td><td class="confluenceTd"><code>Type::TAG_PRESET_DEFAULT</code></td><td class="confluenceTd"><p><span>Preset of tags for the online editor in the administration interface.</span></p></td></tr></tbody></table><h3>Tag presets</h3><p><span style="color: rgb(0,0,0);">Following tag presets are available as constants in the <strong><code>eZ\Publish\Core\FieldType\XmlText</code></strong> class:</span></p><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Constant</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><pre><span>TAG_PRESET_DEFAULT</span></pre></td><td class="confluenceTd">Default tag preset.</td></tr><tr><td class="confluenceTd"><pre><span>TAG_PRESET_SIMPLE_FORMATTING</span></pre></td><td class="confluenceTd"><p><span>Preset of tags for online editor intended for simple formatting options.</span></p></td></tr></tbody></table><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="2115ca3d-2352-4258-8cfa-7f97d8dbfd05" data-macro-parameters="language=php|linenumbers=true|title=Example of using settings in PHP" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingc33c.png?definition=e2NvZGU6bGFuZ3VhZ2U9cGhwfHRpdGxlPUV4YW1wbGUgb2YgdXNpbmcgc2V0dGluZ3MgaW4gUEhQfGxpbmVudW1iZXJzPXRydWV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>...
 
use eZ\Publish\Core\FieldType\XmlText\Type;

...

$contentTypeService = $repository->getContentTypeService();
$xmltextFieldCreateStruct = $contentTypeService->newFieldDefinitionCreateStruct( "description", "ezxmltext" );

$xmltextFieldCreateStruct->fieldSettings = array(
	"numRows" => 25,
	"tagPreset" => Type::TAG_PRESET_SIMPLE_FORMATTING
);
 
...</pre></td></tr></table></div>
</div>
<div class="cell aside" data-type="aside">
<div class="innerCell">
<p> </p></div>
</div>
</div>
</div>
        <p>&nbsp;</p>
    </body>

<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=31430551 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 10:52:18 GMT -->
</html>
