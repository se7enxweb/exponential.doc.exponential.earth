                    
    
                    
    
                    
    
<!DOCTYPE html>
<html>
    
<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=21987805 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 21 Oct 2014 13:28:03 GMT -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>View Source</title>
        <link rel="canonical" href="../../pages/viewpage20bf.html?pageId=21987805" />
        <link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch934e.css?media=print" media="print">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 8]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+8" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/1f2a9c4c7f2593422cc9b02d1a652a22/_/download/contextbatch/css/plugin.viewsource/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/70f6d025b64de5008ccd042576cd8d90/_/download/contextbatch/css/page/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/70f6d025b64de5008ccd042576cd8d90/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/26ac2724af3c6ece1051365650d982fa/_/download/contextbatch/css/editor-content/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/1.3/_/download/batch/com.atlassian.confluence.plugins.confluence-hig/com.atlassian.confluence.plugins.confluence-highlight-ac" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/1.3/_/download/batch/com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources/com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/12/_/styles/colors.css" media="all">

    </head>

    <body class="mceContentBody aui-theme-default wiki-content fullsize">
        <p>&nbsp;</p>         <p>This <span style="color: rgb(51,51,51);">FieldType represents and handles a binary file. It also counts the number of times the file has been downloaded from the </span><code>content/download</code><span style="color: rgb(51,51,51);"> module.</span></p><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Name</th><th class="confluenceTh">Internal name</th><th class="confluenceTh">Expected input</th><th class="confluenceTh">Output</th></tr><tr><td class="confluenceTd"><code>BinaryFile</code></td><td class="confluenceTd"><code>ezbinaryfile</code></td><td class="confluenceTd"><code>Mixed</code></td><td class="confluenceTd"><code>Mixed</code></td></tr></tbody></table><h5>Description</h5><p>This <code>FieldType</code> allows the storage and retrieval of a single file. It is capable of handling virtually any file type and is typically used for storing legacy document types such as PDF files, Word documents, spreadsheets, etc. The maximum allowed file size is determined by the &quot;Max file size&quot; class attribute edit parameter and the &quot;<code>upload_max_filesize</code>&quot; directive in the main PHP configuration file (&quot;php.ini&quot;).</p><h5>BinaryFile Value Object API</h5><p><code>eZ\Publish\Core\FieldType\BinaryFile\Value</code> offers the following properties.</p><table class="wysiwyg-macro" data-macro-name="info" style="background-image: url(../servlet/confluence/placeholder/macro-headingd35c.png?definition=e2luZm99&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>Note that both <code>BinaryFile</code> and Media Value and Type inherit from the <code>BinaryBase</code> abstract field type, and share common properties.</p></td></tr></table><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Attribute</th><th class="confluenceTh">Type</th><th class="confluenceTh">Description</th><th colspan="1" class="confluenceTh">Example</th></tr><tr><td colspan="1" class="confluenceTd"><code>path</code></td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd"><span>The <code>path</code> to a binary file. This <code>path</code> depends on the </span><a class="confluence-link" href="../../display/EZP51/Binary%2bfiles%2bclustering.html" data-linked-resource-id="12780942" data-linked-resource-type="page" data-linked-resource-default-alias="Binary files clustering" data-base-url="../../index.html">IO Handler</a><span> that is being used. With the native, default handlers (FileSystem and Legacy), which is the file <code>path</code>, relative to the binary file storage root dir (<code>var/&lt;vardir&gt;/storage/original</code> by default).</span></td><td colspan="1" class="confluenceTd">application/63cd472dd7819da7b75e8e2fee507c68.pdf</td></tr><tr><td colspan="1" class="confluenceTd"><code>fileName</code></td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd">The human readable file name, as exposed to the outside. Used when sending the file for download in order to name the file.</td><td colspan="1" class="confluenceTd">20130116_whitepaper_exponential5 light.pdf</td></tr><tr><td colspan="1" class="confluenceTd"><code>fileSize</code></td><td colspan="1" class="confluenceTd">int</td><td colspan="1" class="confluenceTd">File size, in bytes</td><td colspan="1" class="confluenceTd">1077923</td></tr><tr><td colspan="1" class="confluenceTd"><code>mimeType</code></td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd">The file's mime type.</td><td colspan="1" class="confluenceTd">application/pdf</td></tr><tr><td colspan="1" class="confluenceTd"><code>downloadCount</code></td><td colspan="1" class="confluenceTd">integer</td><td colspan="1" class="confluenceTd">Number of times the file was downloaded</td><td colspan="1" class="confluenceTd">0</td></tr></tbody></table><h5>BinaryFile hash format</h5><p>The hash format mostly matches the value object. It has the following keys:</p><ul><li><code>path</code></li><li><code>fileName</code></li><li><code>fileSize</code></li><li><code>mimeType</code></li><li><code>downloadCount</code></li></ul><h5>REST API specifics</h5><p>Used in the REST API, a BinaryFile field will mostly serialize the hash described above. However there are a couple specifics worth mentioning.</p><h6>Reading content: url property</h6><p>When reading the contents of a field of this type, an extra key is added: url. This key gives you the absolute file URL, protocol and host included.</p><p>Example: <a href="http://example.com/var/ezdemo_site/storage/original/application/63cd472dd7819da7b75e8e2fee507c68.pdf">http://example.com/var/ezdemo_site/storage/original/application/63cd472dd7819da7b75e8e2fee507c68.pdf</a></p><h6>Creating content: data property</h6><p>When creating BinaryFile content with the REST API, it is possible to provide data as a base64 encoded string, using the &quot;<code>data</code>&quot; fieldValue key:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-parameters="language=html/xml" style="background-image: url(../servlet/confluence/placeholder/macro-heading26b2.png?definition=e2NvZGU6bGFuZ3VhZ2U9aHRtbC94bWx9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>&lt;field>
    &lt;fieldDefinitionIdentifier>file&lt;/fieldDefinitionIdentifier>
    &lt;languageCode>eng-GB&lt;/languageCode>
    &lt;fieldValue>
        &lt;value key="fileName">My file.pdf&lt;/value>
        &lt;value key="fileSize">17589&lt;/value>
        &lt;value key="data">&lt;![CDATA[/9j/4AAQSkZJRgABAQEAZABkAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcG
...
...]]&gt;&lt;/value>
    &lt;/fieldValue>
&lt;/field></pre></td></tr></table>
        <p>&nbsp;</p>
    </body>

<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=21987805 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 21 Oct 2014 13:28:03 GMT -->
</html>
