                    
    
                    
    
                    
    
<!DOCTYPE html>
<html>
    
<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=31429677 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 09:36:19 GMT -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>View Source</title>
        <link rel="canonical" href="../../pages/viewpage8aa0.html?pageId=31429677" />
        <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager.resource-base-url-pattern"]="\"(?:(?:/s/.*?/_)?/download)\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"\"";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics.feature-data-provider-legacy"]="true";
</script>
<link type="text/css" rel="stylesheet" href="../../s/1b9968ac17721e3a6947d14e3a43c3f8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch9c16.css?build-number=5983" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/f3685658010e413141854089096800b5/_/download/contextbatch/css/plugin.viewsource/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/df762e50bc83a9608020a1ff1476cda6-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/5714bd5a5c86641cad10106916cda7c8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css" media="all">
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/6/_/styles/colors74cd.css?spaceKey=DEVELOPER" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/6/_/styles/custom74cd.css?spaceKey=DEVELOPER" media="all">

    </head>

    <body class="mceContentBody aui-theme-default wiki-content fullsize">
        <p>&nbsp;</p>         <div class="contentLayout2">
<div class="columnLayout two-right-sidebar" data-layout="two-right-sidebar">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>eZ Platform supports multiple binary file handling mechanisms by means of an <code>IOHandler</code> interface. This feature is used by the <span class="confluence-link"> <a class="confluence-link" href="../../display/DEVELOPER/BinaryField%2bField%2bType.html" data-linked-resource-id="31430501" data-linked-resource-version="7" data-linked-resource-type="page" data-linked-resource-default-alias="BinaryField Field Type" data-base-url="https://doc.ez.no">BinaryFile</a> </span>, <a class="confluence-link" href="../../display/DEVELOPER/Media%2bField%2bType.html" data-linked-resource-id="31430525" data-linked-resource-version="4" data-linked-resource-type="page" data-linked-resource-default-alias="Media Field Type" data-base-url="https://doc.ez.no"> <span class="confluence-link">Media</span> </a>and <a class="confluence-link" href="../../display/DEVELOPER/Image%2bField%2bType.html" data-linked-resource-id="31430513" data-linked-resource-version="10" data-linked-resource-type="page" data-linked-resource-default-alias="Image Field Type" data-base-url="https://doc.ez.no"> <span class="confluence-link">Image</span> </a>Field Types.</p><h1>Native IO handler </h1><p>The IO API is organized around two types of handlers:</p><ul class="task-list"><li><code>eZ\Publish\IO\IOMetadataHandler</code>: Stores &amp; reads metadata (validity, size, etc.)</li><li><code>eZ\Publish\IO\IOBinarydataHandler</code>: Stores &amp; reads binarydata (actual contents)</li></ul><p>The IOService uses both.</p><h2>Configuration</h2><p>IO handling can now be configured using semantic configuration. Assigning the IO handlers to ezplatform itself is configurable per siteaccess. This is the default configuration:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="bb82e833-20ae-405b-8cd6-ef52a6555b62" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>exponential:
    system:
        default:
            io:
                metadata_handler: default
                binarydata_handler: default
</pre></td></tr></table><p>Metadata and binarydata handlers are configured in the <code>ez_io</code> extension. This is what the configuration looks like for the default handlers. It declares a metadata handler and a binarydata handler, both labelled 'default'. Both handlers are of type 'flysystem', and use the same flysystem adapter, labelled 'default' as well.</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="b655beaf-87d9-499e-967f-dcaaedbe3353" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>ez_io:
    metadata_handlers:
        default:
            flysystem:
                adapter: default
    binarydata_handlers:
        default:
            flysystem:
                adapter: default
</pre></td></tr></table><div class="action-body flooded"><p>The 'default' flysystem adapter's directory is based on your site settings, and will automatically be set to <code>%exponential_legacy.root_dir%/$var_dir$/$storage_dir$</code> (example: <code>/path/to/exponential_legacy/var/ezdemo_site/storage</code>).</p><h3>Configure the permissions of generated files</h3><div class="syntaxplugin"><p><img class="editor-inline-macro" height="18" width="88" src="../servlet/status-macro/placeholderc010.png?=&amp;0=&amp;colour=Yellow&amp;title=v1.5" data-macro-name="status" data-macro-id="922eaa34-301b-44bb-9af6-761ae103300d" data-macro-parameters="colour=Yellow|title=v1.5" data-macro-default-parameter="" data-macro-schema-version="1"></p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="42162b3f-44ad-46be-9a90-22f1c265ca2c" data-macro-parameters="language=bash" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading174f.png?definition=e2NvZGU6bGFuZ3VhZ2U9YmFzaH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>exponential:
    system:
        default:
            io:
                permissions: 
                    files: 0750 #default is 0644
                    directories: 0640 #default is 0755</pre></td></tr></table><p>Both <code>files</code> and <code>directories</code> rules are optional.</p><p>Default values are 0644 for files and 0755 for directories.</p></div></div><h2><a class="anchor" href="https://github.com/ezsystems/exponential-kernel/blob/native_io_spec/doc/specifications/io/native_io_handlers.md#the-native-flysystem-handler" name="user-content-the-native-flysystem-handler" />The native Flysystem handler</h2><p><a href="https://github.com/ezsystems/exponential-kernel/blob/native_io_spec/doc/specifications/io/flysystem.thephpleague.com">league/flysystem</a> (along with <a href="https://github.com/1up-lab/OneupFlysystemBundle/">FlysystemBundle</a>) is an abstract file handling library.</p><p>It is used as the default way to read &amp; write content binary files in eZ Platform. It can use the <code>local</code> filesystem <em>(our default configuration and <u>the one we officially support)</u></em>, but is also able to read/write to <code>sftp</code>, <code>zip</code> or cloud filesystems <em>(<code>azure</code>, <code>rackspace</code>, <code>S3</code>)</em>.</p><h3>Handler options</h3><h4>Adapter</h4><p>The adapter is the 'driver' used by flysystem to read/write files. Adapters can be declared using <code>oneup_flysystem</code> as follows:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="aad0ffdf-bba1-4697-84f2-871cc78ac952" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>oneup_flysystem:
    adapters:
        default:
            local:
                directory: "/path/to/directory"</pre></td></tr></table><p> </p><p>The way to configure other adapters can be found on the <a href="https://github.com/1up-lab/OneupFlysystemBundle/blob/master/Resources/doc/index.md#step3-configure-your-filesystems">bundle's online documentation</a>. Note that we do not use the Filesystem configuration described in this documentation, only the adapters.</p><h2>The DFS Cluster handler</h2><p>For clustering use we provide a custom metadata handler that stores metadata about your assets in the database. This is done as it is faster then accessing the remote NFS or S3 instance in order to read metadata. For further reading on setting this up, see <a class="confluence-link" href="../../display/DEVELOPER/Clustering.html" data-linked-resource-id="31430387" data-linked-resource-version="19" data-linked-resource-type="page" data-linked-resource-default-alias="Clustering" data-base-url="../../index.html">Clustering</a>.</p><p> </p></div>
</div>
<div class="cell aside" data-type="aside">
<div class="innerCell">
<h4>In this topic:</h4><p><img class="editor-inline-macro" src="../servlet/confluence/placeholder/macro7c73.png?definition=e3RvYzptYXhMZXZlbD0zfQ&amp;locale=en_GB&amp;version=2" data-macro-name="toc" data-macro-id="eccd7d7f-9a4a-4a9c-b6f5-52168e641a05" data-macro-parameters="maxLevel=3" data-macro-schema-version="1"></p></div>
</div>
</div>
</div>
        <p>&nbsp;</p>
    </body>

<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=31429677 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 09:36:20 GMT -->
</html>
