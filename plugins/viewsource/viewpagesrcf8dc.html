                    
    
                    
    
                    
    
<!DOCTYPE html>
<html>
    
<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=30711491 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 10:00:30 GMT -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>View Source</title>
        <link rel="canonical" href="../../pages/viewpagef8dc.html?pageId=30711491" />
        <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager.resource-base-url-pattern"]="\"(?:(?:/s/.*?/_)?/download)\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"\"";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics.feature-data-provider-legacy"]="true";
</script>
<link type="text/css" rel="stylesheet" href="../../s/1b9968ac17721e3a6947d14e3a43c3f8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch9c16.css?build-number=5983" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/f3685658010e413141854089096800b5/_/download/contextbatch/css/plugin.viewsource/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/df762e50bc83a9608020a1ff1476cda6-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/5714bd5a5c86641cad10106916cda7c8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css" media="all">
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/8/_/styles/colors82a8.css?spaceKey=TECHDOC" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/8/_/styles/custom82a8.css?spaceKey=TECHDOC" media="all">

    </head>

    <body class="mceContentBody aui-theme-default wiki-content fullsize">
        <p>&nbsp;</p>         <table class="wysiwyg-macro" data-macro-name="excerpt" data-macro-id="58e7379d-c9b2-41c6-9870-befa81044445" data-macro-parameters="atlassian-macro-output-type=BLOCK" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading08d0.png?definition=e2V4Y2VycHQ6YXRsYXNzaWFuLW1hY3JvLW91dHB1dC10eXBlPUJMT0NLfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><table class="wysiwyg-macro" data-macro-name="tip" data-macro-id="f8007c5b-575b-4651-8567-aff7a413b05b" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading7f8c.png?definition=e3RpcH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>The following recipe is valid for any type of settings supported by Symfony framework.</p></td></tr></table></td></tr></table><p> </p><p><img class="editor-inline-macro" src="../servlet/confluence/placeholder/macro4373.png?definition=e3RvYzptaW5MZXZlbD0yfQ&amp;locale=en_GB&amp;version=2" data-macro-name="toc" data-macro-id="660d8dc7-3321-43d2-a955-9bc5877b950a" data-macro-parameters="minLevel=2" data-macro-schema-version="1"></p><h1>Use case</h1><p>Usually, you develop your website using one or several custom bundles as this is a best practice. However, dealing with core bundle semantic configuration can be a bit tedious if you maintain it in the main <code>app/config/ezplatform.yml</code> configuration file.</p><p>This recipe will show you how to import configuration from a bundle the manual way and the implicit way.</p><h2>The manual way</h2><p>This is the simplest way of doing and it has the advantage of being explicit. The idea is to use the <code>imports</code> statement in your main <code>ezplatform.yml</code>:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="a7bf1145-53d2-4450-b9e8-9f0c93dbad02" data-macro-parameters="title=app/config/ezplatform.yml" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading8c42.png?definition=e2NvZGU6dGl0bGU9YXBwL2NvbmZpZy9lenBsYXRmb3JtLnltbH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>imports:
    # Let's import our template selection rules that reside in our custom bundle.
    # MyCustomBundle is the actual bundle name
    - {resource: "@AcmeTestBundle/Resources/config/templates_rules.yml"}
 
exponential:
    # ...</pre></td></tr></table><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="e86aca80-f4c6-4ac9-a2f3-2348eeb5350d" data-macro-parameters="title=templates_rules.yml, placed under Resources/config folder in AcmeTestBundle" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingeb28.png?definition=e2NvZGU6dGl0bGU9dGVtcGxhdGVzX3J1bGVzLnltbCwgcGxhY2VkIHVuZGVyIFJlc291cmNlcy9jb25maWcgZm9sZGVyIGluIEFjbWVUZXN0QnVuZGxlfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre># Here I need to reproduce the right configuration tree.
# It will be merged with the main one
exponential:
    system:
        my_siteaccess:
            ezpage:
                layouts:
                    2ZonesLayout1:
                        name: "2 zones (layout 1)"
                        template: "AcmeTestBundle:zone:2zoneslayout1.html.twig"
    
            content_view:
                full:
                    article_test:
                        template: "AcmeTestBundle:full:article_test.html.twig"
                        match:
                            Id\Location: [144,149]
                    another_test:
                        template: "::another_test.html.twig"
                        match:
                            Id\Content: 142
    
            block_view:
                campaign:
                    template: "AcmeTestBundle:block:campaign.html.twig"
                    match:
                        Type: "Campaign"

</pre></td></tr></table><table class="wysiwyg-macro" data-macro-name="info" data-macro-id="53e33e34-7a40-4a6a-be83-61f6395acca8" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingd35c.png?definition=e2luZm99&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>During the merge process, if the imported configuration files contain entries that are already defined in the main configuration file, <strong>they will override them</strong>.</p></td></tr></table><table class="wysiwyg-macro" data-macro-name="tip" data-macro-id="70805784-4a28-407c-b356-7ee000a73838" data-macro-parameters="title=Tip" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading6668.png?definition=e3RpcDp0aXRsZT1UaXB9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>If you want to import configuration for development use only, you can do so in your <code>exponential_dev.yml</code> </p></td></tr></table><h2>The implicit way</h2><p>The following example will show you <strong>how to implicitly load settings to configure eZ Platform kernel</strong>. Note that this is also valid for any bundle!</p><p>We assume here that you're aware of <a href="http://symfony.com/doc/current/book/service_container.html#importing-configuration-via-container-extensions">service container extensions</a>.</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="5f74a6f4-945c-428c-84f3-d0a62ac2f97b" data-macro-parameters="language=php|title=Acme/TestBundle/DependencyInjection/AcmeTestExtension" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingfc6b.png?definition=e2NvZGU6bGFuZ3VhZ2U9cGhwfHRpdGxlPUFjbWUvVGVzdEJ1bmRsZS9EZXBlbmRlbmN5SW5qZWN0aW9uL0FjbWVUZXN0RXh0ZW5zaW9ufQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>&lt;?php
 
namespace Acme\TestBundle\DependencyInjection;
 
use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\Config\Resource\FileResource;
use Symfony\Component\Config\FileLocator;
use Symfony\Component\DependencyInjection\Extension\PrependExtensionInterface;
use Symfony\Component\HttpKernel\DependencyInjection\Extension;
use Symfony\Component\DependencyInjection\Loader;
use Symfony\Component\Yaml\Yaml;
 
/**
 * This is the class that loads and manages your bundle configuration
 *
 * To learn more see {@link http://symfony.com/doc/current/cookbook/bundles/extension.html}
 */
class AcmeTestExtension extends Extension implements PrependExtensionInterface
{
    // ...
 
    /**
     * Allow an extension to prepend the extension configurations.
     * Here we will load our template selection rules.

     *
     * @param ContainerBuilder $container
     */
    public function prepend( ContainerBuilder $container )
    {
        // Loading our YAML file containing our template rules
        $configFile = __DIR__ . '/../Resources/config/template_rules.yml';
        $config = Yaml::parse( file_get_contents( $configFile ) );
        // We explicitly prepend loaded configuration for "exponential" namespace.
        // So it will be placed under the "exponential" configuration key, like in exponential.yml.
        $container->prependExtensionConfig( 'exponential', $config );
        $container->addResource( new FileResource( $configFile ) );
    }
}

</pre></td></tr></table><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="017f6cdd-c87d-46ea-b695-bde21daf991e" data-macro-parameters="title=AcmeTestBundle/Resources/config/template_rules.yml" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading032b.png?definition=e2NvZGU6dGl0bGU9QWNtZVRlc3RCdW5kbGUvUmVzb3VyY2VzL2NvbmZpZy90ZW1wbGF0ZV9ydWxlcy55bWx9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre># We explicitly prepend config for "exponential" namespace in service container extension, 
# so no need to repeat it here
system:
    ezdemo_frontend_group:
        ezpage:
            layouts:
                2ZonesLayout1:
                    name: "2 zones (layout 1)"
                    template: "AcmeTestBundle:zone:2zoneslayout1.html.twig"
 
        content_view:
            full:
                article_test:
                    template: "AcmeTestBundle:full:article_test.html.twig"
                    match:
                        Id\Location: 144
                another_test:
                    template: "::another_test.html.twig"
                    match:
                        Id\Content: 142
 
        block_view:
            campaign:
                template: "AcmeTestBundle:block:campaign.html.twig"
                match:
                    Type: "Campaign"

</pre></td></tr></table><table class="wysiwyg-macro" data-macro-name="info" data-macro-id="1957f99d-53f9-4a66-9d91-87e69c7a0686" data-macro-parameters="title=Regarding performance" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading605a.png?definition=e2luZm86dGl0bGU9UmVnYXJkaW5nIHBlcmZvcm1hbmNlfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>Service container extensions are called only when the container is being compiled, so there is nothing to worry about regarding performance.</p></td></tr></table><table class="wysiwyg-macro" data-macro-name="tip" data-macro-id="ac7f3c93-b53a-4881-b12e-fdd572b05069" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading7f8c.png?definition=e3RpcH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>Configuration loaded this way will be overridden by the main <code>ezplatform.yml</code> file.</p></td></tr></table><p> </p><p> </p>
        <p>&nbsp;</p>
    </body>

<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=30711491 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 10:00:30 GMT -->
</html>
