                    
    
                    
    
                    
    
<!DOCTYPE html>
<html>
    
<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=17105703 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 21 Oct 2014 11:55:53 GMT -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>View Source</title>
        <link rel="canonical" href="../../pages/viewpage8bb3.html?pageId=17105703" />
        <link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch934e.css?media=print" media="print">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 8]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+8" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/1f2a9c4c7f2593422cc9b02d1a652a22/_/download/contextbatch/css/plugin.viewsource/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/70f6d025b64de5008ccd042576cd8d90/_/download/contextbatch/css/page/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/70f6d025b64de5008ccd042576cd8d90/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/26ac2724af3c6ece1051365650d982fa/_/download/contextbatch/css/editor-content/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/1.3/_/download/batch/com.atlassian.confluence.plugins.confluence-hig/com.atlassian.confluence.plugins.confluence-highlight-ac" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/1.3/_/download/batch/com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources/com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/12/_/styles/colors.css" media="all">

    </head>

    <body class="mceContentBody aui-theme-default wiki-content fullsize">
        <p>&nbsp;</p>         <p>This is a step-by-step guide on how to upload your Exponential installation to the cloud for the first time</p><h1>Ensure you meet the requirements</h1><p>In order to upload a Exponential to the cloud, these conditions needs to be met:</p><ul><li><span>Make sure you comply with the<a class="confluence-link" href="../../display/EZPCLOUD/eZ%2bPublish%2bCloud%2b-Beta-%2bWhitelist.html" data-linked-resource-id="16285929" data-linked-resource-type="page" data-linked-resource-default-alias="Exponential Cloud -Beta- Whitelist" data-base-url="../../index.html"> Exponential Cloud Whitelist</a></span></li><li>You need a work installation of Exponential running locally<ul><li>Your local Exponential installation must have the <a class="confluence-link" href="../../display/EZPCLOUD/eZ%2bCloud%2bextension.html" data-linked-resource-id="16286206" data-linked-resource-type="page" data-linked-resource-default-alias="eZ Cloud extension" data-base-url="../../index.html">eZ Cloud extension</a> installed</li></ul></li><li>You need access to the cloud administration interface: <a href="http://cloud.ez.no/">http://admin.cloud.ez.no</a></li><li><span style="font-size: 10.0pt;line-height: 13.0pt;">Your account needs to have a SSH key associated with your account</span></li><li><span style="font-size: 10.0pt;line-height: 13.0pt;">Basic knowledge about SSH, Git and SFTP</span></li><li><span style="font-size: 10.0pt;line-height: 13.0pt;">A Git and SFTP client installed locally</span><span style="font-size: 10.0pt;line-height: 13.0pt;"><br /></span></li></ul><div>For the examples below, we assume you are on a unix based system with Git, openssh's SFTP client, mysqldump and <code>rsync</code> installed</div><h2>How to check that you have a SSH key</h2><p><span style="font-size: 10.0pt;line-height: 13.0pt;"> This is the procedure for checking that you have a SSH key associated with your cloud account</span></p><ol><li><span style="font-size: 10.0pt;line-height: 13.0pt;">Log in to <a href="http://admin.cloud.ez.no/">http://admin.cloud.ez.no</a></span></li><li>The frontpage will show you the list of environments you have access to</li><li>Click on the environment you want to inspect</li><li>Click the &quot;Manage Users&quot; button (not all users have this button, just &quot;OWNER&quot;. All users might go to <a href="http://login.ez.no/">login.ez.no</a> and find their key, if it was uploaded, in the corresponding field in their profile)</li><li>Your user should then be listed, including information about your SSH key</li></ol><h2>Upload a SSH key to your account</h2><p><span style="font-size: 10.0pt;line-height: 13.0pt;">If you do not have a SSH key associated with your account, this is how to upload it</span></p><ol><li><span style="font-size: 10.0pt;line-height: 13.0pt;">Log in to <a href="http://share.ez.no/">http://share.ez.no</a></span></li><li>Edit your profile on : <a href="http://share.ez.no/community/profile">http://share.ez.no/community/profile</a></li><li>Click on &quot;Edit account&quot; button (<strong>do not confuse this with the &quot;Edit profile&quot; button</strong>)</li><li>Cut and paste in your public SSH in the &quot;Public key (openSSH format only&quot; field</li><li>Save your changes</li><li>Log out of <a href="http://admin.cloud.ez.no/">http://admin.cloud.ez.no</a> (if you where logged in)</li><li>Log in again on <a href="http://admin.cloud.ez.no/">http://admin.cloud.ez.no</a></li><li>Follow the steps explained in the &quot;How to check that you have a SSH key&quot; chapter</li></ol><h1>Obtain login information to Stage area, Git and SFTP</h1><p>This is how you get login information for Git and SFTP</p><ol><li>Log in to <a href="http://admin.cloud.ez.no/">http://admin.cloud.ez.no</a></li><li>The frontpage will show you the list of environments you have access to</li><li>Click on the environment you want to inspect</li><li>Click the &quot;Show Details&quot; link</li><li>Login information about how to access sites in stage and rollback state is displayed</li><li>Login information about how to access Git is displayed</li><li>Login information about how to access SFTP is displayed on the format : username@ftphostname:portno</li></ol><h1>Upload your installation to the cloud</h1><p>This is the overview on how to upload your installation to the cloud:</p><ul><li>your code ( exponential + extensions + settings ) must be uploaded to the git repository</li><li>Your database and content files ( like images) must be uploaded to the SFTP server</li></ul><h2>Uploading your code to Git</h2><p>The example below will assume</p><ul><li>you have your Exponential site locally in <code>/var/www/mysite.com</code></li><li>your git repository is located at <code>mysite@git.ez.cloud.ixonos.com:ez.git</code></li></ul><h3>Clone the Git repository</h3><p>You can clone the Git repository by running the following:</p><table class="wysiwyg-macro" data-macro-name="noformat" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>$cd ~
$git clone mysite@git.ez.cloud.ixonos.com:ez.git mysite</pre></td></tr></table><p>Copy your Exponential site to the Git directory (except the var/ directory):</p><table class="wysiwyg-macro" data-macro-name="noformat" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>$rsync -av --filter="+ /.htaccess*" --filter="- .**" --filter "- /var" /var/www/mysite.com/ ~/mysite/</pre></td></tr></table><p> </p><h3>Push your code to git</h3><table class="wysiwyg-macro" data-macro-name="noformat" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>$cd ~/mysite
$git add .
$git commit
$git push origin master</pre></td></tr></table><p> </p><h3>Tag the code in Git</h3><table class="wysiwyg-macro" data-macro-name="noformat" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>$cd ~/mysite

$git tag mysite-v1.0
$git push origin mysite-v1.0</pre></td></tr></table><p> </p><h2>Upload your database and var/ directory via SFTP</h2><h3>Make the DB dump</h3><p>Use mysqldump to create a dump like this:</p><table class="wysiwyg-macro" data-macro-name="noformat" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>$cd /tmp
$mysqldump -u [username ]-p [database] > mysite-v1.0.sql</pre></td></tr></table><p>( replace username and database name according to your system )</p><h3>Upload the DB to SFTP</h3><table class="wysiwyg-macro" data-macro-name="noformat" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>cd /tmp
$sftp -P [portno] [username]@hostname
SFTP> cd db
SFTP> put mysite-v1.0.sql
SFTP> exit
$rm /tmp/mysite-v1.0.sql</pre></td></tr></table><p> </p><h3>Make the var/ dump</h3><table class="wysiwyg-macro" data-macro-name="noformat" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>$cd /var/www/mysite.com/var
$tar -czf /tmp/mysite-v1.0.tar.gz ezwebin_site storage</pre></td></tr></table><p> </p><p>The example above assumes your vardir is named &quot;ezwebin_site&quot;. It might be called something else on your system</p><h3>Upload the var dump to SFTP</h3><table class="wysiwyg-macro" data-macro-name="noformat" style="background-image: url(../servlet/confluence/placeholder/macro-heading8813.png?definition=e25vZm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>$cd /tmp
$sftp -P [portno] [username]@hostname
SFTP> cd var
SFTP> put mysite-v1.0.tar.gz
SFTP> exit
$rm mysite-v1.0.tar.gz</pre></td></tr></table><p> </p><h2>Stage your installation</h2><ol><li>Log in to <a href="http://admin.cloud.ez.no/">http://admin.cloud.ez.no</a></li><li><span style="font-size: 10.0pt;line-height: 13.0pt;">The frontpage will show you the list of environments you have access to</span></li><li><span style="font-size: 10.0pt;line-height: 13.0pt;">Click on the environment you want to stage</span></li><li><span style="font-size: 10.0pt;line-height: 13.0pt;">Click the &quot;Edit&quot; button</span></li></ol><h3>Software Repository</h3><ol><li><span style="font-size: 10.0pt;line-height: 13.0pt;">Click &quot;New Deployment&quot; link</span></li><li><span style="font-size: 10.0pt;line-height: 13.0pt;">Provide a &quot;Deployment name&quot; and check the git tag &quot;<code>mysite-v1.0</code>&quot;</span></li><li><span style="font-size: 10.0pt;line-height: 13.0pt;">Click &quot;Next step&quot; button</span></li></ol><h3>Exponential Version</h3><ol><li>Select &quot;Exponential 4.7&quot; in the version drop down</li><li>Click &quot;Next Step&quot; button</li></ol><h3>Database and File Import</h3><ol><li>Click the checkbox &quot;I would like to create a new database from the database dump and import the corresponding files.&quot;</li><li>Click the checkbox &quot;<code>mysite-v1.0.sql</code>&quot;</li><li>Click the checkbox &quot;<code>mysite-v1.0.tar.gz</code>&quot;</li><li>Click &quot;Next Step&quot; button</li></ol><h3>Review</h3><ol><li>Review your configuration</li><li>Click &quot;Create Deployment&quot; button</li></ol><p> </p><p> </p>
        <p>&nbsp;</p>
    </body>

<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=17105703 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 21 Oct 2014 11:55:53 GMT -->
</html>
