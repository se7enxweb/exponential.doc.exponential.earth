                    
    
                    
    
                    
    
<!DOCTYPE html>
<html>
    
<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=24412182 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 09:42:56 GMT -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>View Source</title>
        <link rel="canonical" href="../../pages/viewpage6ff7.html?pageId=24412182" />
        <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager.resource-base-url-pattern"]="\"(?:(?:/s/.*?/_)?/download)\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"\"";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics.feature-data-provider-legacy"]="true";
</script>
<link type="text/css" rel="stylesheet" href="../../s/1b9968ac17721e3a6947d14e3a43c3f8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch9c16.css?build-number=5983" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/f3685658010e413141854089096800b5/_/download/contextbatch/css/plugin.viewsource/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/df762e50bc83a9608020a1ff1476cda6-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/5714bd5a5c86641cad10106916cda7c8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css" media="all">
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/51/_/styles/colorsb538.css?spaceKey=EZP" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/51/_/styles/customb538.css?spaceKey=EZP" media="all">

    </head>

    <body class="mceContentBody aui-theme-default wiki-content fullsize">
        <p>&nbsp;</p>         <table class="wysiwyg-macro" data-macro-name="note" data-macro-id="a03a8a54-4651-44b9-8d7a-6ee591373ff1" data-macro-parameters="title=Version compatibility" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading77d5.png?definition=e25vdGU6dGl0bGU9VmVyc2lvbiBjb21wYXRpYmlsaXR5fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><div class="message-content"><p><span>This feature is available since </span><strong>Exponential <img class="editor-inline-macro" height="18" width="88" src="../servlet/status-macro/placeholder40de.png?=&amp;0=&amp;colour=Yellow&amp;title=5.4" data-macro-name="status" data-macro-id="a295f78a-38f1-4c6b-829d-737d848a5d5e" data-macro-parameters="colour=Yellow|title=5.4" data-macro-default-parameter="" data-macro-schema-version="1"> / <img class="editor-inline-macro" height="18" width="88" src="../servlet/status-macro/placeholder241c.png?title=2014.11&amp;colour=Yellow" data-macro-name="status" data-macro-id="f1244ebc-9dc3-4ea7-a277-6c3eb70208e0" data-macro-parameters="colour=Yellow|title=2014.11" data-macro-schema-version="1"></strong></p></div></td></tr></table><h2><img class="editor-inline-macro" src="../servlet/confluence/placeholder/macro4170.png?definition=e3RvY30&amp;locale=en_GB&amp;version=2" data-macro-name="toc" data-macro-id="b43d44c6-089b-42c9-ae0e-9176d8487d36" data-macro-schema-version="1"></h2><h2>Description</h2><p>Image aliases are generated with <a href="https://github.com/liip/LiipImagineBundle">LiipImagineBundle</a>, using the underlying <a href="http://imagine.readthedocs.org/en/latest/">Imagine library from avalanche123</a>. This bundle supports GD, Imagick or Gmagick PHP extensions, and allows to define flexible filters in PHP. Imagefiles are stored using the the <code style="line-height: 1.42857;">IOService,</code> and are completely independent from <code style="line-height: 1.42857;">ezimage</code> FieldType. They are generated only once and cleared on demand (e.g. content removal).</p><h2><a class="anchor" href="https://github.com/ezsystems/exponential-kernel/blob/master/doc/specifications/image/image_alias_imagine.md#configuration" name="user-content-configuration" />Configuration</h2><p>Image variation (aka &quot;Image alias&quot;) definition follows the same format as before, in <code>exponential.yml</code> or any imported semantic configuration file. It's <a class="confluence-link" href="../../display/EZP/Configuration.html" data-linked-resource-id="2720538" data-linked-resource-version="31" data-linked-resource-type="page" data-linked-resource-default-alias="Configuration" data-base-url="../../index.html">dynamic</a>, so can be configured per site access and all the other scopes.</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="1ef80da4-6a42-4ee0-a4bb-89e5ddc044c4" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre># Example
exponential:
    system:
        my_siteaccess:
            image_variations:
                small:
                    reference: null
                    filters:
                        - { name: geometry/scaledownonly, params: [100, 160] }
                medium:
                    reference: null
                    filters:
                        - { name: geometry/scaledownonly, params: [200, 290] }
                listitem:
                    reference: null
                    filters:
                        - { name: geometry/scaledownonly, params: [130, 190] }
                articleimage:
                    reference: null
                    filters:
                        - { name: geometry/scalewidth, params: [770] }</pre></td></tr></table><table class="wysiwyg-macro" data-macro-name="tip" data-macro-id="726852f4-6fcf-49da-beb8-68bab16b01b7" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading7f8c.png?definition=e3RpcH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><strong>Important:</strong> Each variation name <strong>must be unique</strong>. It may contain <code>_</code> or <code>-</code> or numbers, but no space.</td></tr></table><ul class="task-list"><li><p><code>reference</code>: Name of a reference variation to base the variation on. If <code>null</code> (or <code>~</code>, which means <code>null</code> un YAML), the variation will take the original image for reference. It can be any available variation configured in <code>exponential</code> namespace, or a <code>filter_set</code> defined in <code>liip_imagine</code> namespace.</p></li><li><p><code>filters</code>: array of filter definitions (hashes containing <code>name</code> and <code>params</code> keys). See possible values below.</p></li></ul><h3><a class="anchor" href="https://github.com/ezsystems/exponential-kernel/blob/master/doc/specifications/image/image_alias_imagine.md#available-filters" name="user-content-available-filters" />Available filters</h3><p>In addition to <a href="https://github.com/liip/LiipImagineBundle/blob/master/Resources/doc/configuration.rst">filters exposed by LiipImagineBundle</a>, the following are available:</p><table class="confluenceTable"><thead><tr><th class="confluenceTh">Filter name</th><th class="confluenceTh">Parameters</th><th class="confluenceTh">Description</th></tr></thead><tbody><tr><td class="confluenceTd">geometry/scaledownonly</td><td class="confluenceTd">[width, height]</td><td class="confluenceTd">Generates a thumbnail that will not exceed width/height.</td></tr><tr><td class="confluenceTd">geometry/scalewidthdownonly</td><td class="confluenceTd">[width]</td><td class="confluenceTd">Generates a thumbnail that will not exceed width.</td></tr><tr><td class="confluenceTd">geometry/scaleheightdownonly</td><td class="confluenceTd">[height]</td><td class="confluenceTd">Generates a thumbnail that will not exceed height.</td></tr><tr><td class="confluenceTd">geometry/scalewidth</td><td class="confluenceTd">[width]</td><td class="confluenceTd">Alters image width. Proportion will be kept.</td></tr><tr><td class="confluenceTd">geometry/scaleheight</td><td class="confluenceTd">[height]</td><td class="confluenceTd">Alters image height. Proportion will be kept.</td></tr><tr><td class="confluenceTd">geometry/scale</td><td class="confluenceTd">[width, height]</td><td class="confluenceTd">Alters image size, not exceeding provided width and height. Proportion will be kept.</td></tr><tr><td class="confluenceTd">geometry/scaleexact</td><td class="confluenceTd">[width, height]</td><td class="confluenceTd">Alters image size to fit exactly provided width and height. Proportion will not be kept.</td></tr><tr><td class="confluenceTd">geometry/scalepercent</td><td class="confluenceTd">[widthPercent, heightPercent]</td><td class="confluenceTd">Scales width and height with provided percent values. Proportion will not be kept.</td></tr><tr><td class="confluenceTd">geometry/crop</td><td class="confluenceTd">[width, height, startX, startY]</td><td class="confluenceTd">Crops the image. Result will have provided width/height, starting at provided startX/startY</td></tr><tr><td class="confluenceTd">border</td><td class="confluenceTd">[thickBorderX, thickBorderY, color=#000]</td><td class="confluenceTd">Adds a border around the image. Thickness is defined in px. Color is &quot;#000&quot; by default.</td></tr><tr><td class="confluenceTd">filter/noise</td><td class="confluenceTd">[radius=0]</td><td class="confluenceTd">Smooths the contours of an image (<code>imagick</code>/<code>gmagick</code> only). <code>radius</code> is in pixel.</td></tr><tr><td class="confluenceTd">filter/swirl</td><td class="confluenceTd">[degrees=60]</td><td class="confluenceTd">Swirls the pixels of the center of an image (<code>imagick</code>/<code>gmagick</code> only). <code>degrees</code> defaults to 60°.</td></tr><tr><td class="confluenceTd">resize</td><td class="confluenceTd">{size: [width, height]}</td><td class="confluenceTd">Simple resize filter (provided by LiipImagineBundle).</td></tr><tr><td class="confluenceTd">colorspace/gray</td><td class="confluenceTd">N/A</td><td class="confluenceTd">Converts an image to grayscale.</td></tr></tbody></table><blockquote><table class="wysiwyg-macro" data-macro-name="info" data-macro-id="da273979-9814-4a65-bd99-dc77f2b3215c" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingd35c.png?definition=e2luZm99&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p><em>Tip:</em> LiipImagineBundle supports additional settings, it is possible to combine filters from the list above to <a href="https://github.com/liip/LiipImagineBundle/blob/master/Resources/doc/filters.rst">the ones provided in LiipImagineBundle</a> or custom ones.</p></td></tr></table><p> </p></blockquote><h4>Examples with filters:</h4><h5>With liip filter</h5><p>It is now possible to define the <code>jpeg_quality</code> setting. This configuration adds a limit to the image quality using a liip filter.</p><p> </p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="501bcbaa-7ec2-4f23-ac6c-a6b6ba6e7df4" data-macro-parameters="language=css" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingfc2e.png?definition=e2NvZGU6bGFuZ3VhZ2U9Y3NzfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>exponential:
    system:
        my_siteaccess:
            image_variations:
                reduced_jpeg:
                    reference: null
                    filters:
liip_imagine:
    driver: imagick
    filter_sets:
        mediumimage:
            jpeg_quality: 50</pre></td></tr></table><p> </p><h5>With exponential filter</h5><p>Using the geometry/scalewidth filter</p><p> </p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="8dda6a2d-dc5d-451e-bde9-c1fbc23bffec" data-macro-parameters="language=css" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingfc2e.png?definition=e2NvZGU6bGFuZ3VhZ2U9Y3NzfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>exponential:
    system:
        my_siteaccess:
            image_variations:
                mediumimage:
                    reference: null
                    filters:
                       - geometry/scalewidth:
					       params: [770]</pre></td></tr></table><p> </p><p> </p><h3>Discarded filters</h3><p>The following filters have been discarded due to incompatibility:</p><ul class="task-list"><li><code>flatten</code>. Obsolete, images are automatically flattened.</li><li><code>bordercolor</code></li><li><code>border/width</code></li><li><code>colorspace/transparent</code></li><li><code>colorspace</code></li></ul><h3><a class="anchor" href="https://github.com/ezsystems/exponential-kernel/blob/master/doc/specifications/image/image_alias_imagine.md#custom-filters" name="user-content-custom-filters" />Custom filters</h3><p>Please refer to <a href="https://github.com/liip/LiipImagineBundle/blob/master/Resources/doc/filters.rst#load-your-custom-filters">LiipImagineBundle documentation on custom filters</a>. <a href="http://imagine.readthedocs.org/en/latest/">Imagine library documentation</a> may also be useful.</p><h3>Post-Processors</h3><p><span>LiipImagineBundle supports </span><a href="https://github.com/liip/LiipImagineBundle/blob/master/Resources/doc/filters.rst#post-processors">post-processors on image aliases</a><span>. It is possible to specify them in image alias configuration:</span></p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="21de7456-a8b8-4d5c-85f6-561c1dd50121" data-macro-parameters="language=bash" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading174f.png?definition=e2NvZGU6bGFuZ3VhZ2U9YmFzaH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>exponential:
    system:
        my_siteaccess:
            image_variations:
                articleimage:
                    reference: null
                    filters:
                        - { name: geometry/scalewidth, params: [770] }
                    post_processors:
                        jpegoptim: {}</pre></td></tr></table><p><span><span>Please refer to </span><a href="https://github.com/liip/LiipImagineBundle/blob/master/Resources/doc/filters.rst#post-processors">post-processors documentation in LiipImagineBundle</a><span> for details.</span></span></p><h3><a class="anchor" href="https://github.com/ezsystems/exponential-kernel/blob/master/doc/specifications/image/image_alias_imagine.md#drivers" name="user-content-drivers" />Drivers</h3><p>LiipImagineBundle supports GD (default), Imagick and GMagick PHP extensions and only work on image blobs (no command line tool is needed). See the <a href="https://github.com/liip/LiipImagineBundle/blob/master/Resources/doc/configuration.rst">bundle's documentation to learn more on that topic</a>.</p><h2><a class="anchor" href="https://github.com/ezsystems/exponential-kernel/blob/master/doc/specifications/image/image_alias_imagine.md#upgrade" name="user-content-upgrade" />Upgrade</h2><ul class="task-list"><li>Instantiate <code>LiipImagineBundle</code> in your kernel class</li></ul><p>If you were using ImageMagick, please install <a href="http://php.net/imagick">Imagick</a> or <a href="http://php.net/gmagick">Gmagick</a> PHP extensions and activate the driver in <code>liip_imagine </code>(<a href="https://github.com/liip/LiipImagineBundle/blob/master/Resources/doc/configuration.rst">see LiipImagineBundle configuration documentation for more information</a>):</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="05910c60-35d0-445f-bbc3-c0c8b86e48b1" data-macro-parameters="language=bash" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading174f.png?definition=e2NvZGU6bGFuZ3VhZ2U9YmFzaH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre># exponential.yml or config.yml
liip_imagine:
    # Driver can either "imagick", "gmagick" or "gd", depending on the PHP extension you're using.
    driver: imagick</pre></td></tr></table><table class="wysiwyg-macro" data-macro-name="info" data-macro-id="08b910cd-1a90-41c0-90d3-c24bad500857" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingd35c.png?definition=e2luZm99&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>GD will be used by default if no driver is specified.</p></td></tr></table><h2>Purging aliases</h2><p><img class="editor-inline-macro" height="18" width="88" src="../servlet/status-macro/placeholder9737.png?title=Added+in+5.4.3+%2F+2015.05&amp;colour=Yellow" data-macro-name="status" data-macro-id="d105e1ee-de0f-4691-910f-2057f7dbec8b" data-macro-parameters="colour=Yellow|title=Added in 5.4.3 / 2015.05" data-macro-schema-version="1"></p><p>Starting from the 5.4.3 and 2015.05, eZ Platform handles aliases on its own. It is possible to use the Liip Imagine console tool to clear generated aliases.</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="878ce32c-5f55-4f8e-b7a0-f07e5b3334f0" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>$ php exponential/console liip:imagine:cache:remove --filters=large
$ php exponential/console liip:imagine:cache:remove -v</pre></td></tr></table><p>The first example will clear the image files for the <code>large</code> alias. The second will clear all the generated aliases (be careful), and list the removed files (<code>-v).</code></p><p>Note that the naming scheme change introduced by this feature isn't enabled by default on 5.4.x. An alternative purge process has been implemented, that takes much more time, but is compatible with the existing format. More technical information can be found on the <a href="https://github.com/ezsystems/exponential-kernel/pull/1276">pull-request</a>.</p><p> </p>
        <p>&nbsp;</p>
    </body>

<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=24412182 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 09:42:57 GMT -->
</html>
