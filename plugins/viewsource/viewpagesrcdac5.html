                    
    
                    
    
                    
    
<!DOCTYPE html>
<html>
    
<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=31431755 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 10:15:27 GMT -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>View Source</title>
        <link rel="canonical" href="../../pages/viewpagedac5.html?pageId=31431755" />
        <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager.resource-base-url-pattern"]="\"(?:(?:/s/.*?/_)?/download)\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"\"";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics.feature-data-provider-legacy"]="true";
</script>
<link type="text/css" rel="stylesheet" href="../../s/1b9968ac17721e3a6947d14e3a43c3f8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch9c16.css?build-number=5983" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/f3685658010e413141854089096800b5/_/download/contextbatch/css/plugin.viewsource/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/df762e50bc83a9608020a1ff1476cda6-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/5714bd5a5c86641cad10106916cda7c8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css" media="all">
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/6/_/styles/colors74cd.css?spaceKey=DEVELOPER" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/6/_/styles/custom74cd.css?spaceKey=DEVELOPER" media="all">

    </head>

    <body class="mceContentBody aui-theme-default wiki-content fullsize">
        <p>&nbsp;</p>         <div class="contentLayout2">
<div class="columnLayout two-right-sidebar" data-layout="two-right-sidebar">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2>1. Install a LAMP Stack (*NIX, Apache, MySQL, PHP5+)</h2><p>Depending on your selected *NIX distribution, you may need to install part or all of the LAMP stack required to run eZ Platform or eZ Enterprise. Before getting started, make sure you review our <a href="../../pages/viewpage414d.html?pageId=31429536">requirements</a> page to see the systems we support and use for testing. You can try using an unsupported configuration, but your results may vary.</p><p>Please not that, while OS X <em>is</em> a *NIX-based system, it has its own unique requirements listed in our <a class="confluence-link" href="../../display/DEVELOPER/Installation%2bGuide%2bfor%2bOS%2bX.html" data-linked-resource-id="31431738" data-linked-resource-version="5" data-linked-resource-type="page" data-linked-resource-default-alias="Installation Guide for OS X" data-base-url="https://doc.ez.no">Installation Guide for OS X</a>. Developer-maintained installation notes are kept in our GitHub repository at this location as well: <a href="https://github.com/ezsystems/ezplatform/blob/master/INSTALL.md">https://github.com/ezsystems/ezplatform/blob/master/INSTALL.md</a></p><p>You may use your system's package manager (yum, apt-get, etc.) to obtain a copy of Apache, MySQL, and PHP, or download the latest versions from the official websites and install manually:</p><ul><li><a href="https://httpd.apache.org/download.cgi">Apache2</a></li><li><a href="http://dev.mysql.com/downloads/mysql/">MySQL</a></li><li><a href="http://php.net/">PHP 5.6+</a></li></ul><p>For Debian 8.5, for example, we'd recommend using <code>apt-get</code> to install <code>apache2</code>, <code>mysql-server</code>, <code>mysql-client</code>, and <code>php5-*</code> (all the packages listed in the <a href="../../pages/viewpage414d.html?pageId=31429536">requirements</a>), as well as <code>git</code> for version control. If the system on which you're doing the install has only 1 or 2 GB of RAM, be sure to <a href="../../display/DEVELOPER/Set%2bup%2bSwap%2bon%2bDebian%2b8.html">set up swap</a> so you don't run out of RAM when running the composer scripts later on.</p><h2>2. Get Composer</h2><p>You'll need Composer, the PHP command line dependency manager.</p><p>a. Install Composer by running the following command on the terminal of the machine upon which you're installing eZ Platform:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="8cfe253d-68e9-4263-8033-6fc01ab4cfb4" data-macro-parameters="language=bash" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading174f.png?definition=e2NvZGU6bGFuZ3VhZ2U9YmFzaH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>php -r "readfile('https://getcomposer.org/installer');" | php</pre></td></tr></table><p>b. Move the downloaded composer.phar file to a globally-available path:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="7723ab6c-ccf2-4e86-95c7-7dd18e3efc23" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>mv composer.phar /usr/local/bin/composer</pre></td></tr></table><h2>3. Download the desired version of eZ Platform or eZ Enterprise</h2><ul><li>If you are installing eZ Platform, download the latest archive from <a href="http://share.ez.no/latest">http://share.ez.no/latest</a></li><li>For licensed eZ Enterprise customers, download your file here: <a href="https://support.ez.no/Downloads" style="line-height: 1.42857;">https://support.ez.no/Downloads</a></li></ul><p>Expand the archive into <code>/var/www/ezplatform</code> or the folder name or your choosing.</p><p>For developers interested in working with the latest version of eZ Platform, you may also clone the latest from our GitHub repository:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="697efd94-2d1e-4f5c-949c-ebc35c0c07af" data-macro-parameters="language=bash" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading174f.png?definition=e2NvZGU6bGFuZ3VhZ2U9YmFzaH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>cd /var/www
git clone https://github.com/ezsystems/ezplatform.git /var/www/ezplatform</pre></td></tr></table><p>You can rename the destination folder to whatever you like. This is where eZ Platform will live, and you'll point your virtual host to this folder to use as its root. You may choose to download an archive file from <a href="http://share.ez.no/downloads/downloads">share.ez.no/downloads</a> instead of cloning from GitHub, and extract the eZ Platform archive to a similar directory. The subsequent steps are identical, regardless of the method you choose to obtain eZ Platform.</p><h2>4. Create a new database for eZ Platform</h2><p>Create new database (you can substitute <code>ezplatform</code> with the database name you want to use, but keep it in mind as you run the installation script):</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="405e71ca-9076-4a82-b13d-ce333ad69a0c" data-macro-parameters="language=bash" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading174f.png?definition=e2NvZGU6bGFuZ3VhZ2U9YmFzaH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>/usr/bin/mysql -u root -e 'create database ezplatform;'</pre></td></tr></table><h2>5. Run the Installation Scripts</h2><p>Composer will look inside the composer.json file and install all of the required packages to run eZ Platform. There's a script in the app folder called console that will install eZ Platform for your desired environment as well (dev/prod).</p><p>This is the step where you want to make sure you have <a href="../../display/DEVELOPER/Set%2bup%2bSwap%2bon%2bDebian%2b8.html">swap configured for your machine</a> if it does not have an abundance of RAM.</p><h3>a. Run composer install:</h3><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="a8dca98a-410f-4531-a019-ba9788eb6575" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>cd /var/www/ezplatform
php -d memory_limit=-1 /usr/local/bin/composer install</pre></td></tr></table><p>Once the installer gets to the point that it creates <code>app/config/parameters.yml</code>, you will be presented with a few decisions. The first asks you to choose a <a href="http://symfony.com/doc/current/reference/configuration/framework.html#secret">secret</a>; choose any random string you like, made up of characters, numbers, and symbols, up to around 32 characters. This is used by Symfony when generating <a href="http://symfony.com/doc/current/book/forms.html#forms-csrf">CSRF tokens</a>, <a href="http://symfony.com/doc/current/cookbook/security/remember_me.html">encrypting cookies</a>, and for creating signed URIs when using <a href="http://symfony.com/doc/current/book/http_cache.html#edge-side-includes">ESI (Edge Side Includes)</a>.</p><p>Next, you'll be asked to specify a database driver. You may press return to accept the default for this option, as well as the next several (<code>database_host, database_port, database_name, database_user</code>) unless you have customized those values and need to enter them as configured on your installation. If you set a password for your database user, enter it when prompted for <code>database_password</code>. The installer should continue once you've completed this manual portion of the installation process.</p><h3>b. Run eZ Platform's installer:</h3><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="3f8c0f7e-679a-431b-bd41-9d49ce632bac" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>php -d memory_limit=-1 /var/www/ezplatform/app/console ezplatform:install --env prod clean</pre></td></tr></table><p>Don't forget to substitute any custom folder name you may have chosen in place of <code>ezplatform/</code> after <code>/var/www/</code> in the examples above. As you can see, this example shows a clean production installation. We're telling PHP to run Symfony's console to execute the ezplatform install script. You can get an informative output to learn more about the console script's capabilities by swapping in these parameters: <code>
          config:dump-reference exponential
        </code></p><p>If Composer asks you for your token, you must log in to your GitHub account and edit your profile. Go to the Personal access tokens link and Generate new token with default settings. Be aware that the token will be shown only once, so do not refresh the page until you paste the token into the Composer prompt. This operation is performed only once when you install eZ Platform for the first time.</p><p>Please note that a clean install of eZ Platform doesn’t include the DemoBundle anymore.</p><h2>6. Setup the folder rights (*NIX users)</h2><p>Like most things, <a href="http://symfony.com/doc/current/book/installation.html#checking-symfony-application-configuration-and-setup">Symfony documentation</a> applies here, meaning <code>app/cache</code> and <code>app/logs</code> need to be writable by cli and web server user.</p><p>Furthermore, future files and directories created by these two users will need to inherit those access rights. <em>For security reasons, there is no need for web server to have access to write to other directories.</em></p><table class="wysiwyg-macro" data-macro-name="tip" data-macro-id="f59b13fd-6846-4de3-af19-8a079f650713" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading7f8c.png?definition=e3RpcH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body">Then, go to the <a class="confluence-link" href="../../display/DEVELOPER/Setup%2bfolder%2brights.html" data-linked-resource-id="32866325" data-linked-resource-version="7" data-linked-resource-type="page" data-linked-resource-default-alias="Setup folder rights" data-base-url="../../index.html">Setup folder rights</a> page for the next steps of this settings.</td></tr></table><h2>7. Set up a Virtual Host</h2><p>For our example, we'll demonstrate using Apache2 as part of the traditional LAMP stack.</p><h3 style="margin-left: 30.0px;">Option A: Scripted Configuration</h3><p style="margin-left: 30.0px;">Instead of manually editing the vhost.template file, you may instead <a href="../../display/DEVELOPER/Web%2bServer.html">use the included shell script</a>: /var/www/ezplatform/bin/vhost.sh to generate a configured .conf file. Check out the source of <code>vhost.sh</code> to see the options provided. Additional information is included in our <a class="confluence-link" href="../../display/DEVELOPER/Web%2bServer.html" data-linked-resource-id="31429554" data-linked-resource-version="12" data-linked-resource-type="page" data-linked-resource-default-alias="Web Server" data-base-url="../../index.html">Web Server</a> documentation here as well.</p><h3 style="margin-left: 30.0px;">Option B: Manual Edits</h3><p style="margin-left: 30.0px;">a. Copy the vhost template file from its home in the doc folder:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="66051387-4d66-41ab-ba16-d73ca1f598b4" data-macro-parameters="language=bash" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading174f.png?definition=e2NvZGU6bGFuZ3VhZ2U9YmFzaH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>cp /var/www/ezplatform/doc/apache2/vhost.template /etc/apache2/sites-available/ezplatform.conf</pre></td></tr></table><p style="margin-left: 30.0px;">b. Edit the file, substituting the %placeholders% with the appropriate values for your desired config:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="23ffe28b-1f94-4751-8181-81addbd32b0b" data-macro-parameters="language=bash" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading174f.png?definition=e2NvZGU6bGFuZ3VhZ2U9YmFzaH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>vi /etc/apache2/sites-available/ezplatform.conf</pre></td></tr></table><p style="margin-left: 30.0px;">For a DEV environment, you can change</p><ul><li style="list-style-type: none;background-image: none;"><ul><li><code>&lt;VirtualHost %IP_ADDRESS%:%PORT%&gt;<br />
          </code>to<br /> <code>&lt;VirtualHost *:80&gt;</code></li><li><code>ServerName %HOST_NAME%<br />to<br />ServerName localhost</code></li><li><code>ServerAlias %HOST_ALIAS%<br />...that can simply be deleted.</code></li><li><code>DocumentRoot %BASEDIR%/web<br />to<br />DocumentRoot /var/www/ezplatform/web</code></li><li><code>LimitRequestBody %BODY_SIZE_LIMIT%<br />to<br />LimitRequestBody 0</code></li><li><code>TimeOut %TIMEOUT%<br />to<br />TimeOut 42<br />to avoid waiting longer than 42 seconds for all the things.</code></li></ul></li></ul><p style="margin-left: 30.0px;">Be sure to specify <code style="line-height: 1.42857;">/var/www/ezplatform/web</code> as the <code style="line-height: 1.42857;">DocumentRoot</code> and <code style="line-height: 1.42857;">Directory</code>. Uncomment the line that starts with #if[SYMFONY_ENV] and set the value, something like this:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="2f118ddd-4ae8-4ad1-bba9-5e8a7aee4757" data-macro-parameters="language=bash|theme=Eclipse" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headinge71d-2.png?definition=e2NvZGU6bGFuZ3VhZ2U9YmFzaHx0aGVtZT1FY2xpcHNlfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre># Environment.
# Possible values: "prod" and "dev" out-of-the-box, other values possible with proper configuration
# Defaults to "prod" if omitted (uses SetEnvIf so value can be used in rewrite rules)
SetEnvIf Request_URI ".*" SYMFONY_ENV=dev</pre></td></tr></table><h2>8. Server Configuration (Apache as example)</h2><p>Make sure you've got the <code>libapache2-mod-php5</code> module installed for Apache2 to use PHP5.x, and have the rewrite module enabled:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="4ed41499-2b3f-4339-9e6d-e131e15bfa63" data-macro-parameters="language=bash" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading174f.png?definition=e2NvZGU6bGFuZ3VhZ2U9YmFzaH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>apt-get -y install libapache2-mod-php5
a2enmod rewrite</pre></td></tr></table><p>a. You'll need the web user set as the owner/group on all your files to avoid a 500 error:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="b13dfc5c-11ae-498a-ab14-80062aa2cf72" data-macro-parameters="language=bash" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading174f.png?definition=e2NvZGU6bGFuZ3VhZ2U9YmFzaH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>chown -R www-data:www-data /var/www/ezplatform</pre></td></tr></table><p>b. With your vhost file properly prepared and located in /etc/apache2/sites-available/ezplatform.conf, enable the VirtualHost and disable the default:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="20ce7dcb-dfd6-49d0-898b-b9bfd879ca8f" data-macro-parameters="language=bash" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading174f.png?definition=e2NvZGU6bGFuZ3VhZ2U9YmFzaH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>a2ensite ezplatform
a2dissite 000-default.conf</pre></td></tr></table><h2>9. Restart server (Apache)</h2><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="e4c93b22-6f5f-4573-ad8a-5bc4427a0e31" data-macro-parameters="language=bash" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading174f.png?definition=e2NvZGU6bGFuZ3VhZ2U9YmFzaH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>service apache2 restart</pre></td></tr></table></div>
</div>
<div class="cell aside" data-type="aside">
<div class="innerCell">
<h4>In this topic:</h4><p><img class="editor-inline-macro" src="../servlet/confluence/placeholder/macro50ac.png?definition=e3RvYzptYXhMZXZlbD0zfHN0eWxlPXNxdWFyZX0&amp;locale=en_GB&amp;version=2" data-macro-name="toc" data-macro-id="1be57b25-75b9-4d2a-b030-38dac5aa5b6d" data-macro-parameters="maxLevel=3|style=square" data-macro-schema-version="1"></p></div>
</div>
</div>
</div>
<div class="contentLayout2">
<div class="columnLayout two-right-sidebar" data-layout="two-right-sidebar">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p> </p></div>
</div>
<div class="cell aside" data-type="aside">
<div class="innerCell">
<p> </p></div>
</div>
</div>
</div>
        <p>&nbsp;</p>
    </body>

<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=31431755 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 10:15:27 GMT -->
</html>
