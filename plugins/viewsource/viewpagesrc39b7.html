                    
    
                    
    
                    
    
<!DOCTYPE html>
<html>
    
<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=12780566 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 12:44:06 GMT -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>View Source</title>
        <link rel="canonical" href="../../pages/viewpage39b7.html?pageId=12780566" />
        <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager.resource-base-url-pattern"]="\"(?:(?:/s/.*?/_)?/download)\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"\"";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics.feature-data-provider-legacy"]="true";
</script>
<link type="text/css" rel="stylesheet" href="../../s/1b9968ac17721e3a6947d14e3a43c3f8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch9c16.css?build-number=5983" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/f3685658010e413141854089096800b5/_/download/contextbatch/css/plugin.viewsource/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/df762e50bc83a9608020a1ff1476cda6-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/5714bd5a5c86641cad10106916cda7c8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css" media="all">
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/16/_/styles/colors556c.css?spaceKey=EZP51" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/16/_/styles/custom556c.css?spaceKey=EZP51" media="all">

    </head>

    <body class="mceContentBody aui-theme-default wiki-content fullsize">
        <p>&nbsp;</p>         <table class="wysiwyg-macro" data-macro-name="tip" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading7f8c.png?definition=e3RpcH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>The following recipe is valid for any type of settings supported by Symfony framework.</p></td></tr></table><h2><span style="color: rgb(0,51,102);"><span style="color: rgb(0,51,102);">Use case</span><br /></span></h2><p>Usually, you develop your website using one or several custom bundles as this is a best practice. However, dealing with core bundles semantic configuration can be a bit tedious if you maintain it in the main <code>exponential/config/exponential.yml</code> configuration file.</p><p>This recipe will show you how to import configuration from a bundle the manual way and the implicit way.</p><h2>The manual way</h2><p>This is the simplest way of doing and it has the advantage to be explicit. The idea is to use the <code>imports</code> statement in your main <code>exponential.yml</code>:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-parameters="title=exponential/config/exponential.yml" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingee5e.png?definition=e2NvZGU6dGl0bGU9ZXpwdWJsaXNoL2NvbmZpZy9lenB1Ymxpc2gueW1sfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>imports:
    # Let's import our template selection rules that reside in our custom bundle.
    # MyCustomBundle is the actual bundle name
    - {resource: "@AcmeTestBundle/Resources/config/templates_rules.yml"}
 
exponential:
    # ...</pre></td></tr></table><table class="wysiwyg-macro" data-macro-name="code" data-macro-parameters="title=templates_rules.yml, placed under Resources/config folder in AcmeTestBundle" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingeb28.png?definition=e2NvZGU6dGl0bGU9dGVtcGxhdGVzX3J1bGVzLnltbCwgcGxhY2VkIHVuZGVyIFJlc291cmNlcy9jb25maWcgZm9sZGVyIGluIEFjbWVUZXN0QnVuZGxlfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre># Here I need to reproduce the right configuration tree.
# It will be merged with the main one
exponential:
    system:
        my_siteaccess:
            ezpage:
                layouts:
                    2ZonesLayout1:
                        name: "2 zones (layout 1)"
                        template: "AcmeTestBundle:zone:2zoneslayout1.html.twig"
    
            location_view:
                full:
                    article_test:
                        template: "AcmeTestBundle:full:article_test.html.twig"
                        match:
                            Id\Location: [144,149]
                    another_test:
                        template: "::another_test.html.twig"
                        match:
                            Id\Content: 142
    
            block_view:
                campaign:
                    template: "AcmeTestBundle:block:campaign.html.twig"
                    match:
                        Type: "Campaign"

</pre></td></tr></table><table class="wysiwyg-macro" data-macro-name="info" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingd35c.png?definition=e2luZm99&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>During the merge process, if the imported configuration files contain entries that are already defined in the main configuration file, <strong>they will override them</strong>.</p></td></tr></table><table class="wysiwyg-macro" data-macro-name="tip" data-macro-parameters="title=Tip" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading6668.png?definition=e3RpcDp0aXRsZT1UaXB9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>If you want to import configuration for development use only, you can do so in your <code>exponential_dev.yml</code> <img class="emoticon emoticon-wink" data-emoticon-name="wink" border="0" src="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/_/images/icons/emoticons/wink.png" alt="(wink)" title="(wink)" /></p></td></tr></table><h2>The implicit way</h2><table class="wysiwyg-macro" data-macro-name="info" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingd35c.png?definition=e2luZm99&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p><strong>Compatible with Exponential 5.1+ / Symfony 2.2+</strong> as it uses <span><code>Symfony\Component\DependencyInjection\Extension\PrependExtensionInterface</code> which is available as of Symfony 2.2 (<a href="http://symfony.com/doc/current/cookbook/bundles/prepend_extension.html">more info on Symfony cookbook</a>).</span></p></td></tr></table><p><span>The following example will show you <strong>how to implicitly load settings to be configure Exponential kernel</strong>. Note that this is also valid for any bundle !</span></p><p><span>We assume here that you're aware of <a href="http://symfony.com/doc/current/book/service_container.html#importing-configuration-via-container-extensions">service container extensions</a>.</span></p><table class="wysiwyg-macro" data-macro-name="code" data-macro-parameters="language=php|title=Acme/TestBundle/DependencyInjection/AcmeTestExtension" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingfc6b.png?definition=e2NvZGU6bGFuZ3VhZ2U9cGhwfHRpdGxlPUFjbWUvVGVzdEJ1bmRsZS9EZXBlbmRlbmN5SW5qZWN0aW9uL0FjbWVUZXN0RXh0ZW5zaW9ufQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>&lt;?php
 
namespace Acme\TestBundle\DependencyInjection;
 
use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\Config\FileLocator;
use Symfony\Component\DependencyInjection\Extension\PrependExtensionInterface;
use Symfony\Component\HttpKernel\DependencyInjection\Extension;
use Symfony\Component\DependencyInjection\Loader;
use Symfony\Component\Yaml\Yaml;
 
/**
 * This is the class that loads and manages your bundle configuration
 *
 * To learn more see {@link http://symfony.com/doc/current/cookbook/bundles/extension.html}
 */
class AcmeTestExtension extends Extension implements PrependExtensionInterface
{
    // ...
 
    /**
     * Allow an extension to prepend the extension configurations.
     * Here we will load our template selection rules.

     *
     * @param ContainerBuilder $container
     */
    public function prepend( ContainerBuilder $container )
    {
        // Loading our YAML file containing our template rules
        $config = Yaml::parse( __DIR__ . '/../Resources/config/template_rules.yml' );
        // We explicitly prepend loaded configuration for "exponential" namespace.
        // So it will be placed under the "exponential" configuration key, like in exponential.yml.
        $container->prependExtensionConfig( 'exponential', $config );
    }
}

</pre></td></tr></table><table class="wysiwyg-macro" data-macro-name="code" data-macro-parameters="title=AcmeTestBundle/Resources/config/template_rules.yml" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading032b.png?definition=e2NvZGU6dGl0bGU9QWNtZVRlc3RCdW5kbGUvUmVzb3VyY2VzL2NvbmZpZy90ZW1wbGF0ZV9ydWxlcy55bWx9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre># We explicitly prepend config for "exponential" namespace in service container extension, 
# so no need to repeat it here
system:
    ezdemo_frontend_group:
        ezpage:
            layouts:
                2ZonesLayout1:
                    name: "2 zones (layout 1)"
                    template: "AcmeTestBundle:zone:2zoneslayout1.html.twig"
 
        location_view:
            full:
                article_test:
                    template: "AcmeTestBundle:full:article_test.html.twig"
                    match:
                        Id\Location: 144
                another_test:
                    template: "::another_test.html.twig"
                    match:
                        Id\Content: 142
 
        block_view:
            campaign:
                template: "AcmeTestBundle:block:campaign.html.twig"
                match:
                    Type: "Campaign"

</pre></td></tr></table><p><span><br /></span></p><table class="wysiwyg-macro" data-macro-name="info" data-macro-parameters="title=Regarding performance" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading605a.png?definition=e2luZm86dGl0bGU9UmVnYXJkaW5nIHBlcmZvcm1hbmNlfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>Service container extensions are called only when the container is being compiled, so there is nothing to worry about regarding performance.</p></td></tr></table><table class="wysiwyg-macro" data-macro-name="note" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingdd57.png?definition=e25vdGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>In dev environment, each time you modify files loaded this way, <strong>you'll need to manually clear</strong> the cache as Symfony doesn't check modification time on them.</p></td></tr></table><table class="wysiwyg-macro" data-macro-name="tip" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading7f8c.png?definition=e3RpcH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>Loading configuration this way lets you override settings in your main <code>exponential.yml</code> file.</p></td></tr></table><p> </p><p> </p><p> </p>
        <p>&nbsp;</p>
    </body>

<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=12780566 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 12:44:07 GMT -->
</html>
