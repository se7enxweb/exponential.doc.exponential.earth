                    
    
                    
    
                    
    
<!DOCTYPE html>
<html>
    
<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=12780660 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 21 Oct 2014 15:16:13 GMT -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>View Source</title>
        <link rel="canonical" href="../../pages/viewpage0708.html?pageId=12780660" />
        <link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch934e.css?media=print" media="print">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 8]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+8" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/73/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/1f2a9c4c7f2593422cc9b02d1a652a22/_/download/contextbatch/css/plugin.viewsource/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/70f6d025b64de5008ccd042576cd8d90/_/download/contextbatch/css/page/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/70f6d025b64de5008ccd042576cd8d90/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/26ac2724af3c6ece1051365650d982fa/_/download/contextbatch/css/editor-content/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/1.3/_/download/batch/com.atlassian.confluence.plugins.confluence-hig/com.atlassian.confluence.plugins.confluence-highlight-ac" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/1.3/_/download/batch/com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources/com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/12/_/styles/colors.css" media="all">

    </head>

    <body class="mceContentBody aui-theme-default wiki-content fullsize">
        <p>&nbsp;</p>         <table class="wysiwyg-macro" data-macro-name="tip" style="background-image: url(../servlet/confluence/placeholder/macro-heading7f8c.png?definition=e3RpcH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>The following recipe is valid for any type of settings supported by Symfony framework.</p></td></tr></table><p><span style="color: rgb(0,51,102);">Use case</span></p><p>Usually, you develop your website using one or several custom bundles as this is a best practice. However, dealing with core bundles semantic configuration can be a bit tedious if you maintain it in the main <code>exponential/config/exponential.yml</code> configuration file.</p><p>This recipe will show you how to import configuration from a bundle the manual way and the implicit way.</p><h2>The manual way</h2><p>This is the simplest way of doing and it has the advantage to be explicit. The idea is to use the <code>imports</code> statement in your main <code>exponential.yml</code>:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-parameters="title=exponential/config/exponential.yml" style="background-image: url(../servlet/confluence/placeholder/macro-headingee5e.png?definition=e2NvZGU6dGl0bGU9ZXpwdWJsaXNoL2NvbmZpZy9lenB1Ymxpc2gueW1sfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>imports:
    # Let's import our template selection rules that reside in our custom bundle.
    # MyCustomBundle is the actual bundle name
    - {resource: "@AcmeTestBundle/Resources/config/templates_rules.yml"}
 
exponential:
    # ...</pre></td></tr></table><table class="wysiwyg-macro" data-macro-name="code" data-macro-parameters="title=templates_rules.yml, placed under Resources/config folder in AcmeTestBundle" style="background-image: url(../servlet/confluence/placeholder/macro-headingeb28.png?definition=e2NvZGU6dGl0bGU9dGVtcGxhdGVzX3J1bGVzLnltbCwgcGxhY2VkIHVuZGVyIFJlc291cmNlcy9jb25maWcgZm9sZGVyIGluIEFjbWVUZXN0QnVuZGxlfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre># Here I need to reproduce the right configuration tree.
# It will be merged with the main one
exponential:
    system:
        my_siteaccess:
            ezpage:
                layouts:
                    2ZonesLayout1:
                        name: "2 zones (layout 1)"
                        template: "AcmeTestBundle:zone:2zoneslayout1.html.twig"
    
            location_view:
                full:
                    article_test:
                        template: "AcmeTestBundle:full:article_test.html.twig"
                        match:
                            Id\Location: [144,149]
                    another_test:
                        template: "::another_test.html.twig"
                        match:
                            Id\Content: 142
    
            block_view:
                campaign:
                    template: "AcmeTestBundle:block:campaign.html.twig"
                    match:
                        Type: "Campaign"

</pre></td></tr></table><table class="wysiwyg-macro" data-macro-name="info" style="background-image: url(../servlet/confluence/placeholder/macro-headingd35c.png?definition=e2luZm99&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>During the merge process, if the imported configuration files contain entries that are already defined in the main configuration file, <strong>they will override them</strong>.</p></td></tr></table><table class="wysiwyg-macro" data-macro-name="tip" data-macro-parameters="title=Tip" style="background-image: url(../servlet/confluence/placeholder/macro-heading6668.png?definition=e3RpcDp0aXRsZT1UaXB9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>If you want to import configuration for development use only, you can do so in your <code>exponential_dev.yml</code> <img class="emoticon emoticon-wink" data-emoticon-name="wink" border="0" src="../../s/en_GB-1988229788/4733/f235dd088df5682b0560ab6fc66ed22c9124c0be.12/_/images/icons/emoticons/wink.png" alt="(wink)" title="(wink)" /></p></td></tr></table><h2>The implicit way</h2><table class="wysiwyg-macro" data-macro-name="info" style="background-image: url(../servlet/confluence/placeholder/macro-headingd35c.png?definition=e2luZm99&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p><strong>Compatible with Exponential 5.1+ / Symfony 2.2+</strong> as it uses <span><code>Symfony\Component\DependencyInjection\Extension\PrependExtensionInterface</code> which is available as of Symfony 2.2 (<a href="http://symfony.com/doc/current/cookbook/bundles/prepend_extension.html">more info on Symfony cookbook</a>).</span></p></td></tr></table><p><span>The following example will show you <strong>how to implicitly load settings to be configure Exponential kernel</strong>. Note that this is also valid for any bundle !</span></p><p><span>We assume here that you're aware of <a href="http://symfony.com/doc/current/book/service_container.html#importing-configuration-via-container-extensions">service container extensions</a>.</span></p><table class="wysiwyg-macro" data-macro-name="code" data-macro-parameters="language=php|title=Acme/TestBundle/DependencyInjection/AcmeTestExtension" style="background-image: url(../servlet/confluence/placeholder/macro-heading1d9e.png?definition=e2NvZGU6dGl0bGU9QWNtZS9UZXN0QnVuZGxlL0RlcGVuZGVuY3lJbmplY3Rpb24vQWNtZVRlc3RFeHRlbnNpb258bGFuZ3VhZ2U9cGhwfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>&lt;?php
 
namespace Acme\TestBundle\DependencyInjection;
 
use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\Config\FileLocator;
use Symfony\Component\DependencyInjection\Extension\PrependExtensionInterface;
use Symfony\Component\HttpKernel\DependencyInjection\Extension;
use Symfony\Component\DependencyInjection\Loader;
use Symfony\Component\Yaml\Yaml;
 
/**
 * This is the class that loads and manages your bundle configuration
 *
 * To learn more see {@link http://symfony.com/doc/current/cookbook/bundles/extension.html}
 */
class AcmeTestExtension extends Extension implements PrependExtensionInterface
{
    // ...
 
    /**
     * Allow an extension to prepend the extension configurations.
     * Here we will load our template selection rules.

     *
     * @param ContainerBuilder $container
     */
    public function prepend( ContainerBuilder $container )
    {
        // Loading our YAML file containing our template rules
        $config = Yaml::parse( __DIR__ . '/../Resources/config/template_rules.yml' );
        // We explicitly prepend loaded configuration for "exponential" namespace.
        // So it will be placed under the "exponential" configuration key, like in exponential.yml.
        $container->prependExtensionConfig( 'exponential', $config );
    }
}

</pre></td></tr></table><table class="wysiwyg-macro" data-macro-name="code" data-macro-parameters="title=AcmeTestBundle/Resources/config/template_rules.yml" style="background-image: url(../servlet/confluence/placeholder/macro-heading032b.png?definition=e2NvZGU6dGl0bGU9QWNtZVRlc3RCdW5kbGUvUmVzb3VyY2VzL2NvbmZpZy90ZW1wbGF0ZV9ydWxlcy55bWx9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre># We explicitly prepend config for "exponential" namespace in service container extension, 
# so no need to repeat it here
system:
    ezdemo_frontend_group:
        ezpage:
            layouts:
                2ZonesLayout1:
                    name: "2 zones (layout 1)"
                    template: "AcmeTestBundle:zone:2zoneslayout1.html.twig"
 
        location_view:
            full:
                article_test:
                    template: "AcmeTestBundle:full:article_test.html.twig"
                    match:
                        Id\Location: 144
                another_test:
                    template: "::another_test.html.twig"
                    match:
                        Id\Content: 142
 
        block_view:
            campaign:
                template: "AcmeTestBundle:block:campaign.html.twig"
                match:
                    Type: "Campaign"

</pre></td></tr></table><p><span><br /></span></p><table class="wysiwyg-macro" data-macro-name="info" data-macro-parameters="title=Regarding performance" style="background-image: url(../servlet/confluence/placeholder/macro-heading605a.png?definition=e2luZm86dGl0bGU9UmVnYXJkaW5nIHBlcmZvcm1hbmNlfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>Service container extensions are called only when the container is being compiled, so there is nothing to worry about regarding performance.</p></td></tr></table><table class="wysiwyg-macro" data-macro-name="tip" style="background-image: url(../servlet/confluence/placeholder/macro-heading7f8c.png?definition=e3RpcH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>Loading configuration this way lets you override settings in your main <code>exponential.yml</code> file.</p></td></tr></table><p> </p><p> </p><p> </p>
        <p>&nbsp;</p>
    </body>

<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=12780660 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 21 Oct 2014 15:16:13 GMT -->
</html>
