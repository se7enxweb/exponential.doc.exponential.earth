                    
    
                    
    
                    
    
<!DOCTYPE html>
<html>
    
<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=30711990 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 09:48:48 GMT -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>View Source</title>
        <link rel="canonical" href="../../pages/viewpage09e4.html?pageId=30711990" />
        <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager.resource-base-url-pattern"]="\"(?:(?:/s/.*?/_)?/download)\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"\"";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics.feature-data-provider-legacy"]="true";
</script>
<link type="text/css" rel="stylesheet" href="../../s/1b9968ac17721e3a6947d14e3a43c3f8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch9c16.css?build-number=5983" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/f3685658010e413141854089096800b5/_/download/contextbatch/css/plugin.viewsource/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/df762e50bc83a9608020a1ff1476cda6-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/5714bd5a5c86641cad10106916cda7c8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css" media="all">
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/8/_/styles/colors82a8.css?spaceKey=TECHDOC" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/8/_/styles/custom82a8.css?spaceKey=TECHDOC" media="all">

    </head>

    <body class="mceContentBody aui-theme-default wiki-content fullsize">
        <p>&nbsp;</p>         <div class="contentLayout2">
<div class="columnLayout two-right-sidebar" data-layout="two-right-sidebar">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<table class="wysiwyg-macro" data-macro-name="panel" data-macro-id="9dee2e66-e17d-4b4c-8add-5b32fa2f7fa9" data-macro-parameters="bgColor=#ffffff|title=Overview|titleBGColor=#dddddd" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingf7bf.png?definition=e3BhbmVsOmJnQ29sb3I9I2ZmZmZmZnx0aXRsZUJHQ29sb3I9I2RkZGRkZHx0aXRsZT1PdmVydmlld30&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p style="text-align: center;"><a href="https://github.com/ezsystems/EzSystemsRecommendationBundle">Recommendation Bundle</a> integrates the YOOCHOOSE recommendation engine into eZ.</p></td></tr></table><p> </p><p>The Recommendation Bundle extends the functionality of eZ with a recommendation engine, powered by <a href="https://yoochoose.com/">YOOCHOOSE</a>. It allows you to track the way visitors use your website and suggests recommended content to them based on their behavior.</p><table class="wysiwyg-macro" data-macro-name="info" data-macro-id="c1cc121e-98ca-4b7b-bfdd-175a73880177" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingd35c.png?definition=e2luZm99&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body">See <a href="https://yoochoose.com/Personalization-Solution/Documentation">https://yoochoose.com/Personalization-Solution/Documentation</a> to learn how the recommendation engine works from the YOOCHOOSE side.</td></tr></table><table class="wysiwyg-macro" data-macro-name="note" data-macro-id="31a99693-a6b1-42a3-ac29-5a373604678e" data-macro-parameters="title=Support" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading3e26.png?definition=e25vdGU6dGl0bGU9U3VwcG9ydH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p><span class="x x-first x-last">Stable versions of this bundle </span><span>is </span><span class="x x-first x-last">officially supported by eZ as of version 1</span><span>.0.</span><span class="x x-first x-last">0, </span><span>for users with </span><span class="x x-first x-last">a eZ Enterprise</span><span> and Yoochoose subscription.</span></p></td></tr></table></div>
</div>
<div class="cell aside" data-type="aside">
<div class="innerCell">
<table class="wysiwyg-macro" data-macro-name="panel" data-macro-id="1261ffd0-8e18-480e-8b81-dcf964dcade3" data-macro-parameters="bgColor=#FFFFFF|title=In this topic|titleBGColor=#dddddd" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading97a2.png?definition=e3BhbmVsOmJnQ29sb3I9I0ZGRkZGRnx0aXRsZUJHQ29sb3I9I2RkZGRkZHx0aXRsZT1JbiB0aGlzIHRvcGljfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p><img class="editor-inline-macro" src="../servlet/confluence/placeholder/macro7c73.png?definition=e3RvYzptYXhMZXZlbD0zfQ&amp;locale=en_GB&amp;version=2" data-macro-name="toc" data-macro-id="260ac2c6-1e54-46fb-87cf-145530eb384a" data-macro-parameters="maxLevel=3" data-macro-schema-version="1"></p></td></tr></table></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h1>Installing the Recommendation Bundle</h1></div>
</div>
</div>
<div class="columnLayout two-equal" data-layout="two-equal">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>The Recommendation Bundle is installed in a similar way as any other Symfony bundle.</p><p> </p></div>
</div>
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p> </p></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2>Requirements</h2></div>
</div>
</div>
<div class="columnLayout two-equal" data-layout="two-equal">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<ul><li>PHP 5.4.4<em> or higher PHP 5.x version</em></li><li>Symfony 2.6<em> or higher Symfony<em> 2.x version</em></em><em><br /></em></li><li>Exponential 5.4.1 or eZ Platform/Studio 2015.01 or above, with the REST API configured to use sessions and publicly open to the YOOCHOOSE servers</li><li>A YOOCHOOSE license</li></ul><p>This bundle is independent from the ezrecommendation extension used in legacy, and does not require it.</p><p> </p></div>
</div>
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p> </p></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2>Installation</h2></div>
</div>
</div>
<div class="columnLayout two-equal" data-layout="two-equal">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<table class="wysiwyg-macro" data-macro-name="panel" data-macro-id="790a2de9-2935-419e-8099-85a6410f8068" data-macro-parameters="bgColor=#ffffff|title=To install eZ Recommendation Bundle:|titleBGColor=#ffffff" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headinge669.png?definition=e3BhbmVsOmJnQ29sb3I9I2ZmZmZmZnx0aXRsZUJHQ29sb3I9I2ZmZmZmZnx0aXRsZT1UbyBpbnN0YWxsIGVaIFJlY29tbWVuZGF0aW9uIEJ1bmRsZTp9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p><strong>1.</strong> Run the following from your Exponential installation root <em>(here with most recent 1.0.x release)</em>:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="85ffaed7-b9cf-4396-8c6d-816808aab22b" data-macro-parameters="language=php" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading1802.png?definition=e2NvZGU6bGFuZ3VhZ2U9cGhwfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>php composer.phar require ezsystems/recommendation-bundle:~1.0.0</pre></td></tr></table><p><strong>2.</strong> Enable the bundle in <code>exponential/EzPublishKernel.php</code>:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="479cfd9e-36a6-49d7-8306-3e48177e34b1" data-macro-parameters="language=php" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading1802.png?definition=e2NvZGU6bGFuZ3VhZ2U9cGhwfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>$bundles = array(
    // existing bundles
    new EzSystems\RecommendationBundle\EzSystemsRecommendationBundle()
);</pre></td></tr></table><p><strong>3.</strong> Import additional routing by adding following lines to your <code>routing.yml</code> file:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="85a192ea-a3bf-464b-940e-ddb9a3e0e8a6" data-macro-parameters="language=php" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading1802.png?definition=e2NvZGU6bGFuZ3VhZ2U9cGhwfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>recommendationBundleRestRoutes:
    resource: "@EzSystemsRecommendationBundle/Resources/config/routing_rest.yml"
    prefix:   %exponential_rest.path_prefix%</pre></td></tr></table></td></tr></table><p> </p><p> </p></div>
</div>
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p> </p></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2>Configuration</h2></div>
</div>
</div>
<div class="columnLayout two-equal" data-layout="two-equal">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>The bundle's configuration is siteaccess aware. This is an example of settings <em>(config.yml)</em>:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="cf19d737-40e9-40be-868f-bbd6373eb8b0" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>ez_recommendation:
    system:
        default:
            yoochoose:
                customer_id: "12345"
                license_key: "1234-5678-9012-3456-7890"
            server_uri: "http://example.com"
            recommender:
                included_content_types: ["blog", "article"]</pre></td></tr></table><p>The following parameters need to be included in the settings file:</p><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Parameter</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd">yoochoose.customer_id</td><td class="confluenceTd">Your YOOCHOOSE customer ID.</td></tr><tr><td class="confluenceTd">yoochoose.license_key</td><td class="confluenceTd">Your YOOCHOOSE license key.</td></tr><tr><td class="confluenceTd">server_uri</td><td class="confluenceTd">The URI your site's REST API can be accessed from.</td></tr><tr><td class="confluenceTd">recommender.included_content_types</td><td class="confluenceTd">Content Types on which the tracking script will be shown. See <a class="confluence-link" href="#RecommendationBundle-Tracking" data-anchor="Tracking" data-linked-resource-default-alias="Tracking" data-base-url="../../index.html">Tracking </a>below for more information.</td></tr></tbody></table><p>If content's author or image are stored in different field, you can specify it in <strong>parameters.yml:</strong></p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="119a276a-e2bd-4261-8ff4-24f970ca49e1" data-macro-parameters="title=Format" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading0027.png?definition=e2NvZGU6dGl0bGU9Rm9ybWF0fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>    ez_recommendation.field_identifiers:
        {field fetched by controller (image or author)}
             {content type}: {field with value}</pre></td></tr></table><p>For example:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="cef7f455-cdb7-4e98-8c86-ce4aa8e9e396" data-macro-parameters="title=Actual example" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingd4f0.png?definition=e2NvZGU6dGl0bGU9QWN0dWFsIGV4YW1wbGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>    ez_recommendation.field_identifiers:
         author:
             article: authors
         image:
             article: thumbnail
             blog_post: main_image</pre></td></tr></table></div>
</div>
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p> </p></div>
</div>
</div>
<div class="columnLayout two-equal" data-layout="two-equal">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h3>Advanced configuration</h3></div>
</div>
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p> </p></div>
</div>
</div>
<div class="columnLayout two-equal" data-layout="two-equal">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>You can select advanced options for YOOCHOOSE backend using the following settings:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="fdbf53cc-45d5-4945-9c90-08f7e23d79d7" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>ez_recommendation:
    api_endpoint: 'https://admin.yoochoose.net'
    recommender:
        api_endpoint: 'http://reco.yoochoose.net'
        consume_timeout: 20
    tracking:
        api_endpoint: 'http://event.yoochoose.net'
        script_url: 'cdn.yoochoose.net/yct.js'</pre></td></tr></table><p>Changing any of these parameters without a valid reason will break all calls to YOOCHOOSE. It can be useful to test the API by mocking the service, or if you have a hosted version of YOOCHOOSE Recommendation service.</p><p> </p></div>
</div>
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p> </p></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h1>Using the Recommendation Bundle</h1></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2>Initial Setup</h2></div>
</div>
</div>
<div class="columnLayout two-equal" data-layout="two-equal">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>Your content structure must be mapped to the YOOCHOOSE domain model. This must be done in collaboration with YOOCHOOSE.</p><p> </p></div>
</div>
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p> </p></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2>Indexing</h2></div>
</div>
</div>
<div class="columnLayout two-equal" data-layout="two-equal">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p><strong>Public</strong> content is automatically indexed. When necessary, Exponential will notify YOOCHOOSE of changes to content. Initial import is to be managed with your YOOCHOOSE sales representative. Note that your server's REST API will need to be open to the YOOCHOOSE servers for indexing to be possible.</p><p> </p></div>
</div>
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p> </p></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2><img class="editor-inline-macro" src="../servlet/confluence/placeholder/macro3350.png?definition=e2FuY2hvcjpUcmFja2luZ30&amp;locale=en_GB&amp;version=2" data-macro-name="anchor" data-macro-id="3f5f0540-3e13-4a6c-ac8a-10f5c6e43356" data-macro-default-parameter="Tracking" data-macro-schema-version="1">Tracking</h2></div>
</div>
</div>
<div class="columnLayout two-equal" data-layout="two-equal">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>Events from the site need to be sent to YOOCHOOSE so that recommendations can be adapted to visitors. Tracking can be set up in multiple ways, depending on existing constraints.</p><p><code>EzRecommendationBundle</code> delivers a Twig extension which helps integrate the tracking functionality into your site.</p><table class="wysiwyg-macro" data-macro-name="panel" data-macro-id="3e6fcf9e-e321-4928-bda3-d53114462b95" data-macro-parameters="bgColor=#ffffff|title=To enable tracking:|titleBGColor=#ffffff" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingdf30.png?definition=e3BhbmVsOmJnQ29sb3I9I2ZmZmZmZnx0aXRsZUJHQ29sb3I9I2ZmZmZmZnx0aXRsZT1UbyBlbmFibGUgdHJhY2tpbmc6fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p><strong>1.</strong> Place the following snippet of code somewhere in the HEAD section of your header template (if your bundle is built on top of the DemoBundle this is <code>page_head.html.twig</code>):</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="6303e0f4-1182-4148-a5e7-f87dc484da02" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>{% if content is defined %}
    {{ yc_track_user(content.id) }}
{% endif %}</pre></td></tr></table><p><strong>2.</strong> Configure settings under the <code>recommender.included_content_types</code> parameter (see the <code><a href="https://github.com/ezsystems/EzSystemsRecommendationBundle/blob/master/Resources/config/default_settings.yml">default_settings.yml</a></code> file delivered with this bundle). Here you can define for which content types tracking script will be shown.</p></td></tr></table><table class="wysiwyg-macro" data-macro-name="tip" data-macro-id="6442c949-1766-4858-8680-03c523000f71" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading7f8c.png?definition=e3RpcH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>You can find more information about <a href="https://doc.yoochoose.net/display/PUBDOC/1.+Tracking+Events">tracking</a> in YOOCHOOSE documentation.</p></td></tr></table><p> </p><p> </p></div>
</div>
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p> </p></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2>Displaying</h2></div>
</div>
</div>
<div class="columnLayout two-equal" data-layout="two-equal">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>In order to allow displaying recommendations on your site you must add portions of scripts which will integrate the recommender engine with your site.</p><p>Implementation is very easy and can be performed in just a few steps (assuming that the <code>EzRecommendationBundle</code> is properly configured and enabled in <code>EzPublishKernel.php</code>):</p><table class="wysiwyg-macro" data-macro-name="panel" data-macro-id="ae9f41cd-44aa-402d-8708-3cc89133dcd9" data-macro-parameters="bgColor=#ffffff|title=To enable displaying recommendations:|titleBGColor=#ffffff" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingf69f.png?definition=e3BhbmVsOmJnQ29sb3I9I2ZmZmZmZnx0aXRsZUJHQ29sb3I9I2ZmZmZmZnx0aXRsZT1UbyBlbmFibGUgZGlzcGxheWluZyByZWNvbW1lbmRhdGlvbnM6fQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p><strong>1.</strong> Add the following JavaScript assets to your header template (if your bundle is built on top of the DemoBundle this is <code>page_head_script.html.twig</code>):</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="4ffef529-0f80-4f75-907b-d9b4f5814bfb" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>{% javascripts
    ...

    '%kernel.root_dir%/../vendor/components/handlebars.js/handlebars.min.js'
    '@EzSystemsRecommendationBundle/Resources/public/js/recommendationtemplaterenderer.js'
    '@EzSystemsRecommendationBundle/Resources/public/js/recommendationtemplatehelper.js'
    '@EzSystemsRecommendationBundle/Resources/public/js/recommendationrestclient.js'
%}</pre></td></tr></table><p><strong>2.</strong> Place a dedicated Twig helper in the place where you want to display recommendations:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="0194e2f9-287d-469e-85ac-fe4026ad4666" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>{{ yc_show_recommendations(
    contentId = content.id,
    scenario = '',
    limit = '',
    contentType = '',
    template = '',
    fields = []
) }}</pre></td></tr></table></td></tr></table><p> </p><p> </p></div>
</div>
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p> </p></div>
</div>
</div>
<div class="columnLayout two-equal" data-layout="two-equal">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h4>Parameters</h4></div>
</div>
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p> </p></div>
</div>
</div>
<div class="columnLayout two-equal" data-layout="two-equal">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<table class="confluenceTable"><tbody><tr><th class="confluenceTh">Parameter</th><th class="confluenceTh">Type</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd">contentId</td><td class="confluenceTd">int</td><td class="confluenceTd">In content-based views the Twig variable holding the content id (the content you want to get recommendations for).</td></tr><tr><td class="confluenceTd">scenario</td><td class="confluenceTd">string</td><td class="confluenceTd">Scenario used to display recommendations. You can create custom scenarios at the YOOCHOOSE dashboard.</td></tr><tr><td class="confluenceTd">limit</td><td class="confluenceTd">int</td><td class="confluenceTd">Number of recommendations to show.</td></tr><tr><td class="confluenceTd">contentType</td><td class="confluenceTd">string</td><td class="confluenceTd">Content Types you are expecting in response.</td></tr><tr><td class="confluenceTd">template</td><td class="confluenceTd">string</td><td class="confluenceTd">HandleBars template name (your templates are stored <code>in the EzRecommendationBundle/Resources/public/views</code> directory. Take a look at <code>default.html.twig</code> which includes a default template that can be used to prepare customized versions).</td></tr><tr><td class="confluenceTd">fields</td><td class="confluenceTd">array</td><td class="confluenceTd">Fields which are required and will be requested from the recommender engine. These field names are also used inside HandleBars templates.</td></tr></tbody></table><table class="wysiwyg-macro" data-macro-name="info" data-macro-id="3474dfd8-14a4-45d3-b450-c13de853351f" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingd35c.png?definition=e2luZm99&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>Sample integration can take the following form:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="53d72e5c-0187-4a0d-b904-6595fefbcc75" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>{{ yc_show_recommendations(
    contentId = content.id,
    scenario = 'popular',
    limit = 5,
    contentType = 'article',
    template = 'default',
    fields = ['ez_publishedDate', 'ez_url', 'title', 'image', 'author', 'intro']
) }}</pre></td></tr></table></td></tr></table><p>You can also bypass named arguments using standard value passing as arguments.</p><p> </p></div>
</div>
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p> </p></div>
</div>
</div>
<div class="columnLayout two-equal" data-layout="two-equal">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h4>Item ID</h4></div>
</div>
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p> </p></div>
</div>
</div>
<div class="columnLayout two-equal" data-layout="two-equal">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>The item id is usually set to the viewed ContentId. Depending on requirements, it can be set to a different value, in collaboration with YOOCHOOSE.</p><p> </p></div>
</div>
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p> </p></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2>Troubleshooting</h2></div>
</div>
</div>
<div class="columnLayout two-equal" data-layout="two-equal">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>Most operations are logged via the <code>ez_recommendation</code> <a href="http://symfony.com/doc/current/cookbook/logging/channels_handlers.html">Monolog channel</a>. To log everything about Recommendation to dev.recommendation.log, add the following to your <code>config.yml</code>:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="cdf160a8-4703-49de-a443-f7fbc704f414" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>monolog:
    handlers:
        ez_recommendation:
            type:   stream
            path:   "%kernel.logs_dir%/%kernel.environment%.recommendation.log"
            channels: [ez_recommendation]
            level: info</pre></td></tr></table><table class="wysiwyg-macro" data-macro-name="tip" data-macro-id="df8678c8-28fa-406c-a37b-910a7d5c98ab" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading7f8c.png?definition=e3RpcH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body">You can replace <code>info</code> by <code>debug</code> for more verbosity.</td></tr></table></div>
</div>
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p> </p></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h1>Other resources</h1></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<ul><li><a href="http://docs.ezreco.apiary.io/">API doc for YOOCHOOSE Service</a></li><li><a href="https://doc.yoochoose.net/display/PUBDOC/Developer+Guide" style="line-height: 1.42857;">Developer Guides for YOOCHOOSE Service</a></li></ul></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p style="text-align: right;"><span> </span>eZ Studio © 1999-2015 <a class="external-link" href="http://ez.no/" rel="nofollow">eZ Systems AS</a> and others</p></div>
</div>
</div>
</div>
        <p>&nbsp;</p>
    </body>

<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=30711990 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 09:48:50 GMT -->
</html>
