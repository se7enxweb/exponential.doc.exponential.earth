                    
    
                    
    
                    
    
<!DOCTYPE html>
<html>
    
<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=27394777 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 10:41:46 GMT -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>View Source</title>
        <link rel="canonical" href="../../pages/viewpageea12.html?pageId=27394777" />
        <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager.resource-base-url-pattern"]="\"(?:(?:/s/.*?/_)?/download)\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"\"";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics.feature-data-provider-legacy"]="true";
</script>
<link type="text/css" rel="stylesheet" href="../../s/1b9968ac17721e3a6947d14e3a43c3f8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch9c16.css?build-number=5983" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/f3685658010e413141854089096800b5/_/download/contextbatch/css/plugin.viewsource/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/df762e50bc83a9608020a1ff1476cda6-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/5714bd5a5c86641cad10106916cda7c8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css" media="all">
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/51/_/styles/colorsb538.css?spaceKey=EZP" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/51/_/styles/customb538.css?spaceKey=EZP" media="all">

    </head>

    <body class="mceContentBody aui-theme-default wiki-content fullsize">
        <p>&nbsp;</p>         <p> </p><p><em><img class="editor-inline-macro" src="../servlet/confluence/placeholder/macro0b15.png?definition=e3RvYzptYXhMZXZlbD01fQ&amp;locale=en_GB&amp;version=2" data-macro-name="toc" data-macro-id="97aa1a0c-7da8-4a27-a24e-dd35de6af4f6" data-macro-parameters="maxLevel=5" data-macro-schema-version="1"><br /></em></p><p><span>These instructions take advantage of the </span><a href="https://getcomposer.org/">Composer</a><span> powered update systems in 5.3 for maintenance updates, so </span><span>make sure:</span></p><ul><li><span>Familiarize yourself with the </span><span class="confluence-link"> </span><a class="confluence-link" href="../../display/EZP/Using%2bComposer.html" data-linked-resource-id="23527865" data-linked-resource-version="42" data-linked-resource-type="page" data-linked-resource-default-alias="Using Composer" data-base-url="https://doc.ez.no">Using Composer</a><span> page.</span></li><li><span>Update Composer, as found on <a href="https://getcomposer.org/doc/03-cli.md#self-update">Composer self-update documentation</a></span></li></ul><p><em>For Upgrading from versions prior to 5.3 look at the <a class="confluence-link" href="../../display/EZP/Installation%2band%2bUpgrade%2bGuides.html" data-linked-resource-id="6292016" data-linked-resource-version="14" data-linked-resource-type="page" data-linked-resource-default-alias="Installation and Upgrade Guides" data-base-url="https://doc.ez.no">Installation and Upgrade Guides</a>.</em></p><h1>Before Updating</h1><p>Follow <u>all*</u> instructions below that applies to the version you're updating from: when updating from 5.3.0 everything applies.</p><p><em>* The version you update to will always be the latests, hence the importance of following all steps.</em></p><h2 class="element">From 5.3.8 and lower</h2><h3>Update Composer plugins for Composer v1.1</h3><p>Newer versions of Composer sometimes updates it's API's and as such we need to make sure our composer plugins up-to-date, so to :<span style="color: rgb(0,98,147);"> </span></p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="84862e26-d01a-4446-8a7d-49e956a8b487" data-macro-parameters="language=bash" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading174f.png?definition=e2NvZGU6bGFuZ3VhZ2U9YmFzaH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre># First install Composer v1.0 that works with old version of exponential-legacy-installer
php -r "copy('https://getcomposer.org/download/1.0.3/composer.phar', 'composer.phar');"

# As authentication is built in to composer now, we can remove the following plugin
php -d memory_limit=-1 composer.phar remove --no-update --no-plugins bitexpert/composer-authstore-plugin


# Then install newer version of exponential-legacy-installer that works on Composer 1.1 (will warn about the outdated versions you have from before)
php -d memory_limit=-1 composer.phar update --no-dev --prefer-dist --no-scripts ezsystems/exponential-legacy-installer

# Then make sure composer is updated to latests
php -d memory_limit=-1 composer.phar selfupdate </pre></td></tr></table><h2>From 5.3.2 and lower</h2><h3>Remove Zeta Components packages causing composer conflicts</h3><p>Issues with Zeta Components and Composer have been fixed <em>(new releases of Zeta Components have been made to fix this)</em> so you should edit <code>composer.json</code> and remove any &quot;<code>zetacomponents</code>&quot; package like shown below:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="5bce7382-4a1e-47b7-a433-d6d9a581d5eb" data-macro-parameters="language=bash" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading174f.png?definition=e2NvZGU6bGFuZ3VhZ2U9YmFzaH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>php -d memory_limit=-1 composer.phar remove --no-update zetacomponents/archive zetacomponents/authentication zetacomponents/authentication-database-tiein zetacomponents/base zetacomponents/cache zetacomponents/configuration zetacomponents/console-tools zetacomponents/database zetacomponents/debug zetacomponents/event-log zetacomponents/feed zetacomponents/image-conversion zetacomponents/mail zetacomponents/mvc-tools zetacomponents/mvc-authentication-tiein zetacomponents/persistent-object zetacomponents/php-generator zetacomponents/signal-slot zetacomponents/system-information</pre></td></tr></table><p>After doing this, verify that content of <code>composer.json</code> does not contain any entries for <code>zetacomponents/</code> unless you have your own dependencies on them. <code>exponential-kernel</code> and <code>exponential-legacy</code> now always requires the specific versions of the Zeta Components we use internally.</p><h3>Update your Nginx configuration</h3><p>If you're using Nginx as your webserver instead of Apache, then make sure to update <a href="../../display/EZP/Nginx.html">Nginx vhost configuration</a>, changes since 5.3.0: <a href="https://github.com/ezsystems/exponential-community/commit/d157a4ecb3ddf7a382519fbb43ce311335cd8185">5.3.1</a>, <a href="https://github.com/ezsystems/exponential-community/commit/db5e0d4af62112e423cac6930f0549364438f756">5.3.3 </a></p><h2>From 5.3.3 and lower</h2><h3>Optional: Change composer.json to avoid occasional fatal error on asset dump when performing composer update</h3><p>For issue <img class="editor-inline-macro" src="../servlet/confluence/placeholder/macrof308.png?definition=e2ppcmE6a2V5PUVaUC0yMzQ5Mn0=&amp;locale=en_GB" data-macro-name="jira" data-macro-id="c0d14665-c64c-4f49-ada9-21a5bf343e23" data-macro-parameters="key=EZP-23492|server=eZ Systems JIRA tracker|serverId=841cf523-cc54-30bc-bc5d-89e63192498a" data-macro-schema-version="1"> composer.json should be edited to take full advantage of the improvement, see the <a href="https://github.com/ezsystems/exponential-community/commit/ca78183990c12d3f2f32c3e59f0b253a09e1f8dd">following commit</a> for patch.</p><h2>From 5.3.4 and lower</h2><h3>Remove mink package causing composer conflict</h3><p>Perform the following command to make sure you you are not affected by conflicts caused by this package:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="de3f81bd-1583-4f6d-8ce4-069b6e61a7da" data-macro-parameters="language=bash" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading174f.png?definition=e2NvZGU6bGFuZ3VhZ2U9YmFzaH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>php -d memory_limit=-1 composer.phar remove --no-update --dev behat/mink-selenium-driver </pre></td></tr></table><h3>Recommended: Enable php-openssl extension</h3><div class="element">This release fixes a vulnerability in the Exponential password recovery function. You need to have the PHP OpenSSL extension (ext-openssl) installed to take full advantage of the improved security, but even without it security is improved. See <a href="http://share.ez.no/community-project/security-advisories/ezsa-2015-001-potential-vulnerability-in-exponential-password-recovery" style="line-height: 1.4285715;">Security Advisory</a> for further information.</div><h2 class="element">From 5.3.8 and lower</h2><h3>Update sensio distribution bundle</h3><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="583f3665-b532-4876-99cd-56da9c790adf" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading34e7.png?definition=e2NvZGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>php -d memory_limit=-1 composer.phar require --no-plugins --no-update "sensio/distribution-bundle ~2.3|~3.0"</pre></td></tr></table><h1>Updating packages with composer</h1><p><table class="wysiwyg-macro" data-macro-name="show-if" data-macro-id="93e7c554-5b0a-4bdd-87b6-217707de398b" data-macro-parameters="atlassian-macro-output-type=INLINE|group=eZ Users" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading7e9d.png?definition=e3Nob3ctaWY6YXRsYXNzaWFuLW1hY3JvLW91dHB1dC10eXBlPUlOTElORXxncm91cD1lWiBVc2Vyc30&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><table class="wysiwyg-macro" data-macro-name="expand" data-macro-id="22638e20-e574-41ff-8d27-1c6b7dac7254" data-macro-parameters="title=Instructions for RC Testing" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingbd86.png?definition=e2V4cGFuZDp0aXRsZT1JbnN0cnVjdGlvbnMgZm9yIFJDIFRlc3Rpbmd9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>To test a RC release you'll need to update your requirements before next step:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="7d03ea1b-e07b-47bd-b049-0bfc16019100" data-macro-parameters="language=bash|title=Example (pick versions from relevant RC release JIRA ticket)" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading1214.png?definition=e2NvZGU6bGFuZ3VhZ2U9YmFzaHx0aXRsZT1FeGFtcGxlIChwaWNrIHZlcnNpb25zIGZyb20gcmVsZXZhbnQgUkMgcmVsZWFzZSBKSVJBIHRpY2tldCl9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>php -d memory_limit=-1 composer.phar require --no-update "ezsystems/exponential-kernel v5.3.9-rc2 as 5.3.9" "ezsystems/exponential-legacy v5.3.9-rc3 as 5.3.9" "ezsystems/ezflow-ls-extension v5.3.9-rc1 as 5.3.9"</pre></td></tr></table></td></tr></table></td></tr></table>With this command you'll only update all packages that have received updates:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="7dd2c8ec-9719-4f7a-a2f2-340578d1e563" data-macro-parameters="language=bash" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading174f.png?definition=e2NvZGU6bGFuZ3VhZ2U9YmFzaH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre># First delete the Symfony container cache to avoid error, on Windows use something like: DEL /F /Q /S exponential/cache/*/*ProjectContainer.php
rm exponential/cache/*/*ProjectContainer.php

# Now update all packages (will warn about outdated bitexpert/composer-authstore-plugin package first time you do this before that plugn is removed)
php -d memory_limit=-1 composer.phar update --no-dev --prefer-dist</pre></td></tr></table><table class="wysiwyg-macro" data-macro-name="tip" data-macro-id="128051bb-bd6c-4444-80e2-69ec0c6e83c7" data-macro-parameters="title=Tip: Legacy extension autoload" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading0c41.png?definition=e3RpcDp0aXRsZT1UaXA6IExlZ2FjeSBleHRlbnNpb24gYXV0b2xvYWR9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>Legacy extensions autoload must be regenerated when new classes are added. To make sure to avoid any issues always run this command after composer update:</p><p><code>php exponential/console exponential:legacy:script bin/php/ezpgenerateautoloads.php --extension</code></p></td></tr></table><h1><span>After Updating</span></h1><p><span>Follow all instructions below that applies to the version you've updated from, i.e. if you are updating from 5.3.0 everything applies.</span></p><h2>Updating from 5.3.2 and lower</h2><h3>Update the database</h3><p>Import to your database the changes provided in:</p><pre class="wordwrap"><span class="line">/&lt;ezp5-root&gt;/exponential_legacy/update/database/&lt;mysql|postgresql&gt;/5.3/dbupdate-5.3.2-to-5.3.3.sql</span></pre><p>And if you use Cluster (DFS) the following:</p><pre class="wordwrap">/&lt;ezp5-root&gt;/exponential_legacy/update/database/mysql/5.3/dbupdate-cluster-5.3.2-to-5.3.3.sql</pre><h2>Updating from 5.3.4 and lower</h2><h3 class="wordwrap">Update Solr configuration and reindex content</h3><p>An eZ Find user needs to update their solr schema.xml.</p><p>For each solr core (located in ezfind/java/solr), you need to edit &lt;my-core-name&gt;/conf/schema.xml</p><p>Around line 566, right after:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="c5f0f847-3d6f-4383-969a-3da60432ecfc" data-macro-parameters="language=xml" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingf20b.png?definition=e2NvZGU6bGFuZ3VhZ2U9eG1sfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>&lt;field name="meta_priority_si" type="sint" indexed="true" stored="true" multiValued="true"/></pre></td></tr></table><p>Add the following lines:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="65746d5b-a624-41e9-81a2-4f74184c3c15" data-macro-parameters="language=xml" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingf20b.png?definition=e2NvZGU6bGFuZ3VhZ2U9eG1sfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>&lt;!-- denormalised fields for hidden and visible path elements -->
&lt;field name="meta_visible_path_si" type="sint" indexed="true" stored="true" multiValued="true"/>     &lt;!-- Visible Location path IDs -->
&lt;field name="meta_visible_path_string_ms" type="mstring" indexed="true" stored="true" multiValued="true"/> &lt;!-- Visible Location path string -->
&lt;field name="meta_hidden_path_si" type="sint" indexed="true" stored="true" multiValued="true"/>     &lt;!-- Hidden Location path IDs -->
&lt;field name="meta_hidden_path_string_ms" type="mstring" indexed="true" stored="true" multiValued="true"/> &lt;!-- Hidden Location path string --></pre></td></tr></table><p><em>Now restart Solr, and re-index your content to be able to take advantage of this improvement.</em></p>
        <p>&nbsp;</p>
    </body>

<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=27394777 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 10:41:47 GMT -->
</html>
