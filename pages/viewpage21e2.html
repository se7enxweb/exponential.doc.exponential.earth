<!DOCTYPE html>
<html>

<!-- Mirrored from doc.ez.no/pages/viewpage.action?pageId=12125357 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 13:30:14 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <title>2. Browsing, finding, viewing - Exponential 5.1 - eZ Documentation</title>

        

                        
    
                        
    
                        
    

    <meta http-equiv="X-UA-Compatible" content="IE=EDGE,chrome=IE7">
<meta charset="UTF-8">
<meta id="confluence-context-path" name="confluence-context-path" content="">
<meta id="confluence-base-url" name="confluence-base-url" content="../index.html">

<meta id="atlassian-token" name="atlassian-token" content="9996d8127abd36d1b757536de859090f8b455d10">


<meta id="confluence-space-key" name="confluence-space-key" content="EZP51">
<script type="text/javascript">
        var contextPath = '';
</script>

    

    <meta name="confluence-request-time" content="1485866557848">
        
    
        
            <meta name="ajs-is-space-admin" content=""> <meta name="ajs-has-space-config" content="">
            <meta name="ajs-use-keyboard-shortcuts" content="true">
            <meta name="ajs-discovered-plugin-features" content="$discoveredList">
            <meta name="stp-license-product-name" content="Confluence"/> <meta name="stp-license-days-to-expiry" content="807"/> <meta name="stp-license-is-admin" content="false"/> <meta name="stp-license-should-keep-banner-hidden" content="true"/>
            <meta name="ajs-keyboardshortcut-hash" content="206314443b3cf79696d4ad89324a059c">
            <meta id="team-calendars-has-jira-link" content="true">
            <meta name="ajs-team-calendars-display-time-format" content="displayTimeFormat12">
            <meta id="team-calendars-user-timezone" content="UTC">
            <script type="text/x-template" id="team-calendars-messages" title="team-calendars-messages"><fieldset class="i18n hidden"><input type="hidden" name="calendar3.month.long.july" value="July"><input type="hidden" name="calendar3.day.short.wednesday" value="Wed"><input type="hidden" name="calendar3.day.short.thursday" value="Thu"><input type="hidden" name="calendar3.month.short.march" value="Mar"><input type="hidden" name="calendar3.month.long.april" value="April"><input type="hidden" name="calendar3.month.long.october" value="October"><input type="hidden" name="calendar3.month.long.august" value="August"><input type="hidden" name="calendar3.month.short.july" value="Jul"><input type="hidden" name="calendar3.month.short.may" value="May"><input type="hidden" name="calendar3.month.short.november" value="Nov"><input type="hidden" name="calendar3.day.long.friday" value="Friday"><input type="hidden" name="calendar3.day.long.sunday" value="Sunday"><input type="hidden" name="calendar3.day.long.saturday" value="Saturday"><input type="hidden" name="calendar3.month.short.april" value="Apr"><input type="hidden" name="calendar3.day.long.wednesday" value="Wednesday"><input type="hidden" name="calendar3.month.long.december" value="December"><input type="hidden" name="calendar3.month.short.october" value="Oct"><input type="hidden" name="calendar3.day.long.monday" value="Monday"><input type="hidden" name="calendar3.month.short.june" value="Jun"><input type="hidden" name="calendar3.day.short.monday" value="Mon"><input type="hidden" name="calendar3.day.short.tuesday" value="Tue"><input type="hidden" name="calendar3.day.short.saturday" value="Sat"><input type="hidden" name="calendar3.month.long.march" value="March"><input type="hidden" name="calendar3.month.long.june" value="June"><input type="hidden" name="calendar3.month.short.february" value="Feb"><input type="hidden" name="calendar3.month.short.august" value="Aug"><input type="hidden" name="calendar3.month.short.december" value="Dec"><input type="hidden" name="calendar3.day.short.sunday" value="Sun"><input type="hidden" name="calendar3.month.long.february" value="February"><input type="hidden" name="calendar3.day.long.tuesday" value="Tuesday"><input type="hidden" name="calendar3.month.long.may" value="May"><input type="hidden" name="calendar3.month.long.september" value="September"><input type="hidden" name="calendar3.month.long.november" value="November"><input type="hidden" name="calendar3.month.short.january" value="Jan"><input type="hidden" name="calendar3.month.short.september" value="Sep"><input type="hidden" name="calendar3.day.long.thursday" value="Thursday"><input type="hidden" name="calendar3.month.long.january" value="January"><input type="hidden" name="calendar3.day.short.friday" value="Fri"></fieldset></script>
            <meta name="ajs-is-confluence-admin" content="false">
            <meta name="ajs-connection-timeout" content="10000">
            
    
    
            <meta name="ajs-page-id" content="12125357">
            <meta name="ajs-latest-page-id" content="12125357">
            <meta name="ajs-content-type" content="page">
            <meta name="ajs-page-title" content="2. Browsing, finding, viewing">
            <meta name="ajs-parent-page-title" content="Public API Cookbook">
            <meta name="ajs-parent-page-id" content="12125355">
            <meta name="ajs-space-key" content="EZP51">
            <meta name="ajs-space-name" content="Exponential 5.1">
            <meta name="ajs-from-page-title" content="">
            <meta name="ajs-can-remove-page" content="false">
            <meta name="ajs-context-path" content="">
            <meta name="ajs-base-url" content="https://doc.ez.no">
            <meta name="ajs-version-number" content="5.8.5">
            <meta name="ajs-build-number" content="5983">
            <meta name="ajs-remote-user" content="">
            <meta name="ajs-remote-user-key" content="">
            <meta name="ajs-current-user-fullname" content="">
            <meta name="ajs-current-user-avatar-url" content="">
            <meta name="ajs-static-resource-url-prefix" content="/s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/_">
            <meta name="ajs-global-settings-attachment-max-size" content="10485760">
            <meta name="ajs-user-locale" content="en_GB">
            <meta name="ajs-enabled-dark-features" content="confluence-inline-comments-resolved,notification.plugin.api.enabled.com.atlassian.confluence.plugins.sharepage.api.ShareContentEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.mentions.api.ConfluenceMentionEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.security.ForgotPasswordEvent,pdf-preview,notification.plugin.api.enabled.com.atlassian.confluence.plugins.tasklist.event.SendTaskEmailEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageMovedEvent,previews.sharing,previews.versions,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentUpdateEvent,file-annotations,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.attachment.AttachmentBatchUploadCompletedEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.comment.CommentCreateEvent,notification.plugin.api.enabled.com.atlassian.confluence.efi.emails.events.OnboardingLessUsersEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentRemoveEvent,atlassian.aui.raphael.disabled,previews.conversion-service,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.comment.CommentUpdateEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.follow.FollowEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageEditedEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostCreateEvent,previews.trigger-all-file-types,notification.plugin.api.enabled.com.atlassian.confluence.plugins.inlinecomments.events.InlineCommentResolveEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.like.LikeCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.inlinecomments.events.InlineCommentCreateEvent,previews.sharing.pushstate,confluence-inline-comments-rich-editor,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostUpdateEvent,file-annotations.likes,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentMentionUpdateEvent,notification.plugin.api.enabled.com.atlassian.confluence.efi.emails.events.OnboardingNoSpaceCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.hipchat.api.events.HipChatUserMapped,notification.plugin.api.enabled.com.atlassian.confluence.plugins.sharepage.api.ShareAttachmentEvent,confluence-inline-comments,confluence-inline-comments-dangling-comment,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostMovedEvent">
            <meta name="ajs-atl-token" content="9996d8127abd36d1b757536de859090f8b455d10">
            <meta name="ajs-confluence-flavour" content="VANILLA">
            <meta name="ajs-user-date-pattern" content="dd MMM yyyy">
            <meta name="ajs-date.format" content="MMM dd, yyyy">
    
    <link rel="shortcut icon" href="../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/_/favicon.ico">
    <link rel="icon" type="image/x-icon" href="../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/_/favicon.ico">

<link rel="search" type="application/opensearchdescription+xml" href="../opensearch/osd.action" title="eZ Documentation"/>

<script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-nps-plugin:atlassian-nps-plugin-resources.is-server-instance-data-provider"]="true";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics.feature-data-provider-legacy"]="true";
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager.resource-base-url-pattern"]="\"(?:(?:/s/.*?/_)?/download)\"";
WRM._unparsedData["com.atlassian.confluence.plugins.confluence-license-banner:confluence-license-banner-resources.license-details"]="{\"daysBeforeLicenseExpiry\":0,\"daysBeforeMaintenanceExpiry\":0,\"showLicenseExpiryBanner\":false,\"showMaintenanceExpiryBanner\":false,\"renewUrl\":null,\"salesEmail\":null}";
WRM._unparsedData["com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin:discovery-javascript-data.link-active"]="{\"linkActive\":false,\"conditionsMet\":true,\"admin\":false}";
WRM._unparsedData["com.atlassian.plugins.atlassian-nps-plugin:nps-acknowledgement-resources.analytics-enabled-data-provider"]="\"false\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-nps-plugin:nps-acknowledgement-resources.sen-data-provider"]="\"SEN-2255945\"";
WRM._unparsedData["com.atlassian.confluence.plugins.confluence-feature-discovery-plugin:confluence-feature-discovery-plugin-resources.test-mode"]="false";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api.feature-data-provider"]="true";
</script>
<link type="text/css" rel="stylesheet" href="../s/1b9968ac17721e3a6947d14e3a43c3f8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch9c16.css?build-number=5983" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../s/fcf875d0c4710a8c828036f5c6fb7fa5-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/b8d35340d2d85de2791f14a4692ecf7b/_/download/contextbatch/css/atl.confluence.plugins.pagetree-desktop%2cmain%2cvi/batchd6a4.css?highlightactions=true&amp;flavour=VANILLA&amp;locale=en-GB" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/6c0981174e94142364564819dc0d1413-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/b8d35340d2d85de2791f14a4692ecf7b/_/download/contextbatch/css/atl.confluence.plugins.pagetree-desktop,main,viewcontent,atl.general,page,atl.comments/batch.css?conditionalComment=lt+IE+9&amp;locale=en-GB" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/7893b9affdc3bf828ad93d0610d3d5f3-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/b8d35340d2d85de2791f14a4692ecf7b/_/download/contextbatch/css/atl.confluence.plugins.pagetree-desktop,main,viewcontent,atl.general,page,atl.comments/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/3a21f7b21af4c67045d1e0255f2ac570/_/download/contextbatch/css/theme.doc/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/3.7.2/_/download/batch/confluence.extra.information_information-plugin/confluence.extra.information_information-plugin-adg-styles.cc" media="all">
<link type="text/css" rel="stylesheet" href="../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/2.8.6/_/download/batch/org.randombits.confluence.toc_toc-plugin-styles/org.randombits.confluence.toc_toc-plugin-styles.css" media="all">
<link type="text/css" rel="stylesheet" href="../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/2.1.7/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plug/com.atlassian.confluence.ext.newcode-macro-plugin_syntaxhighl" media="all">
<link type="text/css" rel="stylesheet" href="../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/2.1.7/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plug/com.atlassian.confluence.ext.newcode-macro-plugin_sh-theme-ec" media="all">
<link type="text/css" rel="stylesheet" href="../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/16/_/styles/colors556c.css?spaceKey=EZP51" media="all">
<link type="text/css" rel="stylesheet" href="../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/16/_/styles/custom556c.css?spaceKey=EZP51" media="all">
<script type="text/javascript" src="../s/1f7b22082ef39a4bb134622dae929bdc-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/js/batch32f4.js?atlassian.aui.raphael.disabled=true&amp;locale=en-GB&amp;build-number=5983" ></script>
<script type="text/javascript" src="../s/aa56759c03dcb293b394c4b46058625c-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/b8d35340d2d85de2791f14a4692ecf7b/_/download/contextbatch/js/atl.confluence.plugins.pagetree-desktop%2cmain%2cvi/batcha41c.js?highlightactions=true&amp;flavour=VANILLA&amp;locale=en-GB&amp;anonymous-access-enabled=true&amp;is-server-instance=true&amp;hostenabled=true" ></script>
<script type="text/javascript" src="../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/2.8.6/_/download/batch/org.randombits.confluence.toc_client-side-toc-r/org.randombits.confluence.toc_client-side-toc-resources.cf.de" ></script>
<script type="text/javascript" src="../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/2.8.6/_/download/batch/org.randombits.confluence.toc_toc-plugin-analytics/org.randombits.confluence.toc_toc-plugin-analytics.js" ></script>
<script type="text/javascript" src="../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/2.1.7/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plug/com.atlassian.confluence.ext-2.newcode-macro-plugin_syntaxhighl" ></script>
<script type="text/javascript" src="../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/2.1.7/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plug/com.atlassian.confluence.ext-3.newcode-macro-plugin_syntaxhighl" ></script>
<script type="text/javascript" src="../s/6c0981174e94142364564819dc0d1413-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/2.1.7/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plug/com.atlassian.confluence.ext.newcode-macro-plugin_syntaxhighl?locale=en-GB" ></script>


        
            <meta name="stp-license-product-name" content="Confluence"/> <meta name="stp-license-days-to-expiry" content="807"/> <meta name="stp-license-is-admin" content="false"/> <meta name="stp-license-should-keep-banner-hidden" content="true"/>
    

        
        <meta name="ajs-site-title" content="eZ Documentation" />

    
    

    
                <link rel="canonical" href="../display/EZP51/2.html">
        <link rel="shortlink" href="../display/EZP51/2.html">
    <meta name="wikilink" content="[EZP51:2. Browsing, finding, viewing]">
    <meta name="page-version" content="17">

</head>

<body             onload="placeFocus()"
     id="com-atlassian-confluence" class="theme-documentation  aui-theme-default aui-layout">

        
            <div id='stp-licenseStatus-banner'></div>
    <div id="full-height-container">
    <div id="header-precursor">
        
                    </div>






<header id="header" role="banner">
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation"><div class="aui-header-inner"><div class="aui-header-before"><a class=" aui-dropdown2-trigger app-switcher-trigger" aria-owns="app-switcher" aria-controls="app-switcher" aria-haspopup="true" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a><div id="app-switcher" class="aui-dropdown2 aui-style-default"><div class="app-switcher-loading">Loading&hellip;</div></div><script>
            (function (NL) {
                var initialise = function () {
                    // For some milestones of AUI, the atlassian soy namespace was renamed to aui. Handle that here by ensuring that window.atlassian is defined.
                    window.atlassian = window.atlassian || window.aui;
                    new NL.AppSwitcher({
                        dropdownContents: '#app-switcher'
                    });
                };
                if (NL.AppSwitcher) {
                    initialise();
                } else {
                    NL.onInit = initialise;
                }
            }(window.NL = (window.NL || {})));
            window.NL.isUserAdmin = false</script></div><div class="aui-header-primary"><h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="../index.html"><img src="../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/_/images/logo/atl.site.logo" alt="eZ Documentation" /></a></h1><ul class="aui-nav">
                            <li>
            
        
        
<a  id="space-directory-link" href="../spacedirectory/view.html"  class=" aui-nav-imagelink"   title="Spaces">
            <span>Spaces</span>
    </a>
        </li>
                            <li id="browseMenu" role="menu">
            
    
        <a id="browse-menu-link" class="aui-nav-link aui-dropdown2-trigger" href="#" aria-haspopup="true" aria-owns="browse-menu-link-content" title="Browse">
        <span class="browse">Browse</span>
    </a>
    <nav id="browse-menu-link-content" class="aui-dropdown2 aui-style-default" aria-hidden="true">
                    <div class="aui-dropdown2-section">
                                <ul  id="browse-menu-link-leading" class="aui-list-truncate section-leading first">
                                            <li>
    
            
<a  id="space-pages-link" href="listpages-alphaview2fd6.html?key=EZP51" class="    "      title="Browse pages in the Exponential 5.1 space" >
        Pages
</a>
</li>
                                            <li>
    
            
<a  id="space-blogposts-link" href="viewrecentblogposts2fd6.html?key=EZP51" class="    "      title="Browse blogs in the Exponential 5.1 space" >
        Blog
</a>
</li>
                                            <li>
    
            
<a  id="space-labels-link" href="../labels/listlabels-heatmap2fd6.html?key=EZP51" class="    "      title="Browse labels in the Exponential 5.1 space" >
        Labels
</a>
</li>
                                            <li>
    
            
<a  id="space-advanced-link" href="../spaces/viewspacesummary2fd6.html?key=EZP51" class="    "      title="Browse additional space functions in the Exponential 5.1 space" >
        Space Operations
</a>
</li>
                                    </ul>
            </div>
            </nav>
    
        </li>
        </ul>
</div><div class="aui-header-secondary"><ul class="aui-nav">
            <li>
        
    
            
<a  id="doctheme-anchor" href="#"  class=" aui-nav-imagelink"   title="">
            <span></span>
    </a>
    </li>
                    <li>
        <form id="quick-search" class="aui-quicksearch dont-default-focus header-quicksearch" action="https://doc.ez.no/dosearchsite.action" method="get"><fieldset><input type="hidden" name="where" value="EZP51"/><input type="hidden" name="spaceSearch" value="true"/><label for="quick-search-query" class="assistive">Quick Search</label><input id="quick-search-query" class="text app-search search quick-search-query" type="text" accessKey="q" autocomplete="off" name="queryString" title="Quick Search" placeholder="Search space" /><input id="quick-search-submit" class="quick-search-submit" type="submit" value="Search"/><div class="aui-dd-parent quick-nav-drop-down"></div></fieldset></form>
    </li>
        <li>
            
        <a id="help-menu-link" class="aui-nav-link aui-dropdown2-trigger" href="#" aria-haspopup="true" aria-owns="help-menu-link-content" title="Help">
        <span class="aui-icon aui-icon-small aui-iconfont-help">Help</span>
    </a>
    <nav id="help-menu-link-content" class="aui-dropdown2 aui-style-default" aria-hidden="true">
                    <div class="aui-dropdown2-section">
                                <ul  id="help-menu-link-leading" class="aui-list-truncate section-leading first">
                                            <li>
        
            
<a  id="confluence-help-link" href="https://docs.atlassian.com/confluence/docs-58/Getting+Help+And+Support" class="    "      title="Visit the Confluence documentation home"  target="_blank"
>
        Online Help
</a>
</li>
                                            <li>
    
                
<a  id="keyboard-shortcuts-link" href="#" class="    "      title="View available keyboard shortcuts" >
        Keyboard Shortcuts
</a>
</li>
                                            <li>
    
            
<a  id="feed-builder-link" href="../dashboard/configurerssfeed.html" class="    "      title="Create your custom RSS feed." >
        Feed Builder
</a>
</li>
                                            <li>
    
            
<a  id="whats-new-menu-link" href="https://docs.atlassian.com/confluence/docs-58/whatsnew/iframe" class="    "      title="" >
        What’s new
</a>
</li>
                                            <li>
    
                
<a  id="gadget-directory-link" href="#" class="   user-item administration-link "      title="Browse gadgets provided by Confluence" >
        Available Gadgets
</a>
</li>
                                            <li>
    
            
<a  id="confluence-about-link" href="../aboutconfluencepage.html" class="    "      title="Get more information about Confluence" >
        About Confluence
</a>
</li>
                                    </ul>
            </div>
            </nav>
    
    </li>
        <li>
                
    
    </li>
        <li>
            
    </li>
        <li>
                                            <li>
        
            
<a  id="login-link" href="../login307a.html?os_destination=%2Fpages%2Fviewpage.action%3FpageId%3D12125357" class="   user-item login-link "      title="" >
        Log in
</a>
</li>
                        
    </li>
    </ul>
</div></div><!-- .aui-header-inner--></nav><!-- .aui-header -->
    <br class="clear">
</header>

    <div id="splitter">
    <div id="splitter-sidebar"  class="padding-div" >
        
        <p>&nbsp;<br/>
<strong>Navigation</strong><br/>
&bull; <a href="https://confluence.ez.no/display/MAIN" class="external-link" rel="nofollow">Exponential Platform Documentation</a><br/>
&nbsp;</p>
    

                    
    


<div class="plugin_pagetree">

        
        
    <ul class="plugin_pagetree_children_list plugin_pagetree_children_list_noleftspace">
        <div class="plugin_pagetree_children">
        </div>
    </ul>

    <fieldset class="hidden">
        <input type="hidden" name="treeId" value="">
        <input type="hidden" name="treeRequestId" value="/plugins/pagetree/naturalchildren.action?decorator=none&amp;excerpt=false&amp;sort=position&amp;reverse=false&amp;disableLinks=false&amp;expandCurrent=false">
        <input type="hidden" name="treePageId" value="12125357">

        <input type="hidden" name="noRoot" value="false">
        <input type="hidden" name="rootPageId" value="12125259">

        <input type="hidden" name="rootPage" value="">
        <input type="hidden" name="startDepth" value="0">
        <input type="hidden" name="spaceKey" value="EZP51" >

        <input type="hidden" name="i18n-pagetree.loading" value="Loading...">
        <input type="hidden" name="i18n-pagetree.error.permission" value="Unable to load page tree. It seems that you do not have permission to view the root page.">
        <input type="hidden" name="i18n-pagetree.eeror.general" value="There was a problem retrieving the page tree. Please check the server log file for more information.">
        <input type="hidden" name="loginUrl" value="/login.action?os_destination=%2Fpages%2Fviewpage.action%3FpageId%3D12125357">
        <input type="hidden" name="mobile" value="false">

                <fieldset class="hidden">
                                                <input type="hidden" name="ancestorId" value="12125355">
                                    <input type="hidden" name="ancestorId" value="12125353">
                                    <input type="hidden" name="ancestorId" value="12125294">
                                    <input type="hidden" name="ancestorId" value="12125259">
                                    </fieldset>
    </fieldset>
</div>



            </div>
    <div id="splitter-content">

                    <script type="text/javascript" src="../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5.8.5/_/download/resources/com.atlassian.confluence.plugins.doctheme_resources/doc-theme.js"></script>
    
                        
        <div id="theme-header">
            <div class="sectionColumnWrapper"><div class="sectionMacro">
<div class="sectionMacroRow"><div class="columnMacro" style="width:1%;min-width:1%;max-width:1%;"></div>
<div class="columnMacro">
<div class="panel" style="background-color: #FFE0E0;border-style: solid;border-width: 1px;"><div class="panelContent" style="background-color: #FFE0E0;">
<p>This is outdated documentation made for <strong>Exponential Platform 5.1</strong>. It is being moved into the <a href="../display/EZP/eZ%2bPublish%2b5.html">Exponential 5.x documentation</a>, so please go there for most up-to-date documentation.</p>
</div></div></div>
<div class="columnMacro" style="width:1%;min-width:1%;max-width:1%;"></div></div></div></div>
        </div>
    
            
<div id="main"  class="aui-page-panel" >
    <div id="main-header">
        
        
    <div id="navigation" class="content-navigation view">
                    <ul class="ajs-menu-bar">
                                                        
                    
        <li class="normal ajs-menu-item">
        <a id="action-menu-link" class="action aui-dropdown2-trigger-arrowless aui-button aui-button-subtle ajs-menu-title aui-dropdown2-trigger" href="#" aria-haspopup="true" aria-owns="action-menu" data-container="#navigation">
            <span>
                                    <span class="aui-icon aui-icon-small aui-iconfont-more"></span>
                                
            </span>
        </a>         <div id="action-menu" class="aui-dropdown2 aui-style-default">
                            <ul  id="action-menu-primary"                     class="section-primary first aui-dropdown2-section">
                                            <li>

    
        
                                            
    
    
    <a  id="view-attachments-link" href="viewpageattachments21e2.html?pageId=12125357" rel="nofollow" class="action-view-attachments"  accessKey="t"  title="View Attachments">
                <span>
                        A<u>t</u>tachments (0)
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="action-view-history-link" href="viewpreviousversions21e2.html?pageId=12125357" rel="nofollow" class="action-view-history"   title="">
                <span>
                        Page History
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="action-page-permissions-link" href="viewinfo21e2.html?pageId=12125357" rel="nofollow" class="action-page-permissions"   title="Edit restrictions">
                <span>
                        Restrictions
        </span>    </a>
</li>
                                </ul>
                            <ul  id="action-menu-secondary"                     class="section-secondary aui-dropdown2-section">
                                            <li>

    
        
                                            
    
    
    <a  id="view-page-info-link" href="viewinfo21e2.html?pageId=12125357" rel="nofollow" class="action-view-info"   title="">
                <span>
                        Page Information
        </span>    </a>
</li>
                                        <li>

    
            
                                            
    
    
    <a  id="view-resolved-comments" href="#" rel="nofollow" class=""   title="">
                <span>
                        Resolved comments
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="link-to-page-link" href="viewinfo21e2.html?pageId=12125357" rel="nofollow" class=""   title="Link to this Page">
                <span>
                        Link to this Page…
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="view-in-hierarchy-link" href="listpages-dirview5710.html?key=EZP51&amp;openId=12125357#selectedPageInHierarchy" rel="nofollow" class=""   title="">
                <span>
                        View in Hierarchy
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="action-view-source-link" href="../plugins/viewsource/viewpagesrc21e2.html?pageId=12125357" rel="nofollow" class="action-view-source popup-link"   title="">
                <span>
                        View Source
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="action-export-pdf-link" href="../download/temp/pdfexport-20170131-310117-1123-4065/EZP51-2.Browsing%2cfinding%2cviewing-310117-1123-4066f1f7.pdf?pageId=12125357" rel="nofollow" class=""   title="">
                <span>
                        Export to PDF
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="action-export-word-link" href="../exportword21e2?pageId=12125357" rel="nofollow" class="action-export-word"   title="">
                <span>
                        Export to Word
        </span>    </a>
</li>
                                </ul>
                    </div>
    </li>
            </ul>
    </div>

        
                <div id="title-heading" class="pagetitle with-breadcrumbs">
        
                            <div class="space-logo " data-key="EZP51" data-name="Exponential 5.1" data-entity-type="confluence.space">
            <a><img class="logo space custom" src="../download/attachments/12125253/EZP51ccaa?version=2&amp;modificationDate=1370705476000&amp;api=v2" alt=""></a>
        </div>            
                            <div id="breadcrumb-section">
                    
    
    
    <ol id="breadcrumbs">
                                        
                        
        <li class="first" >
                        
                            <span class=""><a href="../display/EZP51/eZ%2bPublish%2bDocumentation.html">Exponential 5.1</a></span>
                                                                                            <li id="ellipsis" title="Show all breadcrumbs"><span><strong>&#8230;</strong></span></li>
                                                
                        
        <li class="hidden-crumb" >
                        
                            <span class=""><a href="../display/EZP51/eZ%2bPublish%2bDocumentation.html">Exponential Documentation</a></span>
                                                                                    
                        
        <li class="hidden-crumb" >
                        
                            <span class=""><a href="../display/EZP51/Developer%2bGuide.html">Developer Guide</a></span>
                                                                                    
                        
        <li class="hidden-crumb" >
                        
                            <span class=""><a href="../display/EZP51/eZ%2bPublish%2bPublic%2bAPI.html">Exponential Public API</a></span>
                                                                    
                        
        <li>
                        
                            <span class=""><a href="../display/EZP51/Public%2bAPI%2bCookbook.html">Public API Cookbook</a></span>
                                                    </ol>


                </div>
            
            <h1 id="title-text" class="with-breadcrumbs">
                                        <a href="../display/EZP51/2.html">2. Browsing, finding, viewing</a>
                            </h1>
        </div>
    </div>

    

    
    
    
    
    

        




        




    

    

    







    
    
        
    
    
                    
    

    


<div id="content" class="page view">
    


<div id="action-messages">
                        </div>



        <script type="text/x-template" title="searchResultsGrid">
    <table class="aui">
        <thead>
            <tr class="header">
                <th class="search-result-title">Page Title</th>
                <th class="search-result-space">Space</th>
                <th class="search-result-date">Updated</th>
            </tr>
        </thead>
    </table>
</script>
<script type="text/x-template" title="searchResultsGridCount">
    <p class="search-result-count">{0}</p>
</script>
<script type="text/x-template" title="searchResultsGridRow">
    <tr class="search-result">
        <td class="search-result-title"><a href="{1}" class="content-type-{2}"><span>{0}</span></a></td>
        <td class="search-result-space"><a class="space" href="/display/{4}/" title="{3}">{3}</a></td>
        <td class="search-result-date"><span class="date" title="{6}">{5}</span></td>
    </tr>
</script>
        
    
    
        <fieldset class="hidden parameters">
            <input type="hidden" title="parentPageId" value="12125355">
        </fieldset>

                            
    

                    

        
        <a href="#page-metadata-end" class="assistive">Skip to end of metadata</a>
<div id="page-metadata-start" class="assistive"></div>

    <div class="page-metadata">
        <ul>
                            <li class="page-metadata-item noprint">

    
            
                                            
    
    
    <a  id="content-metadata-page-restrictions" href="#" rel="nofollow" class="hidden"   title="Restrictions apply">
                    <img alt="" src="../download/resources/com.atlassian.confluence.plugins.confluence-page-banner_page-banner-resources/images/red_padlock.png" height="16" width="16" title="">
                <span>
                        
        </span>    </a>
</li>
                        <li class="page-metadata-modification-info">
                
        
    
        
    
        
            
            Created by <span class='author'>     <a href="../login6527.html"
                       class="url fn"
                            >Ricardo Correia</a></span>, last modified on <a class='last-modified' title='Show changes' href='diffpagesbyversion595a.html?pageId=12125357&amp;selectedPageVersions=16&amp;selectedPageVersions=17'>Jan 31, 2014</a>
                </li>
        </ul>
    </div>


<a href="#page-metadata-start" class="assistive">Go to start of metadata</a>
<div id="page-metadata-end" class="assistive"></div>

        
        <fieldset class="hidden parameters">
                        <input type="hidden" title="browsePageTreeMode" value="view">
        </fieldset>

        <div id="main-content" class="wiki-content">
                           
        <p>We will start by going through the various ways to find and retrieve content from Exponential using the API. While this will be covered in further dedicated documentation, it is necessary to explain a few basic concepts of the Public API. In the following recipes, you will learn about the general principles of the API as they are introduced in individual recipes.</p><p><div class="toc-macro client-side-toc-macro " data-headerelements="H1,H2,H3,H4,H5,H6,H7"></div></p><h2 id="id-2.Browsing,finding,viewing-DisplayingvaluesfromaContent">Displaying values from a Content</h2><p>In this recipe, we will see how to fetch a Content instance from the repository, and obtain its Field's content. </p><p>Let's first see the full code. You can see the Command line version at <a href="https://github.com/ezsystems/CookbookBundle/blob/master/Command/ViewContentCommand.php" class="external-link" rel="nofollow">https://github.com/ezsystems/CookbookBundle/blob/master/Command/ViewContentCommand.php</a>.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Viewing content</b></div><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: true; theme: Eclipse"><![CDATA[$repository = $this-&gt;getContainer()-&gt;get( &#39;exponential.api.repository&#39; );
$contentService = $repository-&gt;getContentService();
$contentTypeService = $this-&gt;getRepository()-&gt;getContentTypeService();
$fieldTypeService = $repository-&gt;getFieldTypeService();
 
try
{
    $content = $contentService-&gt;loadContent( 66 );
    $contentType = $contentTypeService-&gt;loadContentType( $content-&gt;contentInfo-&gt;contentTypeId );
    // iterate over the field definitions of the content type and print out each field&#39;s identifier and value
    foreach( $contentType-&gt;fieldDefinitions as $fieldDefinition )
    {
        $output-&gt;write( $fieldDefinition-&gt;identifier . &quot;: &quot; );
        $fieldType = $fieldTypeService-&gt;getFieldType( $fieldDefinition-&gt;fieldTypeIdentifier );
        $field = $content-&gt;getFieldValue( $fieldDefinition-&gt;identifier );
 
        // We use the Field&#39;s toHash() method to get readable content out of the Field
        $valueHash = $fieldType-&gt;toHash( $field-&gt;value );
        $output-&gt;writeln( $valueHash );
    }
}
catch( \eZ\Publish\API\Repository\Exceptions\NotFoundException $e )
{
    // if the id is not found
    $output-&gt;writeln( &quot;No content with id $contentId&quot; );
}
catch( \eZ\Publish\API\Repository\Exceptions\UnauthorizedException $e )
{
    // not allowed to read this content
    $output-&gt;writeln( &quot;Anonymous users are not allowed to read content with id $contentId&quot; );
}]]></script>
</div></div><p>Let's analyze this code block by block.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: true; theme: Eclipse"><![CDATA[$repository = $this-&gt;getContainer()-&gt;get( &#39;exponential.api.repository&#39; );
$contentService = $repository-&gt;getContentService();
$contentTypeService = $this-&gt;getRepository()-&gt;getContentTypeService();
$fieldTypeService = $repository-&gt;getFieldTypeService();]]></script>
</div></div><p>This is the initialization part. As explained above, everything in the Public API goes through the repository via dedicated services. We get the repository from the service container, using the method <code>get()</code> of our container, obtained via <code>$this-&gt;getContainer()</code>. Using our $repository variable, we fetch the two services we will need using <code>getContentService()</code> and <code>getFieldTypeService()</code>.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: true; first-line: 5; theme: Eclipse"><![CDATA[try
{
    // iterate over the field definitions of the content type and print out each field&#39;s identifier and value
    $content = $contentService-&gt;loadContent( 66 );]]></script>
</div></div><p>Everything starting from line 5 is about getting our Content and iterating over its Fields. You can see that the whole logic is part of a <code>try/catch</code> block. Since the Public API uses Exceptions for error handling, this is strongly encouraged, as it will allow you to conditionally catch the various errors that may happen. We will cover the exceptions we expect in a next paragraph.</p><p>The first thing we do is use the Content Service to load a Content using its ID, 66: <code>$contentService-&gt;<a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/ContentService.html#method_loadContent" class="external-link" rel="nofollow">loadContent</a></code><code>( 66 )</code>. As you can see on the API doc page, this method expects a Content ID, and returns a <a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/Values/Content/Content.html" class="external-link" rel="nofollow">Content Value Object</a>.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: true; theme: Eclipse"><![CDATA[foreach( $contentType-&gt;fieldDefinitions as $fieldDefinition )
{
    // ignore ezpage
    if( $fieldDefinition-&gt;fieldTypeIdentifier == &#39;ezpage&#39; )
        continue;
    $output-&gt;write( $fieldDefinition-&gt;identifier . &quot;: &quot; );
    $fieldType = $fieldTypeService-&gt;getFieldType( $fieldDefinition-&gt;fieldTypeIdentifier );
    $fieldValue = $content-&gt;getFieldValue( $fieldDefinition-&gt;identifier );
    $valueHash = $fieldType-&gt;toHash( $fieldValue );
    $output-&gt;writeln( $valueHash );
}]]></script>
</div></div><p>This block is the one that actually displays the value.</p><p>It iterates over the Content's (Content Object) fields using the ContentType's (Content Class) FieldDefinitions (Content Class Attribute) (<code>$contentType-&gt;fieldDefinitions</code>).</p><p>For each Field Definition (Content Class Attribute), we start by displaying its identifier (<code>$fieldDefinition-&gt;identifier</code>). We then get the FieldType (Datatype) instance using the FieldType Service (<code>$fieldTypeService-&gt;getFieldType( $fieldDefinition-&gt;fieldTypeIdentifier )</code>). This method expects the requested FieldType's identifier, as a string (ezstring, ezxmltext...), and returns an <code>eZ\Publish\API\Repository\FieldType</code> object.</p><p>The Field Value object (Content Object Attribute) is obtained using the <code>getFieldValue()</code> method of the Content Value Object which we obtained using <code>ContentService::loadContent()</code>.</p><p>Using the FieldType object, we can convert the Field Value to a hash using the <code>toHash()</code> method, provided by every FieldType. This method returns a primitive type (string, hash) out of a Field instance.</p><p>With this example, you should get a first idea on how you interact with the API. Everything is done through services, each service being responsible for a specific part of the repository (Content, FieldType, etc).</p><div class="confluence-information-macro confluence-information-macro-information"><p class="title">Loading Content in different languages</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Since we didn't specify any language code, our Field objects is returned in the default language, depending on your language settings in <code>exponential.yml</code>. If you want to use a non-default language, you can specify a language code in the <code>getField()</code> call:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[$content-&gt;getFieldValue( $fieldDefinition-&gt;identifier, &#39;fre-FR&#39; )]]></script>
</div></div></div></div><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Exceptions handling</b></div><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[catch ( \eZ\Publish\API\Repository\Exceptions\NotFoundException $e )
{
    $output-&gt;writeln( &quot;&lt;error&gt;No content with id $contentId found&lt;/error&gt;&quot; );
}
catch ( \eZ\Publish\API\Repository\Exceptions\UnauthorizedException $e )
{
    $output-&gt;writeln( &quot;&lt;error&gt;Permission denied on content with id $contentId&lt;/error&gt;&quot; );
}]]></script>
</div></div><p>As said earlier, the Public API uses <a href="http://php.net/exceptions" class="external-link" rel="nofollow">Exceptions</a> to handle errors. Each method of the API may throw different exceptions, depending on what it does. Which exceptions can be thrown is usually documented for each method. In our case, <code>loadContent()</code> may throw two types of exceptions: <code>NotFoundException</code>, if the requested ID isn't found, and <code>UnauthorizedException</code> if the currently logged in user isn't allowed to view the requested content.</p><p>It is a good practice to cover each exception you expect to happen. In this case, since our Command takes the content ID as a parameter, this ID may either not exist, or the referenced content may not be visible to our user. Both cases are covered with explicit error messages.</p><h2 id="id-2.Browsing,finding,viewing-TraversingaLocationsubtree">Traversing a Location subtree</h2><p>This recipe will show how to traverse a Location's subtree. The full code implements a command that takes a Location ID as an argument, and recursively prints this location's subtree.</p><div class="confluence-information-macro confluence-information-macro-information"><p class="title">Full code</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><a href="https://github.com/ezsystems/CookbookBundle/blob/master/Command/BrowseLocationsCommand.php" class="external-link" rel="nofollow">https://github.com/ezsystems/CookbookBundle/blob/master/Command/BrowseLocationsCommand.php</a></p></div></div><p>In this code, we introduce the <a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/LocationService.html" class="external-link" rel="nofollow">LocationService</a>. This service is used to interact with locations (Exponential 4 nodes). We use two methods from this service: <a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/LocationService.html#method_loadLocation" class="external-link" rel="nofollow"><code>loadLocation()</code></a>, and <code><a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/LocationService.html#method_loadLocationChildren" class="external-link" rel="nofollow">loadLocationChildren()</a></code>.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Loading a location</b></div><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[try
{
    // load the starting location and browse
    $location = $this-&gt;locationService-&gt;loadLocation( $locationId );
    $this-&gt;browseLocation( $location, $output );
}
catch ( \eZ\Publish\API\Repository\Exceptions\NotFoundException $e )
{
    $output-&gt;writeln( &quot;&lt;error&gt;No location found with id $locationId&lt;/error&gt;&quot; );
}
catch( \eZ\Publish\API\Repository\Exceptions\UnauthorizedException $e )
{
    $output-&gt;writeln( &quot;&lt;error&gt;Current users are not allowed to read location with id $locationId&lt;/error&gt;&quot; );
}]]></script>
</div></div><p>As for the ContentService, <code>loadLocation()</code> returns a  Value Object, here a <code><a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/Values/Content/Location.html" class="external-link" rel="nofollow">Location</a></code>. Errors are handled with exceptions: <code><a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/Exceptions/NotFoundException.html" class="external-link" rel="nofollow">NotFoundException</a></code> if the Location ID couldn't be found, and <code><a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/Exceptions/UnauthorizedException.html" class="external-link" rel="nofollow">UnauthorizedException</a></code> if the current repository user isn't allowed to view this location.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Iterating over a Location's children</b></div><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[private function browseLocation( Location $location, OutputInterface $output, $depth = 0 )
{
    $childLocationList = $this-&gt;locationService-&gt;loadLocationChildren( $location, $offset = 0, $limit = -1 );
    // If offset and limit had been specified to something else then &quot;all&quot;, then $childLocationList-&gt;totalCount contains the total count for iteration use
    foreach ( $childLocationList-&gt;locations as $childLocation )
    {
        $this-&gt;browseLocation( $childLocation, $output, $depth + 1 );
    }
}]]></script>
</div></div><p><code>LocationService::loadLocationChildren()</code> returns a <a href="https://github.com/ezsystems/exponential-kernel/blob/master/eZ/Publish/API/Repository/Values/Content/LocationList.php" class="external-link" rel="nofollow">LocationList</a> Value Objects that we can iterate over.</p><p>Note that unlike loadLocation(), we don't need to care for permissions here: the currently logged in user's permissions will be respected when loading children, and locations that can't be viewed won't be returned at all.</p><div class="confluence-information-macro confluence-information-macro-information"><p class="title">Full code</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Should you need more advanced children fetching methods, the <code><a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/SearchService.html" class="external-link" rel="nofollow">SearchService</a></code> is what you are looking for.</p></div></div><h2 id="id-2.Browsing,finding,viewing-ViewingContentMetaData">Viewing Content Meta Data</h2><p>Content is a central piece in the Public API. You will often need to start from a Content, and dig in from its metadata. Basic content metadata is made available through <code><a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/Values/Content/ContentInfo.html" class="external-link" rel="nofollow">ContentInfo</a></code> objects. This Value Object mostly provides primitive fields: <code>contentTypeId</code>, <code>publishedDate</code> or <code>mainLocationId</code>. But it is also used to request further Content related Value Objects from various services.</p><p>The full example implements an <code>exponential:cookbook:view_content_metadata</code> command that prints out all the available metadata, given a content ID.</p><div class="confluence-information-macro confluence-information-macro-information"><p class="title">Full code</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><a href="https://github.com/ezsystems/CookbookBundle/blob/master/Command/ViewContentMetaDataCommand.php" class="external-link" rel="nofollow">https://github.com/ezsystems/CookbookBundle/blob/master/Command/ViewContentMetaDataCommand.php</a></p></div></div><p>We introduce here several new services: <a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/URLAliasService.html" class="external-link" rel="nofollow"><code>URLAliasService</code></a>, <a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/UserService.html" class="external-link" rel="nofollow"><code>UserService</code></a> and <a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/SectionService.html" class="external-link" rel="nofollow"><code>SectionService</code></a>. The concept should be familiar to you now.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Services initialization</b></div><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[/** @var $repository \eZ\Publish\API\Repository\Repository */
$repository = $this-&gt;getContainer()-&gt;get( &#39;exponential.api.repository&#39; );
$contentService = $repository-&gt;getContentService();
$locationService = $repository-&gt;getLocationService();
$urlAliasService = $repository-&gt;getURLAliasService();
$sectionService = $repository-&gt;getSectionService();
$userService = $repository-&gt;getUserService();]]></script>
</div></div><h3 id="id-2.Browsing,finding,viewing-SettingtheRepositoryUser">Setting the Repository User</h3><div class="confluence-information-macro confluence-information-macro-tip"><span class="aui-icon aui-icon-small aui-iconfont-approve confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>In a command line script, the repository runs as if executed by the anonymous user. In order to identify it as a different user, you need to use the <code><a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/UserService.html" class="external-link" rel="nofollow">UserService</a></code> as follows:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[$administratorUser = $userService-&gt;loadUser( 14 );
$repository-&gt;setCurrentUser( $administratorUser );]]></script>
</div></div><p>This may be crucial when writing maintenance or synchronization scripts.</p><p>This is of course not required in template functions or controller code, as the HTTP layer will take care of identifying the user, and automatically set it in the repository.</p></div></div><h3 id="id-2.Browsing,finding,viewing-TheContentInfoValueObject">The ContentInfo Value Object</h3><p>We will now load a <code>ContentInfo</code> object using the provided ID and use it to get our Content's meta data</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[$contentInfo = $contentService-&gt;loadContentInfo( $contentId );]]></script>
</div></div><h3 id="id-2.Browsing,finding,viewing-Locations">Locations</h3><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Getting Content Locations</b></div><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[// show all locations of the content
$locations = $locationService-&gt;loadLocations( $contentInfo );
$output-&gt;writeln( &quot;&lt;info&gt;LOCATIONS&lt;/info&gt;&quot; );
foreach ( $locations as $location )
{
    $urlAlias = $urlAliasService-&gt;reverseLookup( $location );
    $output-&gt;writeln( &quot;  $location-&gt;pathString  ($urlAlias-&gt;path)&quot; );
}]]></script>
</div></div><p>We first use <code><a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/LocationService.html" class="external-link" rel="nofollow">LocationService</a><a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/LocationService.html#method_loadLocations" class="external-link" rel="nofollow">::loadLocations</a>()</code> to <strong>get</strong> the <strong>Locations</strong> for our <code>ContentInfo</code>. This method returns an array of <a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/Values/Content/Location.html" class="external-link" rel="nofollow"><code>Location</code></a> Value Objects. In this example, we print out the Location's path string (/path/to/content). We also use <a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/URLAliasService.html#method_reverseLookup" class="external-link" rel="nofollow">URLAliasService::reverseLookup()</a> to get the location's main <a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/Values/Content/URLAlias.html" class="external-link" rel="nofollow">URLAlias</a>.</p><h3 id="id-2.Browsing,finding,viewing-Relations">Relations</h3><p>We now want to list relations from and to our Content. Since relations are versioned, we need to feed the <a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/ContentService.html#method_loadRelations" class="external-link" rel="nofollow"><code>ContentService::loadRelations()</code></a> with a <code><a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/Values/Content/VersionInfo.html" class="external-link" rel="nofollow">VersionInfo</a></code> object. We can get the current version's <code>VersionInfo</code> using <a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/ContentService.html#method_loadVersionInfo" class="external-link" rel="nofollow"><code>ContentService::loadVersionInfo()</code></a>. If we had been looking for an archived version, we could have specified the version number as the second argument to this method.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Browsing a Content's relations</b></div><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[// show all relations of the current version
$versionInfo = $contentService-&gt;loadVersionInfo( $contentInfo );
$relations = $contentService-&gt;loadRelations( $versionInfo );
if ( count( $relations ) )
{
    $output-&gt;writeln( &quot;&lt;info&gt;RELATIONS&lt;/info&gt;&quot; );
    foreach ( $relations as $relation )
    {
        $name = $relation-&gt;destinationContentInfo-&gt;name;
        $output-&gt;write( &quot;  Relation of type &quot; . $this-&gt;outputRelationType( $relation-&gt;type ) . &quot; to content $name&quot; );
    }
}]]></script>
</div></div><p>We can iterate over the <a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/Values/Content/Relation.html" class="external-link" rel="nofollow">Relation</a> objects array we got from loadRelations(), and use these Value Objects to get data about our relations. It has two main properties: destinationContentInfo, and sourceContentInfo. They also hold the relation type (embed, common...), and the optional Field this relations is made with.</p><h3 id="id-2.Browsing,finding,viewing-ContentInfoproperties">ContentInfo properties</h3><p>We can of course get our Content's metadata by using the Value Object's properties.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Primitive object metadata</b></div><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[// show meta data
$output-&gt;writeln( &quot;\n&lt;info&gt;METADATA&lt;/info&gt;&quot; );
$output-&gt;writeln( &quot;  &lt;info&gt;Name:&lt;/info&gt; &quot; . $contentInfo-&gt;name );
$output-&gt;writeln( &quot;  &lt;info&gt;Type:&lt;/info&gt; &quot; . $contentType-&gt;identifier );
$output-&gt;writeln( &quot;  &lt;info&gt;Last modified:&lt;/info&gt; &quot; . $contentInfo-&gt;modificationDate-&gt;format( &#39;Y-m-d&#39; ) );
$output-&gt;writeln( &quot;  &lt;info&gt;Published:&lt;/info&gt; &quot;. $contentInfo-&gt;publishedDate-&gt;format( &#39;Y-m-d&#39; ) );
$output-&gt;writeln( &quot;  &lt;info&gt;RemoteId:&lt;/info&gt; $contentInfo-&gt;remoteId&quot; );
$output-&gt;writeln( &quot;  &lt;info&gt;Main Language:&lt;/info&gt; $contentInfo-&gt;mainLanguageCode&quot; );
$output-&gt;writeln( &quot;  &lt;info&gt;Always available:&lt;/info&gt; &quot; . ( $contentInfo-&gt;alwaysAvailable ? &#39;Yes&#39; : &#39;No&#39; ) );]]></script>
</div></div><h3 id="id-2.Browsing,finding,viewing-Owninguser">Owning user</h3><p>We can use <a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/UserService.html#method_loadUser" class="external-link" rel="nofollow"><code>UserService::loadUser()</code></a> with content <code>ownerId</code> property of our <code>ContentInfo</code> to load the <code>Content</code>'s owner as a <code><a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/Values/User/User.html" class="external-link" rel="nofollow">User</a></code> Value Object.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[$owner = $userService-&gt;loadUser( $contentInfo-&gt;ownerId );
$output-&gt;writeln( &quot;  &lt;info&gt;Owner:&lt;/info&gt; &quot; . $owner-&gt;contentInfo-&gt;name );]]></script>
</div></div><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>To get the current version's creator, and not the content's owner, you need to use the <code>creatorId</code> property from the current version's <code>VersionInfo</code> object.</p></div></div><h3 id="id-2.Browsing,finding,viewing-Section">Section</h3><p>The section's ID can be found in the <code>sectionId</code> property of the <code>ContentInfo</code> object. To get the matching Section Value Object, you need to use the SectionService::loadSection() method.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[$section = $sectionService-&gt;loadSection( $contentInfo-&gt;sectionId );
$output-&gt;writeln( &quot;  &lt;info&gt;Section:&lt;/info&gt; $section-&gt;name&quot; );]]></script>
</div></div><h3 id="id-2.Browsing,finding,viewing-Versions">Versions</h3><p>To conclude we can also iterate over the Content's version, as <code><a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/Values/Content/VersionInfo.html" class="external-link" rel="nofollow">VersionInfo</a></code> Value Objects.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[$versionInfoArray = $contentService-&gt;loadVersions( $contentInfo );
if ( count( $versionInfoArray ) )
{
    $output-&gt;writeln( &quot;\n&lt;info&gt;VERSIONS&lt;/info&gt;&quot; );
    foreach ( $versionInfoArray as $versionInfo )
    {
        $creator = $userService-&gt;loadUser( $versionInfo-&gt;creatorId );
        $output-&gt;write( &quot;  Version $versionInfo-&gt;versionNo &quot; );
        $output-&gt;write( &quot; by &quot; . $creator-&gt;contentInfo-&gt;name );
        $output-&gt;writeln( &quot; &quot; . $this-&gt;outputStatus( $versionInfo-&gt;status ) . &quot; &quot; . $versionInfo-&gt;initialLanguageCode );
    }
}]]></script>
</div></div><p>We use the <code><a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/ContentService.html#method_loadVersions" class="external-link" rel="nofollow">ContentService::loadVersions()</a></code> method, and get an array of <code>VersionInfo</code> objects.</p><h2 id="id-2.Browsing,finding,viewing-Search">Search</h2><p>In this section we will cover how the <a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/SearchService.html" class="external-link" rel="nofollow"><code>SearchService</code></a> can be used to search for Contentent, by using a <a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/Values/Content/Query.html" class="external-link" rel="nofollow"><code>Query</code></a> and a combinations of <a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/Values/Content/Query/Criterion.html" class="external-link" rel="nofollow"><code>Criteria</code></a> you will get a <a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/Values/Content/Search/SearchResult.html" class="external-link" rel="nofollow"><code>SearchResult</code></a> object back containing list of Content and count of total hits. In the future this object will also include facets, spell checking and &quot;more like this&quot; when running on a backend that supports it (for instance Solr).</p><h3 id="id-2.Browsing,finding,viewing-Performingasimplefulltextsearch">Performing a simple full text search</h3><div class="confluence-information-macro confluence-information-macro-information"><p class="title">Full code</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><a href="https://github.com/ezsystems/CookbookBundle/blob/master/Command/FindContentCommand.php" class="external-link" rel="nofollow">https://github.com/ezsystems/CookbookBundle/blob/master/Command/FindContentCommand.php</a></p></div></div><p>In this recipe, we will run a simple full text search over every compatible attribute.</p><h4 id="id-2.Browsing,finding,viewing-QueryandCriterionobjects">Query and Criterion objects</h4><p>We introduce here a new object: <code>Query</code>. It is used to build up a Content query based on a set of <code>Criterion</code> objects.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[$query = new \eZ\Publish\API\Repository\Values\Content\Query();
$query-&gt;criterion = new Query\Criterion\FullText( $text );]]></script>
</div></div><p>Multiple criteria can be grouped together using &quot;logical criteria&quot;, such as <a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/Values/Content/Query/Criterion/LogicalAnd.html" class="external-link" rel="nofollow">LogicalAnd</a> or <a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/Values/Content/Query/Criterion/LogicalOr.html" class="external-link" rel="nofollow">LogicalOr</a>. Since in this case we only want to run a text search, we simply use a <a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/Values/Content/Query/Criterion/FullText.html" class="external-link" rel="nofollow"><code>FullText</code></a> criterion object.</p><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>The full list of criteria can be found on your installation in the following directory <a href="https://github.com/ezsystems/exponential-kernel/tree/master/eZ/Publish/API/Repository/Values/Content/Query/Criterion" class="external-link" rel="nofollow">vendor/ezsystems/exponential-kernel/eZ/Publish/API/Repository/Values/Content/Query/Criterion</a>. Additionally you may look at integration tests like <a href="https://github.com/ezsystems/exponential-kernel/blob/master/eZ/Publish/API/Repository/Tests/SearchServiceTest.php" class="external-link" rel="nofollow">vendor/ezsystems/exponential-kernel/eZ/Publish/API/Repository/Tests/SearchServiceTest.php</a> for more details on how these are used.</p><p><span>NB: Be aware that the links point to code in the upcoming version (master) and might not represent the </span><span>criteria</span><span> <span><span>in your Exponential version.</span></span><br /></span></p></div></div><p> </p><h4 id="id-2.Browsing,finding,viewing-Runningthesearchqueryandusingtheresults">Running the search query and using the results</h4><p>The <code>Query</code> object is given as an argument to <a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/SearchService.html#method_findContent" class="external-link" rel="nofollow"><code>SearchService::findContent()</code></a>. This method returns a <code>SearchResult</code> object. This object provides you with various information about the search operation (number of results, time taken, spelling suggestions, or facets, as well as of course, the results themselves.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[$result = $searchService-&gt;findContent( $query );
$output-&gt;writeln( &#39;Found &#39; . $result-&gt;totalCount . &#39; items&#39; );
foreach ( $result-&gt;searchHits as $searchHit )
{
    $output-&gt;writeln( $searchHit-&gt;valueObject-&gt;contentInfo-&gt;name );
}]]></script>
</div></div><p>The <code>searchHits</code> properties of the <code>SearchResult</code> object is an array of SearchHit objects. In <code>valueObject</code> property of <code>SearchHit</code>, you will find the <code>Content</code> object that match the given <code>Query</code>.</p><p><em>Tip</em>: If you you are searching using a unique identifier, for instance using the content id or content remote id criterion, then you can use <a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/SearchService.html#method_findSingle" class="external-link" rel="nofollow"><code>SearchService::findSingle()</code></a>, this takes a Criterion and returns a single Content, or throws NotFound exception if none is found.</p><h3 id="id-2.Browsing,finding,viewing-Performinganadvancedsearch">Performing an advanced search</h3><div class="confluence-information-macro confluence-information-macro-information"><p class="title">Full code</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><a href="https://github.com/ezsystems/CookbookBundle/blob/master/Command/FindContent2Command.php" class="external-link" rel="nofollow">https://github.com/ezsystems/CookbookBundle/blob/master/Command/FindContent2Command.php</a></p></div></div><p>As explained in the previous chapter, Criterion objects are grouped together using Logical criteria. We will now see how multiple criteria objects can be combined into a fine grained search <code>Query</code>.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[use eZ\Publish\API\Repository\Values\Content\Query\Criterion;
use eZ\Publish\API\Repository\Values\Content;
 
// [...]
 
$query = new Query();
$criterion1 = new Criterion\Subtree( $locationService-&gt;loadLocation( 2 )-&gt;pathString );
$criterion2 = new Criterion\ContentTypeId( 1 );
$query-&gt;criterion = new Criterion\LogicalAnd(
    array( $criterion1, $criterion2 )
);
 
$result = $searchService-&gt;findContent( $query );]]></script>
</div></div><p>A <a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/Values/Content/Query/Criterion/Subtree.html" class="external-link" rel="nofollow"><code>Subtree</code></a> criterion limits the search to the subtree with pathString, which looks like: <code>/1/2/</code>. A <a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/Values/Content/Query/Criterion/ContentTypeId.html" class="external-link" rel="nofollow"><code>ContentTypeId</code></a> Criterion to limit the search to Content of ContentType 1. Those two criteria are grouped with a <code>LogicalAnd</code> operator. The query is executed as before, with <code>SearchService::findContent()</code>.</p><h3 id="id-2.Browsing,finding,viewing-Performingafetchlikesearch">Performing a fetch like search</h3><div class="confluence-information-macro confluence-information-macro-information"><p class="title">Full code</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><a href="https://github.com/ezsystems/CookbookBundle/blob/master/Command/FindContent3Command.php" class="external-link" rel="nofollow">https://github.com/ezsystems/CookbookBundle/blob/master/Command/FindContent3Command.php</a></p></div></div><p>A search isn't only meant for searching, it also provides the future interface for what you in Exponential 4.x would know as a content &quot;fetch&quot;. And as this is totally backend agnostic, in future Exponential 5.x versions this will be powered by either Solr or ElasticSearch meaning it also replaces &quot;ezfind&quot; fetch functions.</p><p>Following the examples above we now change it a bit to combine several criteria with both a AND and a OR condition.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[use eZ\Publish\API\Repository\Values\Content\Query\Criterion;
use eZ\Publish\API\Repository\Values\Content;
 
// [...]
 
$query = new Query();
$query-&gt;criterion = new Criterion\LogicalAnd(
    array(
        new Criterion\ParentLocationId( 2 ),
        new Criterion\LogicalOr(
            array(
                new Criterion\ContentTypeId( 1 ),
                new Criterion\ContentTypeId( 2 )
            )
        )
    )
);
 
$result = $searchService-&gt;findContent( $query );]]></script>
</div></div><p>A <code><a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/Values/Content/Query/Criterion/ParentLocationId.html" class="external-link" rel="nofollow">ParentLocationId</a></code> criterion limits the search to the children of location 2. An array of &quot;<code>ContentTypeId&quot;</code> Criteria to limit the search to Content of ContentType's with id 1 or 2 grouped in a <code>LogicalOr</code> operator. Those two criteria are grouped with a <code>LogicalAnd</code> operator. As always the query is executed as before, with <code>SearchService::findContent()</code>.</p><p><em>Tip</em>: Want to do a subtree filter ( in 4.x: fetch( 'content', 'tree' ) )? Change the location filter to use the Subtree criterion filter as shown in the advanced search example above.</p><h4 id="id-2.Browsing,finding,viewing-Usingin()insteadofOR">Using in() instead of OR</h4><p>The above example is fine, but it can be optimized a bit by taking advantage of the fact that all filter criteria support being given an array of values (IN operator) instead of as single value (EQ operator).</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Exponential 5.0</b></div><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[use eZ\Publish\API\Repository\Values\Content\Query\Criterion;
use eZ\Publish\API\Repository\Values\Content;
 
// [...]
 
$query = new Query();
$query-&gt;criterion = new Criterion\LogicalAnd(
    array(
        new Criterion\ParentLocationId( 2 ),
        new Criterion\ContentTypeId( array( 1, 2 ) )
    )
);
 
$result = $searchService-&gt;findContent( $query );]]></script>
</div></div><p>Or if your on Exponential 5.1+ you can use the new <a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/Values/Content/Query/Criterion/ContentTypeIdentifier.html" class="external-link" rel="nofollow"><code>ContentTypeIdentifier</code></a> Criterion:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Exponential 5.1+ (2013.01+)</b></div><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[use eZ\Publish\API\Repository\Values\Content\Query\Criterion;
use eZ\Publish\API\Repository\Values\Content;
 
// [...]
 
$query = new Query();
$query-&gt;criterion = new Criterion\LogicalAnd(
    array(
        new Criterion\ParentLocationId( 2 ),
        new Criterion\ContentTypeIdentifier( array( &#39;article&#39;, &#39;folder&#39; ) )
    )
);
 
$result = $searchService-&gt;findContent( $query );]]></script>
</div></div><p><em>Tip</em>: All filter criteria are capable of doing an &quot;IN&quot; selection, the ParentLocationId<span style="font-size: 10.0pt;line-height: 13.0pt;"> above could f.e. have been provided &quot;array( 2, 43 )&quot; to include second level children in both your content tree (2) and your media tree (43). </span></p><h3 id="id-2.Browsing,finding,viewing-Performingapuresearchcount">Performing a pure search count</h3><p><span style="font-size: 10.0pt;line-height: 13.0pt;">In many cases you might need the number of contents matching a search, but with no need to do anything else with the results.<br /></span><span style="font-size: 10.0pt;line-height: 13.0pt;">Thanks to the fact that the &quot;</span><span style="font-size: 10.0pt;line-height: 13.0pt;">searchHits</span><span style="font-size: small;"><span style="line-height: 13.0pt;">&quot; property of the </span></span><a href="http://apidoc.ez.no/sami/trunk/NS/html/eZ/Publish/API/Repository/Values/Content/Search/SearchResult.html" class="external-link" rel="nofollow"><code>SearchResult</code></a><span style="font-size: small;"><span style="line-height: 13.0pt;"> object always refers to the total </span>amount,<span style="line-height: 13.0pt;"> it is enough to run a standard search and set $limit to 0. This way no results will be retrieved, and the search will not be slowed down, even when the number of matching results is huge</span></span><span style="font-size: small;"><span style="line-height: 13.0pt;">.</span></span></p><p><span style="font-size: 10.0pt;line-height: 13.0pt;"> </span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: php; gutter: false; theme: Eclipse"><![CDATA[use eZ\Publish\API\Repository\Values\Content\Query;
 
// [...]
 
$query = new Query();
$query-&gt;limit = 0;
 
// [...] ( Add criteria as shown above )
 
$resultCount = $searchService-&gt;findContent( $query )-&gt;totalCount;]]></script>
</div></div><p><span style="font-size: 10.0pt;line-height: 13.0pt;"> </span></p><p><span style="font-size: 10.0pt;line-height: 13.0pt;"><br /></span></p>

                
        
    
        </div>

        <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="https://doc.ez.no/display/EZP51/2.+Browsing%2C+finding%2C+viewing"
    dc:identifier="https://doc.ez.no/display/EZP51/2.+Browsing%2C+finding%2C+viewing"
    dc:title="2. Browsing, finding, viewing"
    trackback:ping="https://doc.ez.no/rpc/trackback/12125357"/>
</rdf:RDF>
-->

            
    



<div id="labels-section" class="pageSection group">
    <div class="labels-section-content content-column" entityid="12125357" entitytype="page">
	<div class="labels-content">
		
    <ul class="label-list label-list-right ">
            <li class="no-labels-message">
            No labels
        </li>
            </ul>

    </div>
</div>
</div>

            
            




            
    








                        
    
<div id="comments-section" class="pageSection group">
        
    



</div>


            
</div>


    




    
    

    
    
    








</div>
  
        <div id="theme-footer">
            <div class="sectionColumnWrapper"><div class="sectionMacro">
<div class="sectionMacroRow"><div class="columnMacro"></div>
<div class="columnMacro">
<div class="panel" style="background-color: #ecf0f1;border-style: solid;border-width: 1px;"><div class="panelContent" style="background-color: #ecf0f1;">
<p>Where Content Means Business</p>
</div></div></div>
<div class="columnMacro"></div></div></div></div>
        </div>
    
    </div>
</div>


        
            
            

<div id="footer" role="contentinfo">
    <section class="footer-body">

                                                            <p class="license license-opensource">
                    Powered by a free <b>Atlassian Confluence Open Source Project License</b> granted to Exponential. <a href="http://www.atlassian.com/c/conf/11461">Evaluate Confluence today</a>.<br>
                </p>
                    
        

        <ul id="poweredby">
            <li class="noprint">Powered by <a href="http://www.atlassian.com/software/confluence" class="hover-footer-link">Atlassian Confluence</a> <span id='footer-build-information'>5.8.5</span>, <a href="http://www.atlassian.com/software/confluence/overview/team-collaboration-software?utm_source=confluence-footer" class="hover-footer-link">Team Collaboration Software</a></li>
            <li class="print-only">Printed by Atlassian Confluence 5.8.5, Team Collaboration Software.</li>
            <li class="noprint"><a href="https://jira.atlassian.com/browse/CONF" class="hover-footer-link">Report a bug</a></li>
            <li class="noprint"><a href="http://www.atlassian.com/about/connected.jsp?s_kwcid=Confluence-stayintouch" class="hover-footer-link">Atlassian News</a></li>
        </ul>

        

        <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>

                    <script>
AJS.toInit(function(){
 if(AJS.params.spaceKey &&
    AJS.params.spaceKey === 'MAIN' ||
    AJS.params.spaceKey === 'EZMA' ||
    AJS.params.spaceKey === 'ODC' ||
    AJS.params.spaceKey === 'EZP50' ||
    AJS.params.spaceKey === 'EZP51' ||
    AJS.params.spaceKey === 'EZP52' ||
    AJS.params.spaceKey === 'EZPCLOUD' ||
    AJS.params.spaceKey === 'EZP' ||
    AJS.params.spaceKey === 'TECHDOC' ||
    AJS.params.spaceKey === 'USERGUIDE' ||
    AJS.params.spaceKey === 'EZRECO'
){

(function()
{var isSecure=('https:'==document.location.protocol);var ff=document.createElement('script');ff.type='text/javascript';ff.async=true;ff.src=(isSecure?'https':'http')+'://'+(isSecure?'secure.':'lb.')+'liveviewer.ez.no/statjs/sst-120-1304513615/stat.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(ff,s);}
)();

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-303624-13', 'ez.no');
  ga('send', 'pageview');
}}
);
</script>
        
    </section>
</div>

    </div>
</body>

<!-- Mirrored from doc.ez.no/pages/viewpage.action?pageId=12125357 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 13:30:15 GMT -->
</html>
